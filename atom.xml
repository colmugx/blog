<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Colmugx &#39;s Blog</title>
  
  <subtitle>è®©ä¸€åˆ‡å……æ»¡æƒ³è±¡åŠ›</subtitle>
  <link href="/blog/atom.xml" rel="self"/>
  
  <link href="https://colmugx.github.io/blog/"/>
  <updated>2020-01-04T14:59:22.120Z</updated>
  <id>https://colmugx.github.io/blog/</id>
  
  <author>
    <name>colmugx</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åˆ›å»ºä¸€ä¸ª rust web server</title>
    <link href="https://colmugx.github.io/blog/2019/12/29/try-actix/"/>
    <id>https://colmugx.github.io/blog/2019/12/29/try-actix/</id>
    <published>2019-12-29T04:29:34.000Z</published>
    <updated>2020-01-04T14:59:22.120Z</updated>
    
    <content type="html"><![CDATA[<p>ç©äº†ä¸€æ®µæ—¶é—´ Vaporï¼Œæƒ³ä¸æ˜ç™½è°å®¶ä¼šç”¨ swift è·‘ç”Ÿäº§ï¼Œå¯èƒ½ä¹Ÿå°± <code>perfect</code> ç»´æŠ¤è€…èƒŒåçš„å…¬å¸ä¼šç”¨ï¼Œè‡³å°‘åœ¨æ‹†å“ªåº”è¯¥è¿˜æ˜¯è¦å¿«(la)å‡†(man)ç‹ (kpi)çš„ã€‚<br>rust ç¤¾åŒºä¸­å…³æ³¨äº† <code>rocket</code> ä¸€æ®µæ—¶é—´ï¼Œåé¢å‘ç° <code>actix-web</code> åœ¨å„æ–¹é¢æ›´æœ‰ä¼˜åŠ¿ï¼ŒåŠ ä¸Šè¦å¥½å¥½ç‚¹ rust æŠ€èƒ½æ ‘ï¼Œæ‰€ä»¥å°±é€‰å®šè¿™ä¸ªäº†ã€‚</p><p>è¿™é‡Œä¼šä»¥é‡æ„æˆ‘çš„é—¹é’Ÿåç«¯ä½œä¸ºè“æœ¬ï¼Œé€æ­¥åšä¸ªè®°å½•ã€‚</p><h2 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h2><ul><li>ç›´æ¥ç”¨ <code>cargo</code> åˆ›å»ºåº”ç”¨</li><li>è£…è½½ <code>actix-web</code></li><li>å†™ä¸€ä¸ª api</li></ul><a id="more"></a><h2 id="åˆ›å»ºåº”ç”¨"><a href="#åˆ›å»ºåº”ç”¨" class="headerlink" title="åˆ›å»ºåº”ç”¨"></a>åˆ›å»ºåº”ç”¨</h2><p>å®˜æ–¹æ²¡æœ‰å¼€ç®±å³ç”¨çš„æ¨¡æ¿ï¼Œæ‰€ä»¥è¿˜æ˜¯ä»<code>cargo new</code>å¼€å§‹ï¼Œè¿™é‡Œå®šä¹‰äº†é»˜è®¤ä½¿ç”¨<code>git</code>ä½œä¸ºç‰ˆæœ¬æ§åˆ¶</p><blockquote><p>> cargo new â€“vcs git actix-demo</p></blockquote><p>åœ¨<code>Cargo.toml</code>ä¸­æ·»åŠ è¿™äº›<br><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="attr">actix-web</span> = <span class="string">"2.0"</span></span><br><span class="line"><span class="attr">actix-rt</span> = <span class="string">"1.0"</span></span><br><span class="line"><span class="comment"># env</span></span><br><span class="line"><span class="attr">dotenv</span> = <span class="string">"0.15.0"</span></span><br><span class="line"><span class="attr">log</span> = <span class="string">"0.4.8"</span></span><br><span class="line"><span class="attr">env_logger</span> = <span class="string">"0.7.1"</span></span><br></pre></td></tr></table></figure></p><p>ç„¶ååœ¨<code>main.rs</code>åˆ›å»ºå¯åŠ¨å‡½æ•°<br><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> actix_web::&#123;App, HttpServer, get&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[get(<span class="meta-string">"/"</span>)]</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">index</span></span>() -&gt; HttpResponse &#123;</span><br><span class="line">    HttpResponse::<span class="literal">Ok</span>().body(<span class="string">"Hello World"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[actix_rt::main]</span></span><br><span class="line">async <span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() -&gt; io::<span class="built_in">Result</span>&lt;()&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> app = || App::new().service(index);</span><br><span class="line"></span><br><span class="line">    info!(<span class="string">"serving on localhost:7001"</span>);</span><br><span class="line"></span><br><span class="line">    HttpServer::new(app)</span><br><span class="line">        .bind(<span class="string">"localhost:7001"</span>)?</span><br><span class="line">        .run()</span><br><span class="line">        .await</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸€èˆ¬æ¥è¯´è¿™æ ·å°±å¯ä»¥è¿è¡Œäº†</p><h2 id="é…ç½®åº”ç”¨"><a href="#é…ç½®åº”ç”¨" class="headerlink" title="é…ç½®åº”ç”¨"></a>é…ç½®åº”ç”¨</h2><p>æŒ‰ç…§ä¹ æƒ¯ï¼Œå·¥ç¨‹ç»“æ„è¿˜æ˜¯æ„¿æ„è®¾ç½®æˆè¿™æ ·ï¼š</p><ul><li>controller</li><li>services</li><li>models</li><li>middleware</li></ul><p>æ‰€ä»¥ç›®å½•å…ˆç¡®å®šä¸‹æ¥ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-- src</span><br><span class="line">| +-- controller</span><br><span class="line">| | +-- mod.rs</span><br><span class="line">| +-- services</span><br><span class="line">| | +-- mod.rs</span><br><span class="line">| +-- models</span><br><span class="line">| | +-- mod.rs</span><br><span class="line">| +-- middleware</span><br><span class="line">| | +-- mod.rs</span><br></pre></td></tr></table></figure></p><p>ä¸ºä»€ä¹ˆæ¯ä¸ªç›®å½•ä¸‹éƒ½éœ€è¦<code>mod.rs</code>ï¼ŸåŸå› æ˜¯äººå®¶<code>rust</code>å¯¹æ¨¡å—å°±æ˜¯è¿™ä¹ˆå¤„ç†çš„å•Šï¼</p><p>æ¥ç€ï¼Œ<code>Cargo.toml</code>éœ€è¦åŠ ç‚¹ä¸œè¥¿ï¼Œæ¯”å¦‚<code>json</code>çš„æ”¯æŒï¼ˆå¯æ˜¯ä½ ç”¨çš„ä¸æ˜¯ GraphQL å—ï¼ï¼‰<br><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="comment"># serde</span></span><br><span class="line"><span class="attr">serde</span> = <span class="string">"1.0.104"</span></span><br><span class="line"><span class="attr">serde_derive</span> = <span class="string">"1.0.104"</span></span><br><span class="line"><span class="attr">serde_json</span> = <span class="string">"1.0.44"</span></span><br><span class="line"><span class="attr">json</span> = <span class="string">"0.12.0"</span></span><br></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥å¯¹ä»£ç ä½œå‡ºä¸€äº›æ”¹åŠ¨ï¼Œé¦–å…ˆæ˜¯ä¸€ä¸ªé€šç”¨çš„<code>json</code>ç»“æ„ä½“ï¼Œåˆ›å»º <code>models/payload</code></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> serde_derive::&#123;Serialize, Deserialize&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Serialize, Deserialize, Clone)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="class"><span class="keyword">struct</span> <span class="title">Payload</span></span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">pub</span> code: <span class="built_in">isize</span>,</span><br><span class="line">    <span class="keyword">pub</span> message: <span class="built_in">String</span>,</span><br><span class="line">    <span class="meta">#[serde(skip_serializing_if = <span class="meta-string">"Option::is_none"</span>, default)]</span></span><br><span class="line">    <span class="keyword">pub</span> payload: <span class="built_in">Option</span>&lt;T&gt;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œä»<code>controller/index</code>å¼€å§‹</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Deserialize)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Info</span></span> &#123;</span><br><span class="line">    message: <span class="built_in">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[get(<span class="meta-string">"/"</span>)]</span></span><br><span class="line"><span class="keyword">pub</span> async <span class="function"><span class="keyword">fn</span> <span class="title">index</span></span>(query: web::Query&lt;Info&gt;) -&gt; <span class="built_in">Result</span>&lt;HttpResponse, Error&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åœ¨Queryæ‹¿åˆ°ä¸ Info ç»“æ„ä¸€æ ·çš„å‚æ•°</span></span><br><span class="line">    <span class="comment">// å¦‚æœä½ è¿™ä¹ˆå†™ï¼Œé‚£ä¹ˆå¦‚æœè°ƒç”¨æ—¶å¦‚æœä¸ä¼  query ä¼šæŠ¥é”™ï¼Œparam åŒç†</span></span><br><span class="line">    <span class="comment">// rust çœŸä¸¥æ ¼..</span></span><br><span class="line">    <span class="keyword">let</span> result = crate::services::index::get_helloworld(query.message.clone());</span><br><span class="line"></span><br><span class="line">    <span class="literal">Ok</span>(HttpResponse::<span class="literal">Ok</span>().json(result))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œ<code>services/index</code>ï¼Œæš‚æ—¶ä¸ç”¨<code>middleware</code></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> crate::models::payload::Payload;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€å•å†™ä¸€ä¸ªæœåŠ¡</span></span><br><span class="line"><span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">get_helloworld</span></span>(msg: <span class="built_in">String</span>) -&gt; Payload&lt;()&gt; &#123;</span><br><span class="line">    Payload &#123;</span><br><span class="line">        code: <span class="number">0</span>,</span><br><span class="line">        message: msg.to_string(),</span><br><span class="line">        payload: <span class="literal">None</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæ”¹ä¸€ä¸‹<code>main.rs</code><br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+mod controllers;</span></span><br><span class="line"><span class="addition">+mod models;</span></span><br><span class="line"><span class="addition">+mod services;</span></span><br><span class="line"></span><br><span class="line">#[actix_rt::main]</span><br><span class="line">async fn main() -&gt; io::Result&lt;()&gt; &#123;</span><br><span class="line"></span><br><span class="line">    let app = || App::new()</span><br><span class="line"><span class="deletion">-        .service(index);</span></span><br><span class="line"><span class="addition">+        .service(controllers::index::index);</span></span><br><span class="line"></span><br><span class="line">    info!("serving on localhost:7001");</span><br><span class="line"></span><br><span class="line">    HttpServer::new(app)</span><br><span class="line">        .bind("localhost:7001")?</span><br><span class="line">        .run()</span><br><span class="line">        .await</span><br></pre></td></tr></table></figure></p><p>ä»£ç é‡Œæˆ‘å…¶å®è¿˜ç”¨è¿™äº›ï¼š</p><ul><li><code>router</code></li><li>å†™äº†ä¸€ä¸ªé…ç½®çš„ç»“æ„ä½“ç”¨æ¥å°è£… HOST, PORT å’Œæ•°æ®åº“åœ°å€</li><li>ç¯å¢ƒå˜é‡é…ç½®</li></ul><p>æ–‡ç« å°±ä¸å†™äº†ï¼Œå¤§æ¦‚å°±é‚£æ ·ã€‚</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><ul><li>å»ºè®®ç”¨ CLionï¼ŒVSCode å’Œ VIM å®åœ¨æ˜¯å¤ªâ€¦ IDE ä¹Ÿå¥½ï¼Œæ•°æ®åº“åˆ†æ­¥è°ƒè¯•ä»€ä¹ˆçš„å¾ˆæ–¹ä¾¿</li><li>æ²¡ key æ€ä¹ˆåŠï¼Œæ‰¾ä¸€ä¸ªé•¿æœŸç»´æŠ¤çš„å¼€æºé¡¹ç›®ï¼Œå«–å°±å®Œäº‹å„¿äº†</li><li>å‰ç«¯æœ¬æ¥ä¹Ÿæƒ³ç”¨<code>rust(yew)</code>çš„ï¼Œå¯æ˜¯åœ¨<code>raspbian</code>è¿è¡Œï¼Œä¸æ¸…æ¥šç»“æœã€‚ä¹Ÿä¸æ¸…æ¥šå…¶ä»–é€‰å‹ï¼Œæ‰€ä»¥åªèƒ½ç»§ç»­<code>electron + react</code>äº†ï¼Œå¯èƒ½ä¼šå»æ‰<code>umi</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç©äº†ä¸€æ®µæ—¶é—´ Vaporï¼Œæƒ³ä¸æ˜ç™½è°å®¶ä¼šç”¨ swift è·‘ç”Ÿäº§ï¼Œå¯èƒ½ä¹Ÿå°± &lt;code&gt;perfect&lt;/code&gt; ç»´æŠ¤è€…èƒŒåçš„å…¬å¸ä¼šç”¨ï¼Œè‡³å°‘åœ¨æ‹†å“ªåº”è¯¥è¿˜æ˜¯è¦å¿«(la)å‡†(man)ç‹ (kpi)çš„ã€‚&lt;br&gt;rust ç¤¾åŒºä¸­å…³æ³¨äº† &lt;code&gt;rocket&lt;/code&gt; ä¸€æ®µæ—¶é—´ï¼Œåé¢å‘ç° &lt;code&gt;actix-web&lt;/code&gt; åœ¨å„æ–¹é¢æ›´æœ‰ä¼˜åŠ¿ï¼ŒåŠ ä¸Šè¦å¥½å¥½ç‚¹ rust æŠ€èƒ½æ ‘ï¼Œæ‰€ä»¥å°±é€‰å®šè¿™ä¸ªäº†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œä¼šä»¥é‡æ„æˆ‘çš„é—¹é’Ÿåç«¯ä½œä¸ºè“æœ¬ï¼Œé€æ­¥åšä¸ªè®°å½•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;TL-DR&quot;&gt;&lt;a href=&quot;#TL-DR&quot; class=&quot;headerlink&quot; title=&quot;TL;DR&quot;&gt;&lt;/a&gt;TL;DR&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ç›´æ¥ç”¨ &lt;code&gt;cargo&lt;/code&gt; åˆ›å»ºåº”ç”¨&lt;/li&gt;
&lt;li&gt;è£…è½½ &lt;code&gt;actix-web&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å†™ä¸€ä¸ª api&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="å®è·µå°è¯•" scheme="https://colmugx.github.io/blog/categories/%E5%AE%9E%E8%B7%B5%E5%B0%9D%E8%AF%95/"/>
    
    
      <category term="rust" scheme="https://colmugx.github.io/blog/tags/rust/"/>
    
      <category term="actix" scheme="https://colmugx.github.io/blog/tags/actix/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚æœæˆ‘æŠŠ Rust ç”¨åœ¨ç½‘é¡µå‘¢</title>
    <link href="https://colmugx.github.io/blog/2019/10/13/try-wasm/"/>
    <id>https://colmugx.github.io/blog/2019/10/13/try-wasm/</id>
    <published>2019-10-13T15:47:21.000Z</published>
    <updated>2019-12-29T04:31:21.412Z</updated>
    
    <content type="html"><![CDATA[<p>å·²çŸ¥<code>Rust</code>æ˜¯ä¸ªå¾ˆç¡¬æ ¸çš„ç¼–ç¨‹è¯­è¨€</p><p>åˆå·²çŸ¥<code>JavaScript</code>æˆ–è€…è¯´åœ¨æµè§ˆå™¨ä¸Šçš„<code>JavaScript</code>åœ¨æŸç§æƒ…å†µæ— æ³•èƒœä»»å·¥ä½œã€‚</p><p>Soï¼Ÿ</p><blockquote><p>ğŸ¦€ Rust + ğŸ•¸ Wasm = â¤</p></blockquote><p>ä½†æ˜¯ï¼Œå•çº¯æŠŠæ•™ç¨‹æˆ–è€… tutorial æ‹¿å‡ºæ¥å¤è¿°æ˜¯æ²¡æ„æ€çš„ã€‚Soï¼Œæç‚¹äº‹æƒ…</p><p>é‚£ä¹ˆå‰ææ˜¯ï¼Œä½ å·²ç»å¼„æ¸…æ¥šäº† <code>wasm-pack</code> æ˜¯æ€ä¹ˆå›äº‹äº†<br><a id="more"></a></p><h3 id="é¢˜å¹²ï¼Ÿ"><a href="#é¢˜å¹²ï¼Ÿ" class="headerlink" title="é¢˜å¹²ï¼Ÿ"></a>é¢˜å¹²ï¼Ÿ</h3><p>æœ€è¿‘ç€æ‰‹ä¸€ä¸ªé¡¹ç›®ï¼Œä½¿ç”¨æµè§ˆå™¨çš„<code>crypto</code>å®ç°äº†åŠ è§£å¯†ï¼ŒåŠ è§£å¯†éƒ½éœ€è¦åœ¨æµè§ˆå™¨å¤„ç†ã€‚ä½†æ¯•ç«Ÿè§£é‡Šå‹ï¼Œæœ€å¤šåªæ˜¯æ··æ·†ã€‚å³ä½¿æˆ‘åœ¨ç¼–å†™æ—¶å·²ç»ä½¿ç”¨äº†èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿ï¼Œå°±å·®æ•´ä¸Šé’“é±¼çš„é‚£å¥—æ‰‹æ®µäº†ã€‚ä¸è¿‡ï¼Œæ¯•ç«ŸäºŒè¿›åˆ¶çš„ä¸œè¥¿ï¼Œæ€»æ¯”æ··æ·†å‹æ›´ä¸å®¹æ˜“è‚‰çœ¼è§£æï¼Œäººè„‘ç¼–è¯‘</p><p>è¿™é‡Œå€’æ˜¯å¯ä»¥äº¤ä»£ï¼Œæˆ‘ç”¨åˆ°äº†<code>aes-256-cfb</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¤§æ¦‚éœ€è¦è¿™äº›ä¸œè¥¿</p><h3 id="æ¿æ¡ç®±ï¼Ÿ"><a href="#æ¿æ¡ç®±ï¼Ÿ" class="headerlink" title="æ¿æ¡ç®±ï¼Ÿ"></a>æ¿æ¡ç®±ï¼Ÿ</h3><p>æ¯•ç«Ÿæ˜¯ Rustï¼Œæ³¨å®šæ˜¯â€œç®€é™‹â€çš„ï¼Œæ‰€ä»¥æˆ‘å†³å®šç›´æ¥å»æ‰¾ç°æœ‰çš„å¯†ç å­¦ç±»åº“ã€‚ç›®å‰å·²ç»äº²æµ‹çš„å¯†ç å­¦åº“æœ‰ï¼š</p><ul><li><a href="https://github.com/DaGenix/rust-crypto" target="_blank" rel="noopener">DaGenix/rust-crypto</a></li><li><a href="https://github.com/RustCrypto" target="_blank" rel="noopener">RustCrypto ç³»åˆ—</a></li></ul><p>å¦‚æœè¿è¡Œåœ¨ <code>wasm</code>ï¼Œç¬¬ä¸€ä¸ªåº“éœ€è¦ä½¿ç”¨å¦å¤–ä¸€ä¸ªæœ‰é’ˆå¯¹é€‚åº”çš„</p><ul><li><a href="https://github.com/buttercup/rust-crypto-wasm" target="_blank" rel="noopener">buttercup/rust-crypto-wasm</a></li></ul><p>åœ¨å†™æ–‡ç« å‰æˆ‘å·²ç»éƒ½â€œç»•â€è¿‡ä¸€éäº†â€¦åœ¨è¿™ä¹‹é—´åå¤æ¨ªè·³ã€‚åˆšå¼€å§‹ä»¥ä¸ºè¿™äº›åº“æ— æ³•é€‚ç”¨<code>wasm</code>ï¼ˆæŠ¥é”™æ— æ³•å®šä½ï¼‰ï¼Œåæ¥è§‰å¾—ç”¨èµ·æ¥å¥½éš¾ï¼ˆå†™å¾—å¾ˆç»•ï¼‰ï¼Œå†åæ¥å‘ç°æ˜¯æˆ‘å†™é”™äº†â€¦</p><p>æ¥ç€ï¼Œå¯èƒ½éœ€è¦ä¸€ä¸ªéšæœºæ•°åº“ï¼Œåªèƒ½æ˜¯<code>rand</code>äº†ï¼Œè€Œä¸”ä¹Ÿæ˜¯<code>crates.io</code>ä¸‹è½½é‡æœ€å¤šçš„ï¼ˆä¸ºä»€ä¹ˆâ€¦ï¼‰</p><h3 id="åˆ›å»ºï¼Ÿ"><a href="#åˆ›å»ºï¼Ÿ" class="headerlink" title="åˆ›å»ºï¼Ÿ"></a>åˆ›å»ºï¼Ÿ</h3><blockquote><p>> cargo generate â€“git <a href="https://github.com/rustwasm/wasm-pack-template" target="_blank" rel="noopener">https://github.com/rustwasm/wasm-pack-template</a></p></blockquote><p>æ¥ç€ï¼Œå®‰æ’ä¸Šä¾èµ–<br><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[dependencies]</span></span><br><span class="line"><span class="attr">wasm-bindgen</span> = <span class="string">"0.2"</span> <span class="comment"># æ ¸å¿ƒ</span></span><br><span class="line"><span class="attr">rand</span> = <span class="string">"0.7.2"</span> <span class="comment"># ä½†æ¥ä¸‹æ¥ç”¨ä¸ä¸Š</span></span><br><span class="line"><span class="attr">aes</span> = <span class="string">"0.3.2"</span> <span class="comment"># æ·»åŠ è¿™ä¸ªåªæ˜¯ä¸ºäº†åˆ†ç»„ä¾èµ–ä¸ç±»å‹</span></span><br><span class="line"><span class="attr">cfb-mode</span> = <span class="string">"0.3.2"</span> <span class="comment"># è¿™ä¸ªæ‰æ˜¯åŠ å¯†æ ¸å¿ƒ</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åè¿è¡Œä¸€é<code>cargo build</code>æˆ–è€…<code>wasm-pack build</code>ï¼Œå› ä¸º<code>rust</code>åœ¨ç¼–è¯‘æ—¶ä¼šæ£€æŸ¥ä¾èµ–æƒ…å†µï¼Œæ‰€ä»¥ç´¢æ€§æˆ‘å°±ç›´æ¥é€šè¿‡è¿™ç§æ–¹å¼å®‰è£…ä¾èµ–äº†ï¼Œå°±åƒå†™<code>swift</code>éšæ‰‹<code>cmd + b</code></p><h3 id="é£Ÿç”¨ï¼Ÿ"><a href="#é£Ÿç”¨ï¼Ÿ" class="headerlink" title="é£Ÿç”¨ï¼Ÿ"></a>é£Ÿç”¨ï¼Ÿ</h3><h4 id="ç¼–è¯‘æºç "><a href="#ç¼–è¯‘æºç " class="headerlink" title="ç¼–è¯‘æºç "></a>ç¼–è¯‘æºç </h4><ol><li><p>åŠ è½½ crateï¼ˆä¸Šæ¿æ¡ï¼ï¼‰</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="keyword">crate</span> aes;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">crate</span> cfb_mode;</span><br></pre></td></tr></table></figure></li><li><p>å£°æ˜ä¾èµ–ï¼Œæˆ–è€…è¯´<code>import</code></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> aes::Aes256; <span class="comment">// ä½¿ç”¨ 256</span></span><br><span class="line"><span class="keyword">use</span> cfb_mode::stream_cipher::&#123;NewStreamCipher, StreamCipher&#125;; <span class="comment">// cfbæ˜¯åŸºäºæµåŠ å¯†å…¶ä¸­ä¸€ç§</span></span><br><span class="line"><span class="keyword">use</span> cfb_mode::Cfb; <span class="comment">// éœ€è¦ç”¨è¿™ä¸ªç»“æ„ä½“</span></span><br></pre></td></tr></table></figure></li><li><p>å£°æ˜ä¸€ä¸ªç±»å‹åˆ«åï¼Œæ–¹ä¾¿ä½¿ç”¨<br>Rust å¯ä»¥å£°æ˜ç±»å‹åˆ«åã€‚ä¸ºäº†åé¢æ–¹ä¾¿å®ç”¨ï¼Œå®šä¹‰ä¸€ä¸ª</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ Cfb ç»“æ„ä½“ä½œä¸ºåŠ å¯†ç±»å‹ï¼ŒCfb æœ¬èº«åˆéœ€è¦ä¸€ä¸ªç±»å‹â€¦ä½¿ç”¨ Aes256 ç»“æ„ä½“å£°æ˜é•¿åº¦</span></span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">AesCfb</span></span> = Cfb&lt;Aes256&gt;;</span><br></pre></td></tr></table></figure></li><li><p>éšä¾¿å†™ä¸ªåŠ å¯†</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[wasm_bindgen]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">test</span></span>() -&gt; <span class="built_in">Vec</span>&lt;<span class="built_in">u8</span>&gt; &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> key: &amp;[<span class="built_in">u8</span>; <span class="number">32</span>] = b"nashizhendeniup,,nashizhendeniup<span class="string">";</span></span><br><span class="line"><span class="string">  let iv: &amp;[u8; 16]  = b"</span>unique,un,unique<span class="string">";</span></span><br><span class="line"><span class="string">  let msg = "</span>é‚£ä½ æ˜¯çœŸçš„ç‰›çš®<span class="string">";</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  let mut buffer = msg.as_bytes().to_vec();</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  AesCfb::new_var(key, iv).unwrap().encrypt(&amp;mut buffer);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  buffer</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="åˆ°å‰ç«¯ä½¿ç”¨"><a href="#åˆ°å‰ç«¯ä½¿ç”¨" class="headerlink" title="åˆ°å‰ç«¯ä½¿ç”¨"></a>åˆ°å‰ç«¯ä½¿ç”¨</h4><p>ç»è¿‡ç¼–è¯‘<code>wasm-pack build</code>ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ª<code>pkg</code>ç›®å½•ã€‚ç›®å½•ä¸‹çš„æ–‡ä»¶å°±å¾ˆç†Ÿæ‚‰äº†ï¼</p><ul><li>package.json</li><li>&lt;xxx>.wasm</li><li>&lt;xxx>.d.ts</li><li>â€¦â€¦</li></ul><p>ä½ ç”šè‡³å¯ä»¥ç›´æ¥æŠŠè¿™ä¸ªåŒ…ä¸Šåˆ°<code>npm</code>ï¼Œè®©æ›´å¤šäººå¯ä»¥ä½¿ç”¨ã€‚è¿™é‡Œæˆ‘ä»¬å°±åªæ˜¯<code>yarn link</code>ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªå‰ç«¯é¡¹ç›®</p><blockquote><p>> npm init wasm-app www</p></blockquote><p>æ¥ç€ï¼Œæœ‰ç€ 50 å¹´å‰ç«¯ç»éªŒçš„è€å‰ç«¯åº”è¯¥éƒ½ä¼šæ¥ä¸‹æ¥çš„æ­¥éª¤äº†ï¼š<code>yarn</code> -&gt; <code>yarn link &lt;xxx&gt;</code></p><p>ç„¶åï¼ŒæŠŠ<code>JavaScript</code>çš„ä»£ç æ”¹æ”¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;test&#125; <span class="keyword">from</span> <span class="string">'crypto-test'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(test())</span><br></pre></td></tr></table></figure><p>å› ä¸º <code>Rust</code> æ˜¯å¼ºç±»å‹çš„è¯­è¨€ï¼Œæ‰€ä»¥åœ¨ç±»å‹æ¨æ–­ä¸ä¼šæœ‰å¤ªå¤šéº»çƒ¦ã€‚åŒæ—¶ï¼Œåœ¨é€šè¿‡å·¥å…·ç¼–è¯‘åˆ°<code>wasm</code>æ—¶ä¼šå¤šç¼–è¯‘ä¸€ä¸ª<code>d.ts</code>æ–‡ä»¶ã€‚è¿™æ ·ï¼Œå°±ç®—æš´éœ²ç»™<code>JavaScript</code>çš„ä»£ç å†å¤æ‚ï¼Œåªè¦ä½¿ç”¨ VSCode æˆ–è€…æ”¯æŒ TS çš„ Language Server ä¹Ÿæ²¡æœ‰å¤ªå¤§å‹åŠ›</p><p>æ‰€ä»¥è¿™æ ·æˆ‘å°±å¾—åˆ°ä¸€ä¸ªåŠ å¯†æ•°æ®é›†åˆï¼Œ<code>Vec&lt;u8&gt;</code>åˆ°<code>JavaScript</code>é‚£è¾¹ä¼šç›´æ¥å˜æˆ<code>UTF8</code>ç±»å‹æ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šæ‰“å°å‡ºè¿™ä¸œè¥¿<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Uint8Array(21)Â [230, 156, 59, 211, 78, 162, 142, 118, 193, 154, 45, 255, 203, 56, 123, 8, 143, 173, 46, 120, 25]</span><br></pre></td></tr></table></figure></p><p>ç”¨<code>node</code>çš„è¯ï¼Œä¸€èˆ¬ä¼šæŠŠåŠ å¯†æ•°æ®è½¬æˆå­—ç¬¦ä¸²ä¿å­˜ï¼ˆæ¯”å¦‚æˆ‘æåˆ°çš„æˆ‘åœ¨åšçš„é¡¹ç›®ï¼‰ï¼Œè¿™é‡Œå°±å…ˆè£¸ç€å§</p><p>é‚£<code>wasm</code>ç”»é£æ˜¯æ€æ ·çš„å‘¢ï¼Ÿç»™ä¸ªèŠ‚é€‰å‚è€ƒä¸€ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  get_local $p0</span><br><span class="line">  i32.load</span><br><span class="line">  get_local $p1</span><br><span class="line">  call $core::fmt::Write::write_char::h90a3bac002e2aa8d)</span><br><span class="line">(func $&lt;&amp;T_as_core::fmt::Debug&gt;::fmt::h110ce52a73dd639b (type $t6) (param $p0 i32) (param $p1 i32) (result i32)</span><br><span class="line">  get_local $p0</span><br><span class="line">  i32.load</span><br><span class="line">  get_local $p1</span><br><span class="line">  call $core::fmt::num::&lt;impl_core::fmt::Debug_for_usize&gt;::fmt::hf84d386a4f5a1afb)</span><br><span class="line">(func $__rdl_dealloc (type $t7) (param $p0 i32) (param $p1 i32) (param $p2 i32)</span><br><span class="line">  i32.const 1056732</span><br><span class="line">  get_local $p0</span><br></pre></td></tr></table></figure></p><p>çœ‹å¾—æˆ‘éƒ½æœ‰å¥³è£…çš„å†²åŠ¨äº†ï¼ˆå¤§é›¾</p><h3 id="ç»“æŸï¼Ÿ"><a href="#ç»“æŸï¼Ÿ" class="headerlink" title="ç»“æŸï¼Ÿ"></a>ç»“æŸï¼Ÿ</h3><p>æ–‡ç« çš„ç›®æ ‡åªæœ‰ä¸¤ä¸ªï¼š</p><ul><li>ä½“éªŒ<code>rust + wasm</code></li><li>å¹²ä¸€æ‰‹åŠ å¯†ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å–ä»£æµè§ˆå™¨çš„<code>crypto</code>ï¼Œä¸è€ƒè™‘æ€§èƒ½</li></ul><p>å› ä¸º<code>Rust</code>çš„å‘å±•å¿«æ¥è¿‘å®Œæ•´äº†ï¼Œè¿™ä¸ªæ—¶å€™å…¥å‘åº”è¯¥æŒºåˆé€‚ã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘å°±æŒ‡æœ›é è¿™ä¸ªè¯­è¨€æ¥è¿‘è®¡ç§‘çš„ä¸–ç•Œäº†</p><p>æœ€åï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œæ‰€é€‰æ‹©çš„<code>AES</code>é•¿åº¦ä¸åŒï¼Œä¼šå½±å“ä½ éœ€è¦çš„ç§˜é’¥é•¿åº¦ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å” å” åŠ å¯†ï¼Ÿ</p><h3 id="ï¼ˆé™„åŠ èµ„æ–™ï¼‰åŠ å¯†ï¼Ÿ"><a href="#ï¼ˆé™„åŠ èµ„æ–™ï¼‰åŠ å¯†ï¼Ÿ" class="headerlink" title="ï¼ˆé™„åŠ èµ„æ–™ï¼‰åŠ å¯†ï¼Ÿ"></a>ï¼ˆé™„åŠ èµ„æ–™ï¼‰åŠ å¯†ï¼Ÿ</h3><h4 id="åˆ†ç»„å¯†ç "><a href="#åˆ†ç»„å¯†ç " class="headerlink" title="åˆ†ç»„å¯†ç "></a>åˆ†ç»„å¯†ç </h4><p>åˆ†ç»„å¯†ç å°†æ˜æ–‡åˆ†æˆå¤šä¸ªç­‰é•¿çš„æ¨¡å—ï¼ˆblockï¼‰ï¼Œä½¿ç”¨ç¡®å®šçš„ç®—æ³•å’Œå¯¹ç§°å¯†é’¥å¯¹æ¯ç»„åˆ†åˆ«åŠ å¯†è§£å¯†ã€‚æ‰€ä»¥ï¼Œè¿™ç§åŠ å¯†æ–¹å¼å¸¦æ¥çš„é—®é¢˜å°±æ˜¯ï¼šå¯¹è¶Šé•¿çš„å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯†ï¼Œä»£ä»·è¶Šå¤§</p><h4 id="AES"><a href="#AES" class="headerlink" title="AES"></a>AES</h4><p>å¯¹ç§°åŠ å¯†çš„ä¸€ç§ï¼ˆå¯¹ç§°åŠ å¯†å°±ä¸è§£é‡Šäº†ï¼‰ï¼Œä¹Ÿæ˜¯ç›®å‰æœ€æµè¡Œçš„å¯¹ç§°åŠ å¯†ç®—æ³•ä¹‹ä¸€ã€‚è¯¥ç®—æ³•å±äºåˆ†ç»„åŠ å¯†ç®—æ³•ã€‚</p><p>AESçš„åŒºå—é•¿åº¦å›ºå®šä¸º128æ¯”ç‰¹ï¼Œå¯†é’¥é•¿åº¦åˆ™å¯ä»¥æ˜¯128ï¼Œ192æˆ–256æ¯”ç‰¹ã€‚</p><p>åŠ å¯†æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šæ¨¡å¼ï¼šecb, cfb, gcm, cbcã€‚å…¶ä¸­ ecb æ²¡æœ‰ iv</p><p>æˆ‘ä»¬åœ¨ä½¿ç”¨å¯†ç åº“çš„æ—¶å€™ï¼Œéƒ½ä¼šæ¥è§¦åˆ° <code>key</code>, <code>iv</code> è¿˜æœ‰å¯èƒ½éœ€è¦<code>padding</code></p><h5 id="iv"><a href="#iv" class="headerlink" title="iv?"></a>iv?</h5><p>åˆå§‹åŒ–å‘é‡ï¼ˆIVï¼ŒInitialization Vectorï¼‰æ˜¯è®¸å¤šä»»åŠ¡ä½œæ¨¡å¼ä¸­ç”¨äºå°†åŠ å¯†éšæœºåŒ–çš„ä¸€ä¸ªä½å—ï¼Œç”±æ­¤å³ä½¿åŒæ ·çš„æ˜æ–‡è¢«å¤šæ¬¡åŠ å¯†ä¹Ÿä¼šäº§ç”Ÿä¸åŒçš„å¯†æ–‡ï¼Œé¿å…äº†è¾ƒæ…¢çš„é‡æ–°äº§ç”Ÿå¯†é’¥çš„è¿‡ç¨‹ã€‚</p><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸­ï¼Œä¸åº”å½“åœ¨ä½¿ç”¨åŒä¸€å¯†é’¥çš„æƒ…å†µä¸‹ä¸¤æ¬¡ä½¿ç”¨åŒä¸€ä¸ªIVã€‚å¯¹äºCBCå’ŒCFBï¼Œé‡ç”¨IVä¼šå¯¼è‡´æ³„éœ²æ˜æ–‡é¦–ä¸ªå—çš„æŸäº›ä¿¡æ¯ï¼Œäº¦åŒ…æ‹¬ä¸¤ä¸ªä¸åŒæ¶ˆæ¯ä¸­ç›¸åŒçš„å‰ç¼€ã€‚å¯¹äºOFBå’ŒCTRè€Œè¨€ï¼Œé‡ç”¨IVä¼šå¯¼è‡´å®Œå…¨å¤±å»å®‰å…¨æ€§ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå‘é‡ç”¨äºåˆ†ç»„åŠ å¯†ä¸­å…¶ä¸­ç¬¬ä¸€ä¸ªå—çš„åŠ å¯†ï¼Œå…¶ä»–å—å‡ä¸ºè‡ªåŠ¨ç”Ÿæˆï¼ˆå°±æ˜¯æä¾›å‘é‡ï¼‰</p><h5 id="key"><a href="#key" class="headerlink" title="key?"></a>key?</h5><p>åŠ å¯†å¯†é’¥ï¼Œå¯¹äº aes æ¥è¯´å°±æ˜¯æ¯ä¸ªå—ä½¿ç”¨åˆ°çš„åŠ å¯†å¯†é’¥</p><h5 id="padding"><a href="#padding" class="headerlink" title="padding?"></a>padding?</h5><p>padding æ˜¯ç”¨æ¥å¡«å……æœ€åä¸€å—ä½¿å¾—å˜æˆä¸€æ•´å—ï¼Œæ‰€ä»¥å¯¹äºåŠ å¯†è§£å¯†ä¸¤ç«¯éœ€è¦ä½¿ç”¨åŒä¸€çš„ PADDING æ¨¡å¼ï¼Œå¤§éƒ¨åˆ† PADDING æ¨¡å¼ä¸ºPKCS5, PKCS7, NOPADDINGã€‚</p><h4 id="AES256-128"><a href="#AES256-128" class="headerlink" title="AES256? 128?"></a>AES256? 128?</h4><p>å…¶ä¸­ï¼Œ<code>iv</code>è‚¯å®šæ˜¯ 16 ä½ã€‚å› ä¸ºåŠ å¯†å—çš„é•¿åº¦å°±æ˜¯è¿™ä¹ˆé™åˆ¶çš„</p><p>åŒºåˆ«åœ¨äºå¯†é’¥é•¿åº¦ï¼Œ<code>Aes128</code> çš„å¯†é’¥é•¿åº¦éœ€è¦ 16 ä½ï¼Œè€Œ <code>Aes256</code> éœ€è¦çš„å¯†é’¥é•¿åº¦æ˜¯ 32 ä½</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿç®—ä¸€ä¸‹ä¸å°±çŸ¥é“äº†</p><h4 id="AES256CFB"><a href="#AES256CFB" class="headerlink" title="AES256CFB?"></a>AES256CFB?</h4><p>å°±æ˜¯ä½¿ç”¨ aesï¼Œé•¿åº¦ 256ï¼Œé‚£ä¹ˆ cfb å‘¢ï¼Ÿ</p><p>å¯†æ–‡åé¦ˆï¼ˆCFBï¼ŒCipher feedbackï¼‰ï¼Œå¯ä»¥ç†è§£æ˜¯åå‘ CBCï¼Œå› ä¸º CFB çš„è§£å¯†è¿‡ç¨‹å‡ ä¹å°±æ˜¯é¢ å€’çš„CBCçš„åŠ å¯†è¿‡ç¨‹</p><p>é‚£ï¼Œä¹Ÿä¸ç”¨æƒ³å¤ªå¤šï¼Œå°±æ˜¯ä½¿ç”¨ AES åŠ å¯†ï¼Œé•¿åº¦ä½¿ç”¨ 256ï¼Œæ¨¡å¼ä½¿ç”¨ cfb</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å·²çŸ¥&lt;code&gt;Rust&lt;/code&gt;æ˜¯ä¸ªå¾ˆç¡¬æ ¸çš„ç¼–ç¨‹è¯­è¨€&lt;/p&gt;
&lt;p&gt;åˆå·²çŸ¥&lt;code&gt;JavaScript&lt;/code&gt;æˆ–è€…è¯´åœ¨æµè§ˆå™¨ä¸Šçš„&lt;code&gt;JavaScript&lt;/code&gt;åœ¨æŸç§æƒ…å†µæ— æ³•èƒœä»»å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;Soï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ğŸ¦€ Rust + ğŸ•¸ Wasm = â¤&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå•çº¯æŠŠæ•™ç¨‹æˆ–è€… tutorial æ‹¿å‡ºæ¥å¤è¿°æ˜¯æ²¡æ„æ€çš„ã€‚Soï¼Œæç‚¹äº‹æƒ…&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå‰ææ˜¯ï¼Œä½ å·²ç»å¼„æ¸…æ¥šäº† &lt;code&gt;wasm-pack&lt;/code&gt; æ˜¯æ€ä¹ˆå›äº‹äº†&lt;br&gt;
    
    </summary>
    
      <category term="å®è·µå°è¯•" scheme="https://colmugx.github.io/blog/categories/%E5%AE%9E%E8%B7%B5%E5%B0%9D%E8%AF%95/"/>
    
    
      <category term="TypeScript" scheme="https://colmugx.github.io/blog/tags/TypeScript/"/>
    
      <category term="rust" scheme="https://colmugx.github.io/blog/tags/rust/"/>
    
  </entry>
  
  <entry>
    <title>æ¥è‡ª swift çš„è·¨ç•Œæ‰§æ³•ï¼ˆä¸€ï¼‰ â€”â€” Vapor</title>
    <link href="https://colmugx.github.io/blog/2019/06/23/try-vapor-0/"/>
    <id>https://colmugx.github.io/blog/2019/06/23/try-vapor-0/</id>
    <published>2019-06-23T08:17:53.000Z</published>
    <updated>2019-12-18T15:04:17.237Z</updated>
    
    <content type="html"><![CDATA[<p>Vapor åº”è¯¥æ˜¯ç›®å‰æ¯”è¾ƒæˆç†Ÿçš„æœåŠ¡å™¨åº”ç”¨æ¡†æ¶äº†ï¼Œæ›´æ–°å¿«ï¼Œç¤¾åŒºâ€œç¹è£â€</p><p>æ‰€ä»¥ï¼Œç›´æ¥å¹²å§<br><a id="more"></a></p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ç›´æ¥è£…ä¸ªå·¥å…·é›†å§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew tap vapor/tap</span><br><span class="line">brew install vapor/tap/vapor</span><br></pre></td></tr></table></figure></p><h3 id="ç”Ÿæˆåº”ç”¨"><a href="#ç”Ÿæˆåº”ç”¨" class="headerlink" title="ç”Ÿæˆåº”ç”¨"></a>ç”Ÿæˆåº”ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vapor new Hello</span><br></pre></td></tr></table></figure><p>ç­‰å¾…ä¸€ä¼šï¼Œå‡ºç°æ°´æ»´å›¾æ¡ˆæ—¶å°±åˆå§‹åŒ–å®Œæˆäº†</p><p>æ¥ç€è¿›ç›®å½•ï¼Œç”Ÿæˆ<code>xcode</code>å¯ä»¥ä½¿ç”¨çš„å·¥ç¨‹æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./Hello</span><br><span class="line">vapor xcode</span><br></pre></td></tr></table></figure><p>ä¾ç„¶æ˜¯ç­‰å¾…ä¸€ä¼šä¹‹åï¼Œ<code>cmd</code>ä¼šè¯¢é—®ä½ æ˜¯å¦æ‰“å¼€<code>XCode</code>ï¼Œæ‰“å¼€ä¾¿æ˜¯</p><h3 id="ç¼–å†™ä½“éªŒ"><a href="#ç¼–å†™ä½“éªŒ" class="headerlink" title="ç¼–å†™ä½“éªŒ"></a>ç¼–å†™ä½“éªŒ</h3><p>vapor é»˜è®¤ä¼šç»™å‡ ç§æ–¹æ¡ˆï¼Œå¦‚æœç›´æ¥ new çš„è¯é»˜è®¤æ˜¯<code>api</code>æ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯â€œæ¥å£æœåŠ¡å™¨â€ã€‚</p><p>æ‰€ä»¥ä¸€æ‰“å¼€ï¼Œå°±èƒ½çœ‹åˆ°å·¥ç¨‹å·²ç»è¢«â€œå®‰æ’å¥½äº†â€ï¼šä¸€èˆ¬æ‰€éœ€è¦çš„ç›®å½•ç»“æ„ï¼Œä»¥åŠé»˜è®¤ä½¿ç”¨<code>SQLite3</code>æ•°æ®åº“ï¼ˆè¿è¡Œåœ¨å†…å­˜ï¼‰</p><p>æœ¬æ¥æˆ‘æ‰“ç®—é€šè¿‡<code>Todos</code>ç»ƒç»ƒæ‰‹ï¼Œç°åœ¨çœ‹èµ·æ¥å¥½åƒå‚è€ƒç­”æ¡ˆå·²ç»ç»™å‡ºæ¥äº†â€¦é»˜è®¤æƒ…å†µä¸‹ä¹Ÿä¸éœ€è¦æ€ä¹ˆå»è¡¥å……ï¼ŒæŒ‰ç…§è‡ªå·±çš„ç¼–ç¨‹ä¹ æƒ¯ç›´æ¥ç”¨å°±è¡Œäº†ã€‚</p><p>ä½†è¿™é‡Œç”¨å†…å­˜æ•°æ®åº“å±å®8åˆé€‚ï¼Œæ‰€ä»¥æ”¹ä¸€ä¸‹æ•°æ®åº“å­˜å‚¨æ–¹å¼<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DirectoryConfig.detect().workDir é¡¹ç›®ç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="keyword">let</span> storePath = <span class="type">DirectoryConfig</span>.detect().workDir + <span class="string">"Db/store.db"</span></span><br><span class="line"><span class="keyword">let</span> sqlite = <span class="keyword">try</span> <span class="type">SQLiteDatabase</span>(storage: .file(path: storePath))</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·ä¸€æ¥å°±æŠŠæ•°æ®åº“ä½ç½®ç§»åŠ¨åˆ°å·¥ç¨‹ä¸­<code>Db</code>ç›®å½•ä¸‹äº†ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œå°±ä¼šç›´æ¥åˆ›å»ºæ•°æ®åº“</p><p>å¯¹äº†ï¼ŒVapor è‡ªå·±å¸¦ä¸€ä¸ª ORM <code>Fluent</code>ï¼Œæ‰€ä»¥å…³ç³»å‹æ•°æ®åº“æ“ä½œä¸ä¼šå¤ªæ“è›‹</p><p>æ‰€ä»¥ä¸‹ä¸€ç¯‡åº”è¯¥æ˜¯è®¨è®ºä¸€ä¸ªæ›´åˆé€‚çš„<code>restful</code>å†™æ³•ï¼Ÿæˆ–è€…æ˜¯ç”¨ä¸Š<code>gRPC</code>ï¼Ÿ</p><h3 id="ç›¸å…³ä¿¡æ¯"><a href="#ç›¸å…³ä¿¡æ¯" class="headerlink" title="ç›¸å…³ä¿¡æ¯"></a>ç›¸å…³ä¿¡æ¯</h3><p>Vapor è‡ªå·±æä¾›ä¸€ä¸ª<a href="http://vapor.university/" target="_blank" rel="noopener">ã€Œå¤§å­¦ã€</a>ï¼Œè¿™é‡Œéƒ½æ˜¯ç»„ç»‡è‡ªå·±å½•çš„æ•™å­¦è§†é¢‘ï¼ŒåŸºæœ¬ç‚¹éƒ½æ¶µç›–åˆ°äº†</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vapor åº”è¯¥æ˜¯ç›®å‰æ¯”è¾ƒæˆç†Ÿçš„æœåŠ¡å™¨åº”ç”¨æ¡†æ¶äº†ï¼Œæ›´æ–°å¿«ï¼Œç¤¾åŒºâ€œç¹è£â€&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œç›´æ¥å¹²å§&lt;br&gt;
    
    </summary>
    
      <category term="å®è·µå°è¯•" scheme="https://colmugx.github.io/blog/categories/%E5%AE%9E%E8%B7%B5%E5%B0%9D%E8%AF%95/"/>
    
    
      <category term="swift" scheme="https://colmugx.github.io/blog/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>æ¥è‡ª swift çš„è·¨ç•Œæ‰§æ³•ï¼ˆé›¶ï¼‰ â€”â€” Perfect</title>
    <link href="https://colmugx.github.io/blog/2019/06/07/try-swift-perfect/"/>
    <id>https://colmugx.github.io/blog/2019/06/07/try-swift-perfect/</id>
    <published>2019-06-07T08:39:39.000Z</published>
    <updated>2019-07-27T10:45:38.963Z</updated>
    
    <content type="html"><![CDATA[<p>å› ä¸ºä¸å¯æŠ—åŠ›æ²¡ä¸Šç­ï¼Œçœ‹ç€æ–°<code>swift</code>å’Œ<code>swiftUI</code>å‘å¸ƒï¼Œå†³å®šæ<code>Perfect</code>ã€‚</p><p>è¿™ä¸ªæ¡†æ¶å¯æ˜¯å¬è¯´å¾ˆä¹…äº†ï¼ŒåŒ†å¿™çœ‹äº†ä¸¤çœ¼å°±æ²¡æœ‰ä¸‹æ–‡ã€‚å½“æ—¶æ¥è¯´æ˜¯æœ€å¼º Server-site æ¡†æ¶ï¼ˆä¸ºä»€ä¹ˆè¦è¯´å½“æ—¶ï¼Ÿï¼‰</p><p>ç¯‡å¹…ä¸é•¿ï¼Œä»…åšä¸€ä¸ªå°è¯•å’Œä»‹ç»ï¼ŒåŸå› åœ¨æœ€åã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å®‰è£…è¿˜æ˜¯ç›¸å½“å®¹æ˜“ï¼Œå®˜æ–¹ç¼–è¯‘å™¨èµ·ä¸€ä¸ªå¯æ‰§è¡Œç±»å‹é¡¹ç›®<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift package <span class="keyword">init</span> --type=executable</span><br></pre></td></tr></table></figure></p><a id="more"></a><p>å…¶æ¬¡ï¼Œåœ¨<code>Package.swift</code>ä¸­æ·»åŠ ä¾èµ–<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dependencies: [</span><br><span class="line">    .package(url: <span class="string">"https://github.com/PerfectlySoft/Perfect-HTTPServer.git"</span>, from: <span class="string">"3.0.0"</span>)</span><br><span class="line">],</span><br></pre></td></tr></table></figure></p><p>æ¥ç€ï¼Œç¼–è¯‘å³å®‰è£…ä¾èµ–ï¼ˆç†Ÿæ‚‰å•Šï¼ï¼‰<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift build</span><br></pre></td></tr></table></figure></p><p>æœ€åï¼Œç”Ÿæˆ<code>xcodeproj</code>æ–‡ä»¶ä»¥<code>xcode</code>æ‰“å¼€ï¼Œæ¥ä¸‹æ¥å·¥ä½œäº¤è¿˜ç»™<code>xcode</code><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swift package generate-xcodeproj</span><br></pre></td></tr></table></figure></p><p>ä¸å¾—ä¸è¯´ï¼Œä½ æœ<code>XCode</code>åˆ°ä»ç³»ç»Ÿ<code>10.10</code>å¼€å§‹é‚£ä¼šåˆ°å¦‚ä»Š 9102 å¹´äº†ï¼Œä½“éªŒè¿˜æ˜¯è¿™ä¹ˆç³Ÿç³•ã€‚ç„¶è€Œè‹¹æœå®¶çš„ä¸¤ä¸ªè¯­è¨€ï¼Œä¸ç”¨<code>XCode</code>ä½“éªŒæ›´ç³Ÿâ€¦</p><h3 id="ç¼–å†™ä½“éªŒ"><a href="#ç¼–å†™ä½“éªŒ" class="headerlink" title="ç¼–å†™ä½“éªŒ"></a>ç¼–å†™ä½“éªŒ</h3><p>åˆå§‹åŒ–é¡¹ç›®ä»€ä¹ˆç›®å½•éƒ½æ²¡æœ‰ï¼Œä½œä¸ºä¸€ä¸ªæ¯«æ— åç«¯ç»éªŒçš„ API æ‹¼è£…å¸ˆï¼Œåªèƒ½å‡æŠŠå¼åˆ›å»º<code>controllers</code>ä¸<code>models</code>ç›®å½•ï¼ŒåŠ ä¸Šä¹ æƒ¯åŠ ä¸€ä¸ª<code>constant</code>ç›®å½•ã€‚</p><p><del>åæ¥å‘ç°ï¼Œæˆ‘å¥½åƒç”¨ä¸ä¸Š</del></p><p>æŒ‰ç…§ä¹ æƒ¯åˆ›å»ºäº†ä¸€ä¸ªç»“æ„ä½“ç”¨æ¥å­˜æ”¾é…ç½®å†…å®¹<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">GlobalConfig</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> baseRoute = <span class="string">"/api/v1"</span></span><br><span class="line">    <span class="keyword">let</span> httpPort = <span class="number">8081</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¥ç€ï¼Œæ¸…ç©º<code>main.swift</code>ï¼Œæ ¹æ®<code>swift</code>çš„é€»è¾‘ï¼šåªæœ‰åº“éœ€è¦å¼•ç”¨ï¼Œä¸šåŠ¡æ–‡ä»¶åŒä¸€é¡¹ç›®ä¸‹ä¸éœ€è¦<code>import</code>ã€‚æ‰€ä»¥å¼•å…¥<code>perfect</code>ï¼Œå¹¶åˆå§‹åŒ–<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PerfectHTTP</span><br><span class="line"><span class="keyword">import</span> PerfectHTTPServer</span><br><span class="line"><span class="comment">// å­—å…¸ä¸æ˜¯JSONï¼Œä½¿ç”¨åº“ä¸­æ–¹æ³•å¾—ä»¥æŠŠå­—å…¸è½¬ä¸ºJSON</span></span><br><span class="line"><span class="keyword">import</span> PerfectLib</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> config = <span class="type">GlobalConfig</span>()</span><br><span class="line"><span class="keyword">let</span> server = <span class="type">HTTPServer</span>()</span><br><span class="line"><span class="keyword">var</span> routes = <span class="type">Routes</span>(baseUri: config.baseRoute)</span><br></pre></td></tr></table></figure></p><p>ç„¶ååˆ¶å®šä¸€ä¸ª<code>restful</code>ç±»å‹è·¯ç”±ï¼ˆåŸæœ¬å†™åœ¨<code>Router.swift</code>ï¼‰<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list: [[<span class="type">String</span>: <span class="type">Any</span>]] = [</span><br><span class="line">    [<span class="string">"name"</span>: <span class="string">"index"</span>, <span class="string">"url"</span>: <span class="string">"/home"</span>, <span class="string">"method"</span>: <span class="type">HTTPMethod</span>.<span class="keyword">get</span>],</span><br><span class="line">    [<span class="string">"name"</span>: <span class="string">"show"</span>, <span class="string">"url"</span>: <span class="string">"/home/&#123;id&#125;"</span>, <span class="string">"method"</span>: <span class="type">HTTPMethod</span>.<span class="keyword">get</span>],</span><br><span class="line">    [<span class="string">"name"</span>: <span class="string">"create"</span>, <span class="string">"url"</span>: <span class="string">"/home"</span>, <span class="string">"method"</span>: <span class="type">HTTPMethod</span>.post],</span><br><span class="line">    [<span class="string">"name"</span>: <span class="string">"update"</span>, <span class="string">"url"</span>: <span class="string">"/home/&#123;id&#125;"</span>, <span class="string">"method"</span>: <span class="type">HTTPMethod</span>.put],</span><br><span class="line">    [<span class="string">"name"</span>: <span class="string">"delete"</span>, <span class="string">"url"</span>: <span class="string">"/home/&#123;id&#125;"</span>, <span class="string">"method"</span>: <span class="type">HTTPMethod</span>.delete]</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>æ¥ç€ï¼Œé€šè¿‡<code>swift</code>çš„<code>map</code>ï¼ˆä¸æ˜¯å¾ˆåˆé€‚ï¼‰éšä¾¿è½½å…¥ä¸€å¥—è·¯ç”±ï¼ˆæœ‰æ—¶å€™çœŸçš„æ¨<code>swift</code>çš„ç±»å‹å®‰å…¨ï¼‰<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RoutesConfig</span>().list.<span class="built_in">map</span> &#123;</span><br><span class="line">    routes.add(method: $<span class="number">0</span>[<span class="string">"method"</span>] <span class="keyword">as</span>! <span class="type">HTTPMethod</span>, uri: $<span class="number">0</span>[<span class="string">"url"</span>] <span class="keyword">as</span>! <span class="type">String</span>, handler: &#123; (request, response) <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> json: [<span class="type">String</span>: <span class="type">Any</span>] = [<span class="string">"code"</span>: <span class="number">0</span>, <span class="string">"message"</span>: <span class="string">"success"</span>]</span><br><span class="line">        <span class="keyword">let</span> variables = request.urlVariables</span><br><span class="line">        <span class="keyword">var</span> newJson = json</span><br><span class="line">        <span class="keyword">if</span> (!variables.isEmpty) &#123;</span><br><span class="line">            <span class="keyword">for</span> e <span class="keyword">in</span> variables &#123;</span><br><span class="line">                newJson[e.key] = variables[e.key]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> output = <span class="keyword">try</span>! newJson   <span class="comment">// å› éƒ½æ˜¯å­—é¢é‡ï¼Œæ‰€ä»¥å¿…æœ‰å€¼ï¼ˆçœŸnmå®‰å…¨ï¼Œä¸šåŠ¡å°½é‡ä¸è¦è¿™ä¹ˆæï¼‰</span></span><br><span class="line">            .jsonEncodedString()</span><br><span class="line">        response</span><br><span class="line">            .setHeader(.contentType, value: <span class="string">"application/json"</span>)</span><br><span class="line">            .appendBody(string: output)</span><br><span class="line">            .completed()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è·¯ç”±è½½å…¥æœåŠ¡å¹¶æŒ‡å®šç«¯å£ï¼ˆç›´æ¥æ‰§è¡Œä¼šé»˜è®¤<code>0.0.0.0:8081</code>ï¼‰<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server.addRoutes(routes)</span><br><span class="line">server.serverPort = <span class="type">UInt16</span>(config.httpPort)</span><br></pre></td></tr></table></figure></p><p>æœ€åï¼ˆç®€å•ï¼‰æ‰§è¡Œ<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> server.start()</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">fatalError</span>(<span class="string">"\(error)"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><ul><li>æ–‡æ¡£è™½æ˜¯è¯¦ç»†ï¼Œä½†æ˜¯å‘¨è¾¹å¾ˆå°‘ï¼Œç¤¾åŒºå†·æ·¡ï¼ˆéƒ½ä¸çŸ¥é“æœ‰æ²¡æœ‰ï¼‰ã€‚è€Œä¸”èµ„æ–™å¾ˆå°‘ï¼Œå¾ˆéš¾æŸ¥åˆ°å…³äºè¿™ä¸ªæ¡†æ¶çš„è®¨è®ºæˆ–è€…å†…å®¹ã€‚</li><li>Star è™½ç„¶è¯æ˜ä¸äº†ä»€ä¹ˆï¼Œä½†æ˜¯ä»æ˜”æ—¥ç¬¬ä¸€ï¼Œåˆ°ç°åœ¨ç¬¬äºŒï¼Œè·ç¦»ç¬¬ä¸€ä¹Ÿæœ‰å¾ˆå¤§å·®è·ã€‚åˆè¯­è¨€å…³ç³»ï¼Œå¹¶ä¸ä¼šæœ‰åƒæŸäº›åº“é‚£æ ·çš„å®—æ•™åŒ–ã€‚æ•…å¿…æœ‰æŸäº›åŸå› ã€‚</li></ul><p>æ‰€ä»¥ï¼Œä½ å¥½<code>Vapor</code>ï¼è¿™å¯èƒ½æ˜¯ç›®å‰<code>swift server side</code>æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚å¹¶ä¸”è¿™ä¹Ÿæ˜¯æ ‡é¢˜ä»â€œé›¶â€å¼€å§‹çš„åŸå› ã€‚</p><p>å¹¶ä¸”åœ¨æ–‡ç« æäº¤ä¹‹å‰ï¼Œå‘ç°<code>Vapor</code>å·²ç»æ”¯æŒ<code>Swift 5.1</code>ï¼Œæœ¬ä½“ä¹Ÿæ›´æ–°é¢‘ç¹ï¼Œå¤§æ¦‚çŸ¥é“ä¸ºä»€ä¹ˆ<code>Perfect</code>ä¸ºä»€ä¹ˆä¼šæ²¡è½äº†ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘è§‰å¾—å¯ä»¥å…ˆå°è¯•<code>Vapor</code>ï¼Œå†çœ‹çœ‹å“ªä¸ªä½¿ç”¨æ‰‹æ„Ÿæ›´é€‚åˆæˆ‘ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å› ä¸ºä¸å¯æŠ—åŠ›æ²¡ä¸Šç­ï¼Œçœ‹ç€æ–°&lt;code&gt;swift&lt;/code&gt;å’Œ&lt;code&gt;swiftUI&lt;/code&gt;å‘å¸ƒï¼Œå†³å®šæ&lt;code&gt;Perfect&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ¡†æ¶å¯æ˜¯å¬è¯´å¾ˆä¹…äº†ï¼ŒåŒ†å¿™çœ‹äº†ä¸¤çœ¼å°±æ²¡æœ‰ä¸‹æ–‡ã€‚å½“æ—¶æ¥è¯´æ˜¯æœ€å¼º Server-site æ¡†æ¶ï¼ˆä¸ºä»€ä¹ˆè¦è¯´å½“æ—¶ï¼Ÿï¼‰&lt;/p&gt;
&lt;p&gt;ç¯‡å¹…ä¸é•¿ï¼Œä»…åšä¸€ä¸ªå°è¯•å’Œä»‹ç»ï¼ŒåŸå› åœ¨æœ€åã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h3&gt;&lt;p&gt;å®‰è£…è¿˜æ˜¯ç›¸å½“å®¹æ˜“ï¼Œå®˜æ–¹ç¼–è¯‘å™¨èµ·ä¸€ä¸ªå¯æ‰§è¡Œç±»å‹é¡¹ç›®&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;swift package &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt; --type=executable&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="å®è·µå°è¯•" scheme="https://colmugx.github.io/blog/categories/%E5%AE%9E%E8%B7%B5%E5%B0%9D%E8%AF%95/"/>
    
    
      <category term="swift" scheme="https://colmugx.github.io/blog/tags/swift/"/>
    
  </entry>
  
  <entry>
    <title>reactå‡½æ•°çº§å†™æ³•å’Œç»§æ‰¿å†™æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</title>
    <link href="https://colmugx.github.io/blog/2019/05/28/react-component-method/"/>
    <id>https://colmugx.github.io/blog/2019/05/28/react-component-method/</id>
    <published>2019-05-28T15:48:21.000Z</published>
    <updated>2019-05-29T16:16:15.036Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é—®é¢˜çœŸçš„æ˜¯åœŸåˆ°æˆ‘äº†ï¼Œç«‹åˆ»å°±å‘äº†ä¸€ä¸ªçŸ¥ä¹æƒ³æ³•ã€‚ä½†åæ¥æˆ‘å‘ç°ï¼Œä»–ä¼šä¸ä¼šæƒ³é—®çš„æ˜¯å‡ ç™¾å¹´å‰ï¼Œåœ¨ç›˜å¤å¼€å¤©è¾Ÿåœ°ä¹‹åçš„<code>react 0.x</code>æ—¶ä»£ï¼Œäºæ˜¯æˆ‘é»˜é»˜æŠŠæƒ³æ³•å¹²æ‰äº†ã€‚</p><p>å¦‚æœæ˜¯<code>createClass</code>å’Œ<code>extends React.Component</code>ï¼Œè¿˜æœ‰ç‚¹æ„æ€ã€‚å¦‚æœæ˜¯<code>functional component</code>ï¼Œé‚£æ‚¨æ€ä¹ˆä¸ç”¨åŒæ ·å¾ˆã€Œæ¸è¿›å¼ã€åŒæ—¶åˆæ›´ç‰›é€¼çš„<code>vue</code>å‘¢ï¼Ÿ</p><p>ç®€å•å¯¹æ¯”ï¼š</p><table><thead><tr><th style="text-align:center">createClass</th><th style="text-align:center">Component/PureComponent</th></tr></thead><tbody><tr><td style="text-align:center">ES5</td><td style="text-align:center">ES6</td></tr><tr><td style="text-align:center">propTypes/getDefaultProp</td><td style="text-align:center">Component.defaultProps/Component.propType</td></tr><tr><td style="text-align:center">this å·²è¢«æŒ‡å®š</td><td style="text-align:center">å±æ€§ this ä¸é»˜è®¤æŒ‡å‘ç»„ä»¶ï¼ˆå®ä¾‹ï¼‰</td></tr><tr><td style="text-align:center">mixin</td><td style="text-align:center">mixinï¼ˆè¢«å–æ¶ˆï¼Œä¸å»ºè®®ï¼Œåšä¸åˆ°ï¼ŒHOCï¼‰</td></tr></tbody></table><p>å…¶ä¸­å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªçš„åŒºåˆ«å¯èƒ½<code>mixin</code>æœ€æœ‰æ„æ€<br><a id="more"></a></p><h3 id="ç¼–å†™é£æ ¼"><a href="#ç¼–å†™é£æ ¼" class="headerlink" title="ç¼–å†™é£æ ¼"></a>ç¼–å†™é£æ ¼</h3><p><code>createClass</code> ç”¨çš„æ˜¯ç»™å‡½æ•°ä¼ é€’ä¸€ä¸ªå¯¹è±¡çš„æ–¹å¼åˆ›å»ºç»„ä»¶ï¼Œé£æ ¼å¾ˆåƒ<code>vue</code>ï¼Œ<code>Component</code>ç”¨çš„æ˜¯å¯¹è±¡ç»§æ‰¿çš„æ–¹å¼åˆ›å»ºç»„ä»¶ã€‚å¥½åƒæ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚</p><h3 id="default-props"><a href="#default-props" class="headerlink" title="default props"></a>default props</h3><p><code>createClass</code>ä¾ç„¶è·Ÿç°åœ¨çš„<code>vue</code>å†™æ³•å¾ˆåƒï¼Œä¸è¿‡ä»<code>vue</code>ä¸­<code>props[xxx].default</code>å˜æˆ<code>getDefaultProp</code>æ–¹æ³•ï¼ŒåŒæ—¶å¯¹è±¡å†…é€šè¿‡<code>propTypes</code>åšæ¥å£ç±»å‹æ£€æŸ¥ã€‚</p><p><code>classes</code>å‹çš„é»˜è®¤æ¥å£å’Œæ¥å£æ£€æŸ¥éƒ½æ˜¯æ¥æºäºå¯¹è±¡ä¸¤ä¸ªé™æ€å¯¹è±¡ã€‚</p><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p><code>createClass</code>åŒæ ·ä¸<code>vue</code>å·®ä¸å¤šï¼Œ<code>this</code>ä¼šæŒ‡å‘åˆ°ç»„ä»¶ä¸Šï¼Œåº”è¯¥è¿˜æ˜¯å¤„äºåŒä¸€å¯¹è±¡ä¸­çš„åŸå› ã€‚<code>classes</code>ç±»å‹çš„å¯æ²¡é‚£ä¹ˆé¡ºåˆ©ï¼Œ<code>this</code>ä¼šæŒ‡å‘åˆ°ç±»ä¸Šï¼Œæ‰€ä»¥å†™<code>react</code>çš„æ—¶å€™ï¼Œæ–¹æ³•éš¾å…è¿˜è¦åœ¨æ„é€ å‡½æ•°ä¸­<code>bind</code>ä¸€æ¬¡ï¼Œå½“ç„¶å¦‚æœæ–¹æ³•æ˜¯ç®­å¤´å‡½æ•°çš„è¯éº»çƒ¦å°‘å¾ˆå¤šã€‚</p><h3 id="mixin"><a href="#mixin" class="headerlink" title="mixin"></a>mixin</h3><p><code>createClass</code>ä¾ç„¶ä¸<code>vue</code>çš„å·®ä¸å¤šï¼ˆ<code>vue</code>æŠ„å¾—å¦™å•Šï¼‰ï¼Œé—æ†¾<code>classes</code>ä¸æ”¯æŒ<code>mixin</code>äº†ã€‚</p><p>æˆ‘ä¹Ÿä¸å–œæ¬¢<code>mixin</code>ï¼Œä¹Ÿè§‰å¾—è¿™ä¸œè¥¿ä¸é€‚åˆ<code>react</code>çš„ç†å¿µã€‚<code>mixin</code>æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡çš„å†…å®¹ä¸å¦ä¸€ä¸ªå¯¹è±¡çš„å†…å®¹åˆå¹¶ï¼Œçœ‹èµ·æ¥å¤ç”¨æ€§åˆ©ç”¨ç‡å¾ˆé«˜ï¼ˆåˆ«bbæŠ½å°±å®Œäº‹å„¿äº†å—·ï¼‰ï¼Œä½†ï¼ŒåŒåå‡½æ•°æ€ä¹ˆåŠï¼Ÿæ”¹åŠ¨æ€ä¹ˆåŠï¼Ÿä¸œè¥¿ä¸€å¤šå°±æ²‰æµ¸åœ¨ä¸æ–­é‡å†™<del>ä¸å¤è¯»</del>ï¼Œé€ æˆå‰¯ä½œç”¨ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«çš„æƒ…å†µã€‚</p><p>é«˜é˜¶å‡½æ•°å¤šå¥½ï¼Œç¼–å†™ä¸€ä¸ªå¯å¤ç”¨å‡½æ•°ï¼ŒæŠŠè®¡åˆ’ä½¿ç”¨å¤ç”¨å†…å®¹çš„å‡½æ•°æˆ–å¯¹è±¡ä»¥å‚æ•°å½¢å¼ä¼ å…¥ï¼Œåœ¨ä½¿ç”¨ç»„ä»¶æˆ–è€…å‡½æ•°çš„åŒæ—¶åˆæŠŠå¤ç”¨å†…å®¹æ‰§è¡Œå®Œã€‚é¦–å…ˆ<code>HOC</code>å¯ä»¥æƒ³è±¡æˆæ˜¯ã€Œæ‚ ç±³ã€â€”â€”å®ƒæŒ‚åœ¨ä½ èº«ä¸Šï¼ŒåŠ ç›¾ï¼ŒåŠ é€Ÿï¼ŒåŠ è¡€ï¼ŒåŠ è‡ªé€‚åº”ã€‚å®ƒæŒ‚åœ¨è°èº«ä¸Šéƒ½ä¸€æ ·ï¼Œä¸å—å¹²æ‰°ã€‚</p><blockquote><p>åªè¦æˆ‘çš„é˜Ÿå‹è¿˜æ´»ç€ï¼Œæˆ‘å°±ä¸ä¼šé­å—è‹¦éš¾ â€”â€” æ‚ ç±³</p></blockquote><p>è€Œæ¯æ¬¡ç»è¿‡é«˜é˜¶å‡½æ•°ä¹‹ååˆæ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œæ¯ä¸ªæ–°å‡½æ•°ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸å­˜åœ¨å‰¯ä½œç”¨ã€‚</p><p>ä½†<code>HOC</code>å†™èµ·æ¥è¿˜æ˜¯æœ‰ä¸¤ç§ï¼Œä»¥<code>react</code>è¿”å›<code>Component</code>æ¥è¯´ï¼Œè¿”å›çš„å¯¹è±¡åˆä¼šæœ‰ä¸¤ç§ã€‚</p><ul><li>è¿”å›çš„<code>Component</code>ç»§æ‰¿äºå…¨æ–°çš„<code>React.Component</code>(react-redux:connect)</li><li>è¿”å›çš„<code>Component</code>ç»§æ‰¿äºå‚æ•°çš„<code>Component</code>(åå‘ç»§æ‰¿)(reabit:inject)</li></ul><p>ç¬¬ä¸€ç§æœ€åçš„ç»“æœæ˜¯<code>render</code>æ—¶ä»¥ç»„ä»¶çš„å½¢å¼è°ƒç”¨å‚æ•°ï¼Œç¬¬äºŒç§åˆ™æ˜¯é€šè¿‡<code>super</code>åœ¨å„ç§åœ°æ–¹æ‰§è¡Œï¼ˆæ•´ä¸ªæ–¹æ³•æ‰§è¡Œç›´æ¥åœ¨æ„é€ å‡½æ•°æ‰§è¡Œ<code>super([ä¼ å…¥é€‚ç”¨åŸç»„ä»¶props])</code>ï¼‰ï¼Œå„æœ‰åˆ©å¼Šã€‚</p><p>è€Œå› ä¸ºåå‘ç»§æ‰¿çš„å…³ç³»ï¼Œæˆ‘å¯ä»¥è·å¾—ç»„ä»¶å¾ˆå¤šå†…å®¹ï¼Œæ‰€ä»¥æŸç§æ„ä¹‰ä¸Šå¯ä»¥å½“åš<code>mixin</code>ä½¿ç”¨ã€‚</p><p>ä¸è¿‡æ¯•ç«Ÿ<code>HOC</code>ï¼Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼šåŸç»„ä»¶å¦‚æœå­˜åœ¨<code>static</code>æ–¹æ³•å°†ä¸èƒ½è¢«ä½¿ç”¨ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™é—®é¢˜çœŸçš„æ˜¯åœŸåˆ°æˆ‘äº†ï¼Œç«‹åˆ»å°±å‘äº†ä¸€ä¸ªçŸ¥ä¹æƒ³æ³•ã€‚ä½†åæ¥æˆ‘å‘ç°ï¼Œä»–ä¼šä¸ä¼šæƒ³é—®çš„æ˜¯å‡ ç™¾å¹´å‰ï¼Œåœ¨ç›˜å¤å¼€å¤©è¾Ÿåœ°ä¹‹åçš„&lt;code&gt;react 0.x&lt;/code&gt;æ—¶ä»£ï¼Œäºæ˜¯æˆ‘é»˜é»˜æŠŠæƒ³æ³•å¹²æ‰äº†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯&lt;code&gt;createClass&lt;/code&gt;å’Œ&lt;code&gt;extends React.Component&lt;/code&gt;ï¼Œè¿˜æœ‰ç‚¹æ„æ€ã€‚å¦‚æœæ˜¯&lt;code&gt;functional component&lt;/code&gt;ï¼Œé‚£æ‚¨æ€ä¹ˆä¸ç”¨åŒæ ·å¾ˆã€Œæ¸è¿›å¼ã€åŒæ—¶åˆæ›´ç‰›é€¼çš„&lt;code&gt;vue&lt;/code&gt;å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç®€å•å¯¹æ¯”ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;createClass&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;Component/PureComponent&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ES5&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ES6&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;propTypes/getDefaultProp&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;Component.defaultProps/Component.propType&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;this å·²è¢«æŒ‡å®š&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å±æ€§ this ä¸é»˜è®¤æŒ‡å‘ç»„ä»¶ï¼ˆå®ä¾‹ï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;mixin&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;mixinï¼ˆè¢«å–æ¶ˆï¼Œä¸å»ºè®®ï¼Œåšä¸åˆ°ï¼ŒHOCï¼‰&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;å…¶ä¸­å¯¹æˆ‘æ¥è¯´ï¼Œè¿™ä¸¤ä¸ªçš„åŒºåˆ«å¯èƒ½&lt;code&gt;mixin&lt;/code&gt;æœ€æœ‰æ„æ€&lt;br&gt;
    
    </summary>
    
      <category term="ç¼–ç¨‹è®®è®º" scheme="https://colmugx.github.io/blog/categories/%E7%BC%96%E7%A8%8B%E8%AE%AE%E8%AE%BA/"/>
    
    
      <category term="JavaScript" scheme="https://colmugx.github.io/blog/tags/JavaScript/"/>
    
      <category term="react" scheme="https://colmugx.github.io/blog/tags/react/"/>
    
  </entry>
  
  <entry>
    <title>defineProperty? Proxy?</title>
    <link href="https://colmugx.github.io/blog/2019/04/20/why-vue-proxy/"/>
    <id>https://colmugx.github.io/blog/2019/04/20/why-vue-proxy/</id>
    <published>2019-04-20T04:47:12.000Z</published>
    <updated>2019-04-26T05:28:08.142Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¬è¯´ Vue3 æ•°æ®ç»‘å®šè¦åˆ‡æ¢åˆ° Proxyï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p></blockquote><p>è¿™å°±æ˜¯è¿™ç¯‡æ–‡ç« çš„åŸå› ï¼Œæ¥æºäºæŸä¸ªç‰›é€¼å…¬å¸çš„é¢è¯•ã€‚<del>æˆ‘çœŸçš„åº”è¯¥å­¦ä¼šæ€ä¹ˆæ¸…æ¥šè¡¨è¾¾è§‚ç‚¹â€¦</del></p><p><code>defineProperty</code> å’Œ <code>Proxy</code> ä½¿ç”¨æ–¹å¼å’Œæ•ˆæœçœ‹èµ·æ¥æ˜¯å·®ä¸å¤šçš„ï¼Œä½†å¦‚æœç¿»è¯‘æˆä¸­æ–‡çš„è¯ï¼Œä¸€ä¸ªæ˜¯å®šä¹‰å±æ€§ï¼Œä¸€ä¸ªæ˜¯ä»£ç†ï¼Œå¹¶ä¸” MDN ä¸Šæè¿°æœ‰æ‰€ä¸åŒã€‚</p><blockquote><p>Object.defineProperty() æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚ â€”â€” MDN</p></blockquote><blockquote><p>Proxy å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ï¼Œèµ‹å€¼ï¼Œæšä¸¾ï¼Œå‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚  â€”â€” MDN</p></blockquote><h3 id="defineProperty"><a href="#defineProperty" class="headerlink" title="defineProperty"></a>defineProperty</h3><p>è¿™æ˜¯ä¸€ä¸ª <code>ES5</code> çš„æ–¹æ³•ã€‚ä¸€ä¸ª <code>defineProperty</code> éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ <code>require</code><br><a id="more"></a></p><blockquote><p>Object.defineProperty(obj, prop, descriptor)<br>obj: object, å®šä¹‰çš„å¯¹è±¡ï¼ˆæˆ‘ç†è§£ä¸ºé™„ç€äºå“ªä¸ªå¯¹è±¡ï¼‰<br>prop: å®šä¹‰çš„å¯¹è±¡åç§°(key)<br>descriptor: å°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'name'</span>, &#123;</span><br><span class="line">  value: <span class="string">'colmugx'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>descriptor</code> å­˜åœ¨å¯é€‰é¡¹ï¼š</p><table><thead><tr><th style="text-align:left">key</th><th style="text-align:left">value</th></tr></thead><tbody><tr><td style="text-align:left">configurable</td><td style="text-align:left">è¯¥å±æ€§ä¸º true æ—¶ï¼Œè¯¥å±æ€§æè¿°ç¬¦æ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼ŒåŒæ—¶è¯¥å±æ€§ä¹Ÿèƒ½ä»å¯¹åº”çš„å¯¹è±¡ä¸Šè¢«åˆ é™¤ã€‚é»˜è®¤ä¸º falseã€‚</td></tr><tr><td style="text-align:left">enumerable</td><td style="text-align:left">è¯¥å±æ€§ä¸º true æ—¶ï¼Œè¯¥å±æ€§æ‰èƒ½å¤Ÿå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ã€‚é»˜è®¤ä¸º falseã€‚</td></tr><tr><td style="text-align:left">value</td><td style="text-align:left">è¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚</td></tr><tr><td style="text-align:left">writable</td><td style="text-align:left">è¯¥å±æ€§ä¸º true æ—¶ï¼Œvalueæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚é»˜è®¤ä¸º falseã€‚</td></tr><tr><td style="text-align:left">get</td><td style="text-align:left">getter æ–¹æ³•</td></tr><tr><td style="text-align:left">set</td><td style="text-align:left">setter æ–¹æ³•</td></tr></tbody></table><p>é™¤äº† <code>boolean</code> ç±»å‹ï¼Œå€¼éƒ½é»˜è®¤ä¸º <code>undefined</code></p><h3 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h3><p>è¿™æ˜¯ä¸€ä¸ª <code>ES6</code> çš„æ–¹æ³•ï¼Œ<code>Proxy</code> å‚æ•°æ¯”è¾ƒç®€å•</p><blockquote><p>new Proxy(target, handler)<br>target: ç›®æ ‡å¯¹è±¡<br>handler: å±æ€§/æ“ä½œå¯¹è±¡ï¼Œå½“æ‰§è¡Œä¸€ä¸ªæ“ä½œæ—¶å®šä¹‰ä»£ç†çš„è¡Œä¸ºçš„å‡½æ•°</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">  <span class="keyword">get</span>(target, name) &#123;</span><br><span class="line">    <span class="keyword">return</span> name <span class="keyword">in</span> target ? target[name] : target</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ï¼Ÿ"><a href="#ï¼Ÿ" class="headerlink" title="ï¼Ÿ"></a>ï¼Ÿ</h3><h4 id="æ•°æ®æ‹¦æˆª"><a href="#æ•°æ®æ‹¦æˆª" class="headerlink" title="æ•°æ®æ‹¦æˆª"></a>æ•°æ®æ‹¦æˆª</h4><p>å…ˆçœ‹çœ‹ <code>Vue</code> é‚£ç§æ•°æ®æ‹¦æˆªæ˜¯æ€æ ·çš„ï¼Œåšä¸€ä¸ªç®€å•å®ç°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line"><span class="keyword">let</span> value = <span class="literal">undefined</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'key'</span>, &#123;</span><br><span class="line">  <span class="keyword">get</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span>(val) &#123;</span><br><span class="line">    value = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>å¾ˆæ˜æ˜¾ï¼Œæˆ‘å¯ä»¥åŠ«æŒä¸€ä¸ªå¯¹è±¡çš„ <code>getter</code> å’Œ <code>setter</code>ï¼ŒåŒæ—¶ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œè²Œä¼¼éœ€è¦ä¸€ä¸ªç¼“å­˜é‡ã€‚</p><p>å¦‚æœè¯´å’Œ <code>Proxy</code> æ¯”è¾ƒå‘¢ï¼Ÿå› ä¸º <code>Proxy</code> å®ç°çš„æ˜¯ä»£ç†ä¸‹æ•´ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;<span class="attr">key</span>: <span class="literal">undefined</span>&#125;, &#123;</span><br><span class="line">  <span class="keyword">get</span>(target, prop) &#123;</span><br><span class="line">    <span class="comment">// ç”±äºä»£ç†äº†æ‰€æœ‰æ“ä½œï¼Œé‚£ä¹ˆè¿”å› 404 çº¯å±æ„æ„¿</span></span><br><span class="line">    <span class="keyword">return</span> prop <span class="keyword">in</span> target ? target[prop] : <span class="string">'404 Not Found'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span>(val) &#123;</span><br><span class="line">    target[prop] = val</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å†™æ³•æœ‰ç‚¹åƒ<code>computed</code></p><p>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ<code>defineProperty</code>ä¸ç›´æ¥<code>target[prop] = val</code>ï¼Ÿå› ä¸ºåŠ«æŒå…³ç³»ï¼Œä½ ä¼šçœ‹åˆ°ç‹—å’¬å°¾å·´çš„å¥‡è§‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>defineProperty</code> å¯¹åŸå¯¹è±¡æ“ä½œå°±ä¼šè§¦å‘åŠ«æŒï¼Œè€Œ<code>Proxy</code>æ“ä½œçš„æ˜¯å®ä¾‹å¯¹è±¡ï¼Œæ¯ä¸ªå®ä¾‹å¯¹è±¡ç›¸å¯¹ç‹¬ç«‹ã€‚</p><p>æ‰€ä»¥é€šè¿‡ä¸¤æ¬¡é¢è¯•ï¼Œé—­ç¯äº†è¿™ä¸ªçŸ¥è¯†ã€‚å¦å¤–ä¸€ç¯‡ï¼š<a href="/blog/2018/03/16/vue-watcher">vue watchå­˜åœ¨æ°¸åŠ¨å—ï¼Ÿ</a></p><p>ç„¶è€Œ<code>Vue</code>æ¢æ–¹å¼ï¼Œæ˜¾ç„¶ä¸æ­¢å› ä¸ºè¿™ä¸ªï¼Œæˆ–è®¸è¿è¿™ä¸ªéƒ½è°ˆä¸ä¸Šã€‚</p><h4 id="åªéœ€è¦-definePropertyï¼Ÿæ€ä¹ˆå¯èƒ½ï¼Ÿ"><a href="#åªéœ€è¦-definePropertyï¼Ÿæ€ä¹ˆå¯èƒ½ï¼Ÿ" class="headerlink" title="åªéœ€è¦ definePropertyï¼Ÿæ€ä¹ˆå¯èƒ½ï¼Ÿ"></a>åªéœ€è¦ definePropertyï¼Ÿæ€ä¹ˆå¯èƒ½ï¼Ÿ</h4><p>é¦–å…ˆï¼Œä¸Šé¢ä¾‹å­è¿™ç§æ–¹å¼å¯ä»¥çœ‹å‡ºï¼Œæˆ‘æ¯æ¬¡æ“ä½œéƒ½åªèƒ½ç›‘å¬ä¸€ä¸ªå€¼ï¼Œä½†ä¸€ä¸ªåº”ç”¨ä¸å¯èƒ½åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œè€Œä¸”æ²¡åŠæ³•åŠæ—¶çŸ¥é“å“ªä¸€ä¸ªå±æ€§è·å¾—äº†æ›´æ–°ã€‚åœ¨æ·±å…¥äº†è§£ä¹‹åï¼Œ<code>Vue</code>å¥½åƒç”¨äº†è®¢é˜…çš„æ–¹å¼åœ¨åšè¿™äº›äº‹æƒ…ã€‚</p><p><a href="https://github.com/vuejs/vue/blob/52719ccab8/src/core/observer/index.js#L109" target="_blank" rel="noopener">vue/src/core/observer/index.js#L109</a></p><p>é™¤äº†ç®€å•ï¼ˆæ²¡æœ‰æ·±åº¦ï¼‰æ•°æ®ï¼Œå…¶ä»–ä¸€æ¦‚éå†è¿›è§‚å¯Ÿè€…ã€‚</p><h4 id="ä¸ºä»€ä¹ˆ-Proxyï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-Proxyï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ Proxyï¼Ÿ"></a>ä¸ºä»€ä¹ˆ Proxyï¼Ÿ</h4><ol><li><code>defineProperty</code> å¯¹æ•°ç»„æœ‰ç¡¬ä¼¤</li></ol><p>å› ä¸ºè®¾å®šå…³ç³»ï¼Œ<code>defineProperty</code>ä¸èƒ½è§‚å¯Ÿåˆ°æ•°ç»„å†…éƒ¨ï¼Œå¦‚æœç›´æ¥ä¿®æ”¹æ•°ç»„è€Œä¸æ˜¯è¿”å›æ–°æ•°ç»„çš„è¯ï¼Œæ— æ³•è§¦å‘åŠ«æŒã€‚<code>Vue</code>æ–‡æ¡£ä»¥ä¸€ä¸ªç®€å•çš„æ–¹å¼è§£é‡Šäº†<a href="https://cn.vuejs.org/v2/guide/list.html#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B" target="_blank" rel="noopener">è¿™ä¸ªé—®é¢˜</a>ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æœ‰ç‚¹éªšï¼Œ<a href="https://github.com/vuejs/vue/blob/52719ccab8fccffbdf497b96d3731dc86f04c1ce/src/core/observer/array.js#L11" target="_blank" rel="noopener">ç›¸å…³æºç ä½ç½®</a>ã€‚ä½†è¿™åªæ˜¯è®©æ•°ç»„æ–¹æ³•å¯ä»¥â€œæ­£å¸¸ä½¿ç”¨â€ï¼Œä¸‡ä¸€æœ‰äºº<code>arr[0] = 0</code>å‘¢ï¼Ÿ</p><ol start="2"><li>ä¸€ä¸ªæ–¹æ³•åªèƒ½ç›‘å¬ä¸€ä¸ªå±æ€§</li></ol><p>å¦‚æœæˆ‘éœ€è¦ç›‘å¬è¿™ä¸ªå¯¹è±¡é‡Œæ‰€æœ‰é”®ï¼Œæˆ‘éœ€è¦æŠŠæ‰€æœ‰é”®éƒ½<code>defineProperty</code>ä¸€æ¬¡ã€‚éœ€è¦åˆ›å»ºä¸€ä¸ªç¼“å­˜å˜é‡å€’ä¸æ˜¯ä»€ä¹ˆâ€œéš¾äº‹â€ï¼Œå°è£…æˆä¸€ä¸ªæ–¹æ³•å°±æˆäº†ï¼Œä½†ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: &#123; <span class="attr">c</span>: &#123; <span class="attr">d</span>: &#123; <span class="attr">e</span>: <span class="string">'???'</span> &#125;&#125;&#125;&#125;&#125;  <span class="comment">// ???</span></span><br></pre></td></tr></table></figure><ol start="3"><li><code>Proxy</code> å¯ä»¥åšåˆ°ä¸Šé¢æ‰€æœ‰äº‹æƒ…</li></ol><p>ä¸Šé¢æåˆ°ï¼Œ<code>Proxy</code>æ˜¯ä»£ç†äº†æ•´ä¸ªå¯¹è±¡ï¼Œè€Œä¸”æ˜¯ä»¥æ ¹æ® target åˆ›å»ºå®ä¾‹æ¥è¿›è¡Œæ¥ä¸‹æ¥çš„å·¥ä½œï¼Œæ¯ä¸€ä¸ªéƒ½ç›¸å¯¹ç‹¬ç«‹ã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰è¿™ä¸ªâ€œå¯¹è±¡â€çš„æ‰€æœ‰æ“ä½œæƒï¼Œè€Œä¸”æ¯æ¬¡<code>set</code>éƒ½èƒ½è¿”å›æ–°çš„â€œå¯¹è±¡â€ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰â€œæ•°æ®å¦‚ä½•æ”¹å˜â€</p><p>ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå› ä¸º<code>Proxy</code>å®ç°çš„æ˜¯è§‚å¯Ÿåˆ°æ•´ä¸ªå¯¹è±¡è€Œä¸æ˜¯å¯¹è±¡å±æ€§ï¼Œé‚£è‡ªç„¶ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜äº†ã€‚</p><ol start="4"><li>é™¤äº† <code>getter</code>, <code>setter</code>ï¼Œ<code>Proxy</code>è¿˜æœ‰å…¶ä»–ç”¨æ³•</li></ol><p>æ¯”å¦‚<code>apply</code>ï¼Œå¯ä»¥åŠ«æŒå¯¹è±¡çš„å‡½æ•°ï¼ˆæˆ‘çš„ç†è§£æ˜¯æŠŠå¯¹è±¡å¯ä»¥æ‰§è¡Œï¼Œå½“ç„¶JavaScriptä¸­ï¼Œä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> <span class="built_in">Proxy</span>(&#123;&#125;, &#123;</span><br><span class="line">  apply(target, context, args) &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ä½ å¯ä»¥æ‰§è¡Œä¸€äº›ä¸œè¥¿ï¼Œç”šè‡³æ˜¯é€šè¿‡æ–¹æ³•åˆ›å»º/æ”¹å˜å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼ˆå¯¹ target ç›´æ¥ä¿®æ”¹ï¼‰</p><p>æ„Ÿè§‰ï¼Œå¦‚æœ<code>Vue3</code>ç”¨<code>Proxy</code>æ”¹å†™ä¹‹åï¼Œä»£ç ä¼šç®€æ´éå¸¸å¤šã€‚è€Œä¸”æ€§èƒ½å¯èƒ½ä¼šæ¯”ç°åœ¨æé«˜å¥½å‡ å€ï¼ˆï¼Ÿï¼‰ï¼Œæ¯•ç«Ÿçœ‹ç›®å‰å¾—åˆ°çš„ä¿¡æ¯ï¼Œå¯¹æ¯ä¸€ä¸ªæ•°æ®åˆ›å»º<code>Observer</code> + <code>defineProperty</code>ï¼Œæ€§èƒ½æŒºè¦å‘½çš„â€¦â€¦</p><h4 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h4><p><code>Proxy</code>åœ¨è¿™é‡Œçš„ç”¨æ³•åªèƒ½è¯´æ˜¯ã€Œèƒ½å½“å¯¹è±¡ä½¿ç”¨çš„å¯¹è±¡ã€å§ï¼Œæ¯•ç«Ÿå®ƒè¿˜æ˜¯ä¸€ä¸ªå®ä¾‹(Proxy(â€¦)ï¼Œè€Œ<code>defineProperty</code>æ“ä½œçš„æ˜¯æ„ä¹‰ä¸Šçš„å¯¹è±¡ã€‚</p><p>è€Œä¸”æˆ‘æœ¬ä»¥ä¸ºæˆ‘åº”è¯¥ä¼šå…ˆè¯»<code>React</code>çš„æºç ï¼Œæ²¡æƒ³åˆ°â€¦</p><h3 id="ä¸ºä»€ä¹ˆ-Vue2-ä¸ç›´æ¥ç”¨-Proxy"><a href="#ä¸ºä»€ä¹ˆ-Vue2-ä¸ç›´æ¥ç”¨-Proxy" class="headerlink" title="ä¸ºä»€ä¹ˆ Vue2 ä¸ç›´æ¥ç”¨ Proxy"></a>ä¸ºä»€ä¹ˆ Vue2 ä¸ç›´æ¥ç”¨ Proxy</h3><p><code>Vue</code> æœ€æ—©å‡ºç°äº 2013 å¹´ï¼Œ<code>ES2015</code> è§„èŒƒç¡®å®šäº 2015å¹´ï¼Œç›®å‰æ‰¾ä¸åˆ° <code>Vue2</code> ç¬¬ä¸€ä¸ª commit æ˜¯ä»€ä¹ˆæ—¶å€™ï¼ˆæ‡’ï¼‰ï¼Œæ¨ç®—äº†ä¸€ä¸‹ï¼Œä¸åº”è¯¥æ˜¯èµ¶ä¸ä¸Šï¼Œæ‰€ä»¥æœ‰ç¬¬äºŒç§çŒœæƒ³ï¼šå…¼å®¹æ€§é—®é¢˜ã€‚</p><p><code>Vue</code>å¯ä»¥æ”¯æŒåˆ° IE9+ï¼Œç›®å‰çš„å…¼å®¹æ€§æ˜¯ IE10+ã€‚é¦–å…ˆ<code>Proxy</code>å°±å·²ç»æŠŠ IE å®Œæ•´çš„æŠ›å¼ƒæ‰äº†ï¼Œä¸€ç‚¹ç‚¹éƒ½ä¸æ”¯æŒã€‚å°±ç®—ä¸Š <code>polyfill</code>ï¼Œä¹Ÿä»…å¯ä»¥ä½¿ç”¨<code>get</code>, <code>set</code>, <code>apply</code>, <code>construct</code>ï¼Œè€Œ <code>Proxy</code> çš„é’©å­(é™·é˜±)è¾¾åˆ°åå‡ ç§ï¼Œæ˜¾ç„¶ç‰©å°½å…¶èƒ½æ˜¯ä¸å¯èƒ½ã€‚</p><p>æ—¶ä»£ä¸åŒäº†ï¼Œç°åœ¨æ˜¯ç°ä»£æµè§ˆå™¨æ—¶ä»£ï¼ŒIE æ·¡å‡ºï¼Œè¿ Edge éƒ½æŠ•é æ•Œå°äº†ã€‚è¯è¯´æˆ‘æœ€å–œæ¬¢çš„å°±æ˜¯æœ€åä¸€ä»£æ–¯å·´è¾¾ï¼Œæ¸²æŸ“å¾ˆå¿«åˆå¼€å§‹æ”¯æŒæ’ä»¶ã€‚</p><h3 id="Vue-amp-React"><a href="#Vue-amp-React" class="headerlink" title="Vue &amp; React"></a>Vue &amp; React</h3><p>18 å¹´æˆ‘ç»å¸¸è¯´çš„å°±æ˜¯ï¼Œå¦‚æœæŠ€æœ¯å‚å·®ä¸é½çš„å›¢é˜Ÿï¼Œæ˜¾ç„¶<code>Vue</code>æ›´åˆé€‚ã€‚åæ­£ä½ ç…§ç€è¯´æ˜ä¹¦ä¸€è¡Œä¸€è¡ŒæŠ„è‚¯å®šä¸ä¼šæŠ„å‡ºé—®é¢˜ã€‚<strong>æ‰€ä»¥æˆ‘ä¸å–œæ¬¢ Vue å°±æ˜¯å› ä¸ºä¸å¤Ÿè‡ªç”±ï¼Œä½†å¦‚æœæ— æ³•é©¾é©­è‡ªç”±ï¼ŒReact æ€§èƒ½ä¼šæ›´å·®ã€‚</strong></p><p>å…¶ä¸­ä¸€ä¸ªåŸå› å°±æ˜¯ <code>Vue</code> è·Ÿ <code>React</code> å¯¹æ•°æ®çš„æ“ä½œæ˜¯ä¸ä¸€æ ·çš„ã€‚<code>React</code>å•å‘ï¼Œé€šè¿‡å¯¹æ¯”æ¥æ›´æ–°æ•°æ®ï¼Œæ‰€ä»¥ä»Šæ—¥ä¼šæœ‰ä¸¤ç§ç»„ä»¶åˆ›å»ºæ–¹å¼ï¼š<code>Component</code>, <code>PureComponent</code>ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆ React ä¸å­¦ Vue æè¿™æ‰‹ï¼Œè¡¨å•éªŒè¯ä¹‹ç±»å·¥ä½œä¸æ˜¯å¾ˆå¥½å®ç°</p></blockquote><p>å¤§å®¶çš„æƒ³æ³•éƒ½ä¸ä¸€æ ·ä¸ºä»€ä¹ˆè¦å¼ºæ¯”è¾ƒï¼Ÿæ‰€ä»¥æˆ‘çš„å›ç­”æ˜¯ï¼š</p><blockquote><p>è¿™æ˜¯ React çš„è®¾è®¡åŸå› ï¼ŒReact çš„åšæ³•æ˜¯æ•°æ®æµå•å‘ï¼Œåˆ©ç”¨å‡½æ•°å¼çš„æ€æƒ³ï¼Œåƒç®¡é“ä¸€æ ·çš„æ“ä½œä½¿å¾—å‰¯ä½œç”¨æ›´åŠ å¯æ§ã€‚</p></blockquote><p>åªæ˜¯å›ç­”å¾—ä¸å®Œç¾ï¼Œæˆ‘æœ‰é¢è¯•å°±ç´§å¼ çš„åå¿ƒæ€ã€‚æˆ‘çš„æœ¬æ„æ˜¯æˆ‘å¯ä»¥æ¸…æ¥šæ•°æ®çš„æµå‘ï¼ŒåŒæ—¶é‡‡ç”¨æ•°æ®ä¸å¯å˜ï¼Œè¿™æ ·æ ¹æœ¬ä¸ç”¨æ‹…å¿ƒæ•°æ®åœ¨ä¸­é€”çªç„¶è¢«ä»€ä¹ˆåšäº†ä¿®æ”¹ã€‚å› ä¸ºå‰é¢çš„åŸå› ï¼Œç¬¬äºŒä¸ªé—®é¢˜å¿˜è®°å›ç­”äº†ï¼šå› ä¸ºç”¨å‡½æ•°å¼çš„æ€æƒ³ï¼Œé‚£ä¹ˆè¡¨å•éªŒè¯æˆ‘å¯ä»¥ç”¨é«˜é˜¶å‡½æ•°å‘€ã€‚</p><p>ä½†å¹¶ä¸æ˜¯è¯´<code>Vue</code>çš„åšæ³•ä¸æ˜¯é«˜é˜¶å‡½æ•°ï¼Œå…¶å®ä¹Ÿæ˜¯çš„ã€‚åªæ˜¯æˆ‘ä»¬åœ¨ç”¨<code>React</code>çš„æ—¶å€™ï¼Œæ„Ÿè§‰<code>React</code>åªæä¾›äº†æŠŠä»£ç è½¬æˆè§†å›¾çš„åŠŸèƒ½ï¼Œå°±æ²¡äº†ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ä»€ä¹ˆéƒ½æ˜¯è‡ªå·±å®ç°ã€‚è€Œ<code>Vue</code>å·²ç»å®è£…äº†éå¸¸å¤šçš„æ“ä½œä½¿å¾—å¼€å‘è¿‡ç¨‹ä¸ç”¨æƒ³å¤šä¸€äº›é—®é¢˜ã€‚ä¸¾ä¸€ä¸ªå°æ —å­ï¼š<code>React</code>æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ï¼Œé çš„æ˜¯è‡ªå·±ç”¨<code>JavaScript</code>çš„æ–¹æ³•ç”Ÿæˆä¸€ä¸ªè£…ç€<code>ReactNode</code>çš„æ•°ç»„ï¼Œè€Œ<code>Vue</code>åªéœ€è¦åœ¨æ¨¡æ¿ä¸­æ ‡è®°åˆ—è¡¨æ•°æ®å’Œåœ¨å“ªä¸ªèŠ‚ç‚¹æ¸²æŸ“ï¼ŒæŠŠè¦æ¸²æŸ“çš„å†…å®¹å†™åœ¨å…¶ä¸­å³å¯ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¬è¯´ Vue3 æ•°æ®ç»‘å®šè¦åˆ‡æ¢åˆ° Proxyï¼Œä¸ºä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™å°±æ˜¯è¿™ç¯‡æ–‡ç« çš„åŸå› ï¼Œæ¥æºäºæŸä¸ªç‰›é€¼å…¬å¸çš„é¢è¯•ã€‚&lt;del&gt;æˆ‘çœŸçš„åº”è¯¥å­¦ä¼šæ€ä¹ˆæ¸…æ¥šè¡¨è¾¾è§‚ç‚¹â€¦&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;defineProperty&lt;/code&gt; å’Œ &lt;code&gt;Proxy&lt;/code&gt; ä½¿ç”¨æ–¹å¼å’Œæ•ˆæœçœ‹èµ·æ¥æ˜¯å·®ä¸å¤šçš„ï¼Œä½†å¦‚æœç¿»è¯‘æˆä¸­æ–‡çš„è¯ï¼Œä¸€ä¸ªæ˜¯å®šä¹‰å±æ€§ï¼Œä¸€ä¸ªæ˜¯ä»£ç†ï¼Œå¹¶ä¸” MDN ä¸Šæè¿°æœ‰æ‰€ä¸åŒã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Object.defineProperty() æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚ â€”â€” MDN&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Proxy å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ï¼Œèµ‹å€¼ï¼Œæšä¸¾ï¼Œå‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚  â€”â€” MDN&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;defineProperty&quot;&gt;&lt;a href=&quot;#defineProperty&quot; class=&quot;headerlink&quot; title=&quot;defineProperty&quot;&gt;&lt;/a&gt;defineProperty&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ª &lt;code&gt;ES5&lt;/code&gt; çš„æ–¹æ³•ã€‚ä¸€ä¸ª &lt;code&gt;defineProperty&lt;/code&gt; éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ &lt;code&gt;require&lt;/code&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¼–ç¨‹è®®è®º" scheme="https://colmugx.github.io/blog/categories/%E7%BC%96%E7%A8%8B%E8%AE%AE%E8%AE%BA/"/>
    
    
      <category term="JavaScript" scheme="https://colmugx.github.io/blog/tags/JavaScript/"/>
    
      <category term="vue" scheme="https://colmugx.github.io/blog/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>å…³äº Nlvi ã€Œæ·»åŠ åˆ°æ¡Œé¢ã€</title>
    <link href="https://colmugx.github.io/blog/2019/04/17/about-nlvi-pwa/"/>
    <id>https://colmugx.github.io/blog/2019/04/17/about-nlvi-pwa/</id>
    <published>2019-04-17T09:36:28.000Z</published>
    <updated>2019-04-17T10:17:35.456Z</updated>
    
    <content type="html"><![CDATA[<p>å…¶å®è¿™ä¸ªåŠŸèƒ½æ—©åœ¨ 2.x ç‰ˆæœ¬å°±åŠ å…¥äº†ï¼Œé‚£æ—¶å€™å¯¹ PWA å¹¶æ²¡æœ‰ä»€ä¹ˆæ¦‚å¿µã€‚<del>å¥½æƒ³æ¢ iPad Mini (new)</del></p><p><img src="/blog/Image/nlvi-ios-desktop.gif" alt="nlvi-ios-desktop"></p><p>ç›®å‰ 3.x åªæ”¹äº†å¯åŠ¨å›¾ï¼Œé€‚é…äº† iPad æ¨ªå±å’Œ iPhone å…¨é¢å±ï¼ˆæ™®é€šå±å’Œplusåç»­åŠ ï¼‰ã€‚ä¹‹å‰çœ‹åˆ°è‹¹æœå¯¹ PWA æŒæ‹’ç»æ€åº¦æˆ‘æ˜¯éœ‡æƒŠçš„ï¼Œä½  tm æ—©å°±ç»™ safari åŠ å…¥äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¹Ÿæœ‰ç›¸å…³<code>meta</code>é…ç½®ï¼ˆåŒ…æ‹¬â€è¯†åˆ«ä¸º<code>WebApp</code>â€œï¼‰ï¼Œç„¶åä½ å‘Šè¯‰æˆ‘è¿™ä¸œè¥¿ä¸æ˜¯ PWAï¼Ÿ</p><p>æœ¬æ¥ç¡®å®æƒ³æ”¯æŒ PWA çš„ï¼Œæƒ³åˆ°é™¤äº†è¦ <code>manifest.json</code>ï¼Œè¿˜è¦æå®šå¯¹åº”ç”Ÿæˆ <code>service worker</code>ï¼Œä½¿ç”¨ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ‰€ä»¥å–æ¶ˆè®¡åˆ’ã€‚è¿™éƒ¨åˆ†æ·»åŠ åŠŸèƒ½å°±æ˜¯ä¸€ä¸ªå°è¯•çš„ç”œç‚¹ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰æ‹¿å‡ºæ¥è¯´ã€‚ç›®å‰ 3.x å¼€å¯ <code>pjax</code> ç„¶åæ·»åŠ åˆ°æ¡Œé¢ï¼Œé˜…è¯»ä½“éªŒè¿˜æ˜¯æŒºå¥½çš„ã€‚</p><p>æ‰€ä»¥è¿™æ¬¡æ‰“ç®—è®²è®²ã€Œè‹¹æœå¼ç½‘é¡µåº”ç”¨å®‰è£…ã€ï¼Œå…¶å®æŒºç®€å•çš„ã€‚<br><a id="more"></a></p><h3 id="meta"><a href="#meta" class="headerlink" title="meta"></a>meta</h3><p>è¿™é‡Œæ²¡æœ‰åˆ—å‡ºæ‰€æœ‰å…³äº safari æ”¯æŒçš„ metaï¼Œåªé’ˆå¯¹è¿™ä¸ªåŠŸèƒ½éƒ¨åˆ†ã€‚<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-touch-fullscreen"</span> <span class="attr">content</span>=<span class="string">"yes"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-title"</span> <span class="attr">content</span>=<span class="string">"Colmugx's Blog"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-status-bar-style"</span> <span class="attr">content</span>=<span class="string">"default"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon"</span>  <span class="attr">sizes</span>=<span class="string">"72x72"</span>  <span class="attr">href</span>=<span class="string">"icon.ico"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-icon-precomposed"</span>  <span class="attr">sizes</span>=<span class="string">"72x72"</span>  <span class="attr">href</span>=<span class="string">"icon.ico"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">media</span>=<span class="string">"(device-width: 375px)"</span> <span class="attr">href</span>=<span class="string">"apple-launch-1125x2436.png"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"apple-touch-startup-image"</span> <span class="attr">media</span>=<span class="string">"(orientation: landscape)"</span> <span class="attr">href</span>=<span class="string">"apple-touch-startup-image-2048x1496.png"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯ï¼š</p><ul><li>æ·»åŠ åˆ°ä¸»å±å¹•åï¼Œæ˜¯å¦å…¨å±æ˜¾ç¤º</li><li>æ˜¯å¦æ˜¾ç¤º safari èœå•</li><li>åº”ç”¨é»˜è®¤åç§°ï¼ˆåœ¨æ·»åŠ çš„æ—¶å€™å¯ä»¥ä¿®æ”¹ï¼‰</li><li>æ‰“å¼€æ—¶ï¼Œé¡¶ä¸ŠçŠ¶æ€æ åº”è¯¥å‘ˆç°ä»€ä¹ˆé¢œè‰²ï¼ˆç™½è‰²ï¼Œé»‘è‰²ï¼Œé€æ˜ï¼‰</li><li>è®¾ç½® icon (72x72, 114x114)ï¼Œå›¾æ ‡åœ¨ã€Œä¹¦ç­¾ã€ä¹Ÿå¯é€‚ç”¨</li><li>è®¾ç½®å¯åŠ¨ç”»é¢ï¼ˆè¿™é‡Œåªè®¾ç½®äº†æ‰‹æœºä¸å¹³æ¿æ¨ªç½®ï¼‰</li></ul><h3 id="apple-touch-startup-image"><a href="#apple-touch-startup-image" class="headerlink" title="apple-touch-startup-image"></a>apple-touch-startup-image</h3><p>å…¶ä»–çš„æ²¡ä»€ä¹ˆå‘ç‚¹ï¼Œåªæ˜¯<code>apple-touch-startup-image</code>ä¼šå¤æ‚ä¸€äº›ã€‚å®ƒåˆ†æˆå¾ˆå¤šåˆ†è¾¨ç‡ï¼Œè®¾ç½®ä¸æ¸…æ¥šçš„è¯å°±ä¸ä¼šæ˜¾ç¤ºã€‚è€Œä¸”å®ƒä¸èƒ½åƒå›¾æ ‡ä¸€æ ·è®¾ç½®<code>size</code>ã€‚åªèƒ½ç”¨<code>media</code>ä¸€è¡Œä¸€è¡Œå†™ã€‚</p><p>æ¯”å¦‚ iPadï¼Œè®¾ç½®å€’æ˜¯ä¸éœ€è¦è·Ÿæ‰‹æœºä¸€æ ·é‚£ä¹ˆå¤šå›¾ç‰‡ï¼Œåªéœ€è¦å‡†å¤‡ä¸€å¼ å‚ç›´ä¸€å¼ æ°´å¹³ã€‚å‚ç›´ <code>768x1024</code>ï¼Œæ°´å¹³<code>748x1024</code>ï¼Œæ°´å¹³å›¾ä¹Ÿéœ€è¦æ‘†æˆå‚ç›´çš„ï¼Œä¹Ÿå°±æ˜¯<code>1024x748</code>ï¼Œå½“ç„¶å†…å®¹ä¹Ÿæ˜¯æ¨ªç›´ï¼Œç›¸å½“äºé¡ºæ—¶é’ˆ 90Â°ã€‚æ¥ç€å°±è€ƒè™‘ä¸€ä¸‹å±å¹•ç”¨çš„æ˜¯äºŒå€å›¾è¿˜æ˜¯ä¸‰å€å›¾äº†ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://medium.com/appscope/adding-custom-ios-splash-screens-to-your-progressive-web-app-41a9b18bdca3" target="_blank" rel="noopener">Adding Custom iOS Splash Screens To Your Progressive Web App</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…¶å®è¿™ä¸ªåŠŸèƒ½æ—©åœ¨ 2.x ç‰ˆæœ¬å°±åŠ å…¥äº†ï¼Œé‚£æ—¶å€™å¯¹ PWA å¹¶æ²¡æœ‰ä»€ä¹ˆæ¦‚å¿µã€‚&lt;del&gt;å¥½æƒ³æ¢ iPad Mini (new)&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/Image/nlvi-ios-desktop.gif&quot; alt=&quot;nlvi-ios-desktop&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç›®å‰ 3.x åªæ”¹äº†å¯åŠ¨å›¾ï¼Œé€‚é…äº† iPad æ¨ªå±å’Œ iPhone å…¨é¢å±ï¼ˆæ™®é€šå±å’Œplusåç»­åŠ ï¼‰ã€‚ä¹‹å‰çœ‹åˆ°è‹¹æœå¯¹ PWA æŒæ‹’ç»æ€åº¦æˆ‘æ˜¯éœ‡æƒŠçš„ï¼Œä½  tm æ—©å°±ç»™ safari åŠ å…¥äº†è¿™ä¸ªåŠŸèƒ½ï¼Œä¹Ÿæœ‰ç›¸å…³&lt;code&gt;meta&lt;/code&gt;é…ç½®ï¼ˆåŒ…æ‹¬â€è¯†åˆ«ä¸º&lt;code&gt;WebApp&lt;/code&gt;â€œï¼‰ï¼Œç„¶åä½ å‘Šè¯‰æˆ‘è¿™ä¸œè¥¿ä¸æ˜¯ PWAï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ¬æ¥ç¡®å®æƒ³æ”¯æŒ PWA çš„ï¼Œæƒ³åˆ°é™¤äº†è¦ &lt;code&gt;manifest.json&lt;/code&gt;ï¼Œè¿˜è¦æå®šå¯¹åº”ç”Ÿæˆ &lt;code&gt;service worker&lt;/code&gt;ï¼Œä½¿ç”¨ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ‰€ä»¥å–æ¶ˆè®¡åˆ’ã€‚è¿™éƒ¨åˆ†æ·»åŠ åŠŸèƒ½å°±æ˜¯ä¸€ä¸ªå°è¯•çš„ç”œç‚¹ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰æ‹¿å‡ºæ¥è¯´ã€‚ç›®å‰ 3.x å¼€å¯ &lt;code&gt;pjax&lt;/code&gt; ç„¶åæ·»åŠ åˆ°æ¡Œé¢ï¼Œé˜…è¯»ä½“éªŒè¿˜æ˜¯æŒºå¥½çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥è¿™æ¬¡æ‰“ç®—è®²è®²ã€Œè‹¹æœå¼ç½‘é¡µåº”ç”¨å®‰è£…ã€ï¼Œå…¶å®æŒºç®€å•çš„ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="å®è·µå°è¯•" scheme="https://colmugx.github.io/blog/categories/%E5%AE%9E%E8%B7%B5%E5%B0%9D%E8%AF%95/"/>
    
    
      <category term="nlvi" scheme="https://colmugx.github.io/blog/tags/nlvi/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘ä»Šå¤©ç»™ let å®‰æ’äº†</title>
    <link href="https://colmugx.github.io/blog/2019/03/27/you-dont-know-let/"/>
    <id>https://colmugx.github.io/blog/2019/03/27/you-dont-know-let/</id>
    <published>2019-03-27T10:13:29.000Z</published>
    <updated>2019-04-08T09:02:18.111Z</updated>
    
    <content type="html"><![CDATA[<h4 id="Round-1"><a href="#Round-1" class="headerlink" title="Round 1"></a>Round 1</h4><blockquote><p>- æˆ‘ç°åœ¨æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ³¨é‡Šæ‰ï¼Œæ”¹æˆè¿™æ ·<br>function a() {<br>  return inner;<br>  let inner;<br>}<br>è¿”å›ä»€ä¹ˆï¼Ÿ</p><p>- é‚£å°±åº”è¯¥ undefined äº†ï¼Œåæ­£åé¢ä¸æ‰§è¡Œ</p></blockquote><p>è‡ªä¿¡çš„ä¸è¡Œï¼Œå‡ºäº†é—¨æå‡ºå…¨ä¸–ç•Œæœ€ç‰›é€¼çš„åƒå…ƒæœº<strong>åšæœ Pro 2S</strong>ï¼ŒéªŒè¯äº†ä¸€ä¸‹ã€‚</p><blockquote><p>inner is not defined</p></blockquote><p>ç¡®å®æ˜¯ä¸æ‰§è¡Œï¼Œä½†å¥½åƒä¸æ˜¯ <code>undefined</code> å•Šâ•­(*ï¾ŸĞ”ï¾Ÿ*)â•®</p><h4 id="Round-2"><a href="#Round-2" class="headerlink" title="Round 2"></a>Round 2</h4><blockquote><p>- å¦‚æœæ”¹æˆè¿™æ ·å‘¢<br>function a() {<br>  function inner() {}<br>  return inner;<br>  let inner;<br>}<br>è¿”å›ä»€ä¹ˆï¼Ÿ</p><p>- è¿”å›æ–¹æ³•</p></blockquote><p>è‡ªä¿¡çš„ä¸è¡Œï¼ŒåŒæ ·ç”¨å…¨ä¸–ç•Œæœ€ç‰›é€¼çš„åƒå…ƒæœº<strong>åšæœ Pro 2S</strong>ï¼ŒéªŒè¯äº†ä¸€ä¸‹ã€‚</p><blockquote><p>Identifier â€˜innerâ€™ has already been declared</p></blockquote><p>(ï¾ŸĞ”ï¾Ÿâ‰¡ï¾ŸĞ´ï¾Ÿ)!? ä½ åœ¨è¿”å›ä½ ğŸ´å‘¢ï¼Ÿ<br><a id="more"></a></p><h3 id="Why"><a href="#Why" class="headerlink" title="Why?"></a>Why?</h3><p>åŸæœ¬æˆ‘ä»¥ä¸ºåªæœ‰ <code>var</code> ä¼šå˜é‡æå‡ï¼Œå®é™…ä¸Šé”™äº†ï¼Œ<code>var/let/const</code>éƒ½ä¼šã€‚</p><p><code>var</code> å’Œ <code>let</code> åœ¨æŸç§æ—¶å€™æ˜¯ç›¸ä¼¼çš„ï¼Œä»–ä»¬éƒ½ä¼šæå‡ï¼Œä½† <code>let</code> å°‘äº†åˆå§‹åŒ–çš„è¿‡ç¨‹ã€‚MDN å¯¹ <code>let</code> æ­»åŒºæ˜¯è¿™ä¹ˆè§£é‡Šçš„</p><blockquote><p>åœ¨ ECMAScript 2015 ä¸­ï¼Œlet ç»‘å®šä¸å—å˜é‡æå‡çš„çº¦æŸï¼Œè¿™æ„å‘³ç€ let  å£°æ˜ä¸ä¼šè¢«æå‡åˆ°å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„é¡¶éƒ¨ã€‚åœ¨å—ä¸­çš„å˜é‡åˆå§‹åŒ–ä¹‹å‰ï¼Œå¼•ç”¨å®ƒå°†ä¼šå¯¼è‡´ ReferenceErrorï¼ˆè€Œä½¿ç”¨ var å£°æ˜å˜é‡åˆ™æ°æ°ç›¸åï¼Œè¯¥å˜é‡çš„å€¼æ˜¯ undefined ï¼‰ã€‚è¿™ä¸ªå˜é‡å¤„äºä»å—å¼€å§‹åˆ° let åˆå§‹åŒ–å¤„ç†çš„â€æš‚å­˜æ­»åŒºâ€œä¹‹ä¸­ã€‚ â€”â€” MDN</p></blockquote><p>æš‚å­˜æ­»åŒºåˆæœ‰è¿™ä¹ˆä¸ªè¯´æ³•ï¼Œç”¨ä¸€ä¸ªä»£ç å—è§£é‡Šä¸€ä¸‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  a = <span class="string">'caonima'</span> <span class="comment">// ä¸‹é¢æœ‰ letï¼Œa ç›´æ¥è¢«è¯¥å—é”å®šï¼Œè¿™é‡ŒæŠ¥é”™</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> a <span class="comment">// åˆ°è¿™é‡Œæ‰å®Œæˆåˆå§‹åŒ–ï¼Œå˜é‡å¼€å§‹æ­£å¸¸ä½¿ç”¨ï¼Œä½†å˜é‡æ—©å·²æå‡</span></span><br><span class="line">  <span class="built_in">console</span>.log(a) <span class="comment">// è¿™é‡Œä¸æ˜¯ caonima è€Œæ˜¯ undefined</span></span><br><span class="line"></span><br><span class="line">  a = <span class="string">'woshinidie'</span></span><br><span class="line">  <span class="built_in">console</span>.log(a) <span class="comment">// woshinidie</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><a href="https://github.com/getify/You-Dont-Know-JS/issues/767" target="_blank" rel="noopener">You-Dont-Know-JS#767</a> è®¨è®ºäº†è¿™ä¸ªé—®é¢˜, creeperyang æ€»ç»“äº†å››ç‚¹</p><blockquote><ol><li>Hoisting includes both declare and initialize.</li><li>Only initialized variable can be used in a scope.</li><li>var do both declare and initialize, the two cannot be split for var.</li><li>let do firstly declare in the top of the scope, and do initialize when encounter the let xxx statements.<br>â€”â€” @creeperyang</li></ol></blockquote><p>å¦å¤–ï¼Œæ–¹åº”æ­åœ¨çŸ¥ä¹ä¸“æ çš„æ–‡ç« <a href="https://zhuanlan.zhihu.com/p/28140450" target="_blank" rel="noopener">ã€Šæˆ‘ç”¨äº†ä¸¤ä¸ªæœˆçš„æ—¶é—´æ‰ç†è§£ letã€‹</a>ä¹Ÿæ€»ç»“å‡º</p><blockquote><ol><li>let çš„ã€Œåˆ›å»ºã€è¿‡ç¨‹è¢«æå‡äº†ï¼Œä½†æ˜¯åˆå§‹åŒ–æ²¡æœ‰æå‡ã€‚</li><li>var çš„ã€Œåˆ›å»ºã€å’Œã€Œåˆå§‹åŒ–ã€éƒ½è¢«æå‡äº†ã€‚</li><li>function çš„ã€Œåˆ›å»ºã€ã€Œåˆå§‹åŒ–ã€å’Œã€Œèµ‹å€¼ã€éƒ½è¢«æå‡äº†ã€‚<br>â€”â€” <a href="https://www.zhihu.com/people/zhihusucks" target="_blank" rel="noopener">@æ–¹åº”æ­</a></li></ol></blockquote><p>ç†è®ºä¸Š <code>const</code> åº”è¯¥æ˜¯ <code>let</code> çš„ä¸å¯ä¿®æ”¹ç‰ˆæœ¬ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯ç±»ä¼¼çš„ã€‚ä½†ä¹Ÿä»…é™æå‡åŸç†ç›¸åŒï¼Œå› ä¸º <code>const</code> åªèƒ½åˆå§‹åŒ–æ—¶èµ‹å€¼ä¸€æ¬¡ã€‚</p><p>ä¸è¿‡ï¼Œé˜®ä¸€å³°çš„ã€ŠECMAScript 6 å…¥é—¨ã€‹æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿåœ¨ let æœ‰å•ç‹¬ä¸€å°èŠ‚è®² <a href="http://es6.ruanyifeng.com/#docs/let#%E4%B8%8D%E5%AD%98%E5%9C%A8%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87" target="_blank" rel="noopener">ä¸å­˜åœ¨å˜é‡æå‡</a>ï¼Œè™½ç„¶åé¢è§£é‡Šäº†æš‚æ—¶æ€§æ­»åŒºï¼Œä½†â€¦â€¦</p><p>æ€»ç»“ï¼šè¢«å®‰æ’æ˜ç™½äº†ã€‚æ ¹æ® @Ahonn æ‰€è¯´ï¼Œè¿™ä¸ªé—®é¢˜åœ¨é«˜ç¨‹æœ‰è®²è¿‡ï¼Œä¹¦è¯»å°‘äº†è¯»å°‘äº†</p><p>ï¼ˆæœ€åæ„Ÿè°¢æ‰€æœ‰è¢«å¼•ç”¨çš„æ–‡ç« å’Œä½œè€…ï¼Œè°¢è°¢ã€‚ï¼‰</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;Round-1&quot;&gt;&lt;a href=&quot;#Round-1&quot; class=&quot;headerlink&quot; title=&quot;Round 1&quot;&gt;&lt;/a&gt;Round 1&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;- æˆ‘ç°åœ¨æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ³¨é‡Šæ‰ï¼Œæ”¹æˆè¿™æ ·&lt;br&gt;function a() {&lt;br&gt;  return inner;&lt;br&gt;  let inner;&lt;br&gt;}&lt;br&gt;è¿”å›ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;- é‚£å°±åº”è¯¥ undefined äº†ï¼Œåæ­£åé¢ä¸æ‰§è¡Œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è‡ªä¿¡çš„ä¸è¡Œï¼Œå‡ºäº†é—¨æå‡ºå…¨ä¸–ç•Œæœ€ç‰›é€¼çš„åƒå…ƒæœº&lt;strong&gt;åšæœ Pro 2S&lt;/strong&gt;ï¼ŒéªŒè¯äº†ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;inner is not defined&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç¡®å®æ˜¯ä¸æ‰§è¡Œï¼Œä½†å¥½åƒä¸æ˜¯ &lt;code&gt;undefined&lt;/code&gt; å•Šâ•­(*ï¾ŸĞ”ï¾Ÿ*)â•®&lt;/p&gt;
&lt;h4 id=&quot;Round-2&quot;&gt;&lt;a href=&quot;#Round-2&quot; class=&quot;headerlink&quot; title=&quot;Round 2&quot;&gt;&lt;/a&gt;Round 2&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;- å¦‚æœæ”¹æˆè¿™æ ·å‘¢&lt;br&gt;function a() {&lt;br&gt;  function inner() {}&lt;br&gt;  return inner;&lt;br&gt;  let inner;&lt;br&gt;}&lt;br&gt;è¿”å›ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;- è¿”å›æ–¹æ³•&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è‡ªä¿¡çš„ä¸è¡Œï¼ŒåŒæ ·ç”¨å…¨ä¸–ç•Œæœ€ç‰›é€¼çš„åƒå…ƒæœº&lt;strong&gt;åšæœ Pro 2S&lt;/strong&gt;ï¼ŒéªŒè¯äº†ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Identifier â€˜innerâ€™ has already been declared&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;(ï¾ŸĞ”ï¾Ÿâ‰¡ï¾ŸĞ´ï¾Ÿ)!? ä½ åœ¨è¿”å›ä½ ğŸ´å‘¢ï¼Ÿ&lt;br&gt;
    
    </summary>
    
      <category term="ç¼–ç¨‹è®®è®º" scheme="https://colmugx.github.io/blog/categories/%E7%BC%96%E7%A8%8B%E8%AE%AE%E8%AE%BA/"/>
    
    
      <category term="JavaScript" scheme="https://colmugx.github.io/blog/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>æœ€åçš„ Nlvi</title>
    <link href="https://colmugx.github.io/blog/2019/03/25/bye-nlvi/"/>
    <id>https://colmugx.github.io/blog/2019/03/25/bye-nlvi/</id>
    <published>2019-03-25T06:34:53.000Z</published>
    <updated>2019-07-27T10:50:00.785Z</updated>
    
    <content type="html"><![CDATA[<p><code>Nlvi</code> å¯ä»¥è¯´èµ·æºäºæ­£å‡†å¤‡ä¸Šç­å’Œåˆšä¸Šç­å·¥ä½œä¸é¥±å’Œ(å¤§é›¾ã€‚ä¸ºäº†ç»ƒä¹ è‡ªå·±å¯¹è¯­ä¹‰åŒ– HTML ç†è§£å’Œ CSS çš„æ¸è¿›å¼å­¦ä¹ è€Œè¯ç”Ÿçš„ï¼Œåˆ°ç°åœ¨å·²ç» 2 å¹´äº†ã€‚</p><p>é‚£ä¸ªæ—¶å€™è¿˜ç”¨ iPad ç”»è‰å›¾ç„¶åæ…¢æ…¢å†™èµ·æ¥ï¼Œè€Œä¸”å½“æ—¶ç¼–ç¨‹èƒ½åŠ›ç¡®å®è¿˜æŒºå¼±ï¼Œhexo å¾ˆå¤šéƒ½å¼„ä¸æ¸…æ¥šã€‚ç°åœ¨å¯¹ hexo å°±ç†Ÿæ‚‰å¾ˆå¤šäº†ï¼Œè®¾è®¡ç¨¿ä¹Ÿä»éšä¾¿ç”»ç”»å˜æˆäº†ç”¨ sketchï¼Œä½†ä¹Ÿæ˜¯æ€é¸¡ç”¨ç‰›åˆ€ã€‚</p><p>è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å„ç§éªšæƒ³æ³•ï¼Œæ¯”å¦‚ç”¨ Vue/React æ”¹å†™å•Šï¼›è„±ç¦» jQuery å•Šï¼›ç”¨ pjax å•Šï¼›ç”¨æ›´å¤æ‚çš„åŠ¨ç”»å•Šâ€¦â€¦ä¸è¿‡æˆ‘ç°åœ¨æƒ³çš„æ˜¯ï¼šæ–°ç‰ˆæœ¬(æˆ‘åšå®¢æ­£åœ¨ç”¨çš„åŠæˆå“)åšå®Œä¹‹åï¼Œå°±ä¸æƒ³è¿­ä»£äº†ã€‚</p><p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºä¸€æ—¦å·¥ä½œå¤ªå¿™æ²¡æ—¶é—´ï¼Œåˆæƒ³åˆ°è¿™ä¸ªä¸œè¥¿ï¼Œå¥½ç´¯å•Šâ€¦â€¦</p><p>ä½†ï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œ<strong>æˆ‘ä¸æƒ³ç»´æŠ¤ hexo ç‰ˆæœ¬çš„ Nlvi äº†</strong>ï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œè¯¶å˜¿å˜¿å˜¿å˜¿å˜¿ï¼<br><a id="more"></a></p><p>æ‰€ä»¥ 2.0 åˆ° 3.0 å¤§æ¦‚çš„æ”¹åŠ¨ä¼šæ˜¯ï¼š</p><ul><li>æ ¹æ®æˆ‘å¯¹ç»Ÿä¸€é£æ ¼çš„æƒ³æ³•ï¼Œ(åˆ)å˜åŠ¨éƒ¨åˆ†è®¾è®¡é£æ ¼</li><li>æ ¹æ®æˆ‘å¯¹ç»Ÿä¸€é£æ ¼çš„æƒ³æ³•ï¼Œè°ƒæ•´éƒ¨åˆ†éƒ¨ä»¶å±•ç¤ºå½¢å¼</li><li>æ ¹æ®æˆ‘å¯¹ç»Ÿä¸€é£æ ¼çš„æƒ³æ³•ï¼Œå¯¹é¢œè‰²å˜é‡é‡æ–°ç®¡ç†</li><li>å»æ‰ä»¥å‰çš„æ ‡ç­¾äº‘ï¼Œé‡å†™ä¸€ä¸ª</li><li>å»æ‰ä»¥å‰çš„æœç´¢æ¡†ï¼Œé‡å†™ä¸€ä¸ª</li><li>å˜åŠ¨éƒ¨åˆ†ä¸æˆç†ŸåŠ¨ç”»ï¼Œæ”¹åŠ¨åŠ¨ç”»æ›²çº¿</li><li><strong>åŠ å…¥æ¸å˜è‰²çš„è®¾å®šï¼(Maybe)</strong></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;Nlvi&lt;/code&gt; å¯ä»¥è¯´èµ·æºäºæ­£å‡†å¤‡ä¸Šç­å’Œåˆšä¸Šç­å·¥ä½œä¸é¥±å’Œ(å¤§é›¾ã€‚ä¸ºäº†ç»ƒä¹ è‡ªå·±å¯¹è¯­ä¹‰åŒ– HTML ç†è§£å’Œ CSS çš„æ¸è¿›å¼å­¦ä¹ è€Œè¯ç”Ÿçš„ï¼Œåˆ°ç°åœ¨å·²ç» 2 å¹´äº†ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¸ªæ—¶å€™è¿˜ç”¨ iPad ç”»è‰å›¾ç„¶åæ…¢æ…¢å†™èµ·æ¥ï¼Œè€Œä¸”å½“æ—¶ç¼–ç¨‹èƒ½åŠ›ç¡®å®è¿˜æŒºå¼±ï¼Œhexo å¾ˆå¤šéƒ½å¼„ä¸æ¸…æ¥šã€‚ç°åœ¨å¯¹ hexo å°±ç†Ÿæ‚‰å¾ˆå¤šäº†ï¼Œè®¾è®¡ç¨¿ä¹Ÿä»éšä¾¿ç”»ç”»å˜æˆäº†ç”¨ sketchï¼Œä½†ä¹Ÿæ˜¯æ€é¸¡ç”¨ç‰›åˆ€ã€‚&lt;/p&gt;
&lt;p&gt;è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å„ç§éªšæƒ³æ³•ï¼Œæ¯”å¦‚ç”¨ Vue/React æ”¹å†™å•Šï¼›è„±ç¦» jQuery å•Šï¼›ç”¨ pjax å•Šï¼›ç”¨æ›´å¤æ‚çš„åŠ¨ç”»å•Šâ€¦â€¦ä¸è¿‡æˆ‘ç°åœ¨æƒ³çš„æ˜¯ï¼šæ–°ç‰ˆæœ¬(æˆ‘åšå®¢æ­£åœ¨ç”¨çš„åŠæˆå“)åšå®Œä¹‹åï¼Œå°±ä¸æƒ³è¿­ä»£äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºä¸€æ—¦å·¥ä½œå¤ªå¿™æ²¡æ—¶é—´ï¼Œåˆæƒ³åˆ°è¿™ä¸ªä¸œè¥¿ï¼Œå¥½ç´¯å•Šâ€¦â€¦&lt;/p&gt;
&lt;p&gt;ä½†ï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œ&lt;strong&gt;æˆ‘ä¸æƒ³ç»´æŠ¤ hexo ç‰ˆæœ¬çš„ Nlvi äº†&lt;/strong&gt;ï¼Œæˆ‘çš„æ„æ€æ˜¯ï¼Œè¯¶å˜¿å˜¿å˜¿å˜¿å˜¿ï¼&lt;br&gt;
    
    </summary>
    
      <category term="æ—¥å¸¸åæ§½" scheme="https://colmugx.github.io/blog/categories/%E6%97%A5%E5%B8%B8%E5%90%90%E6%A7%BD/"/>
    
    
      <category term="nlvi" scheme="https://colmugx.github.io/blog/tags/nlvi/"/>
    
      <category term="colmugx" scheme="https://colmugx.github.io/blog/tags/colmugx/"/>
    
  </entry>
  
  <entry>
    <title>åšä¸å®Œçš„é¢˜ç›®</title>
    <link href="https://colmugx.github.io/blog/2019/03/23/last-test-questions/"/>
    <id>https://colmugx.github.io/blog/2019/03/23/last-test-questions/</id>
    <published>2019-03-23T06:00:50.000Z</published>
    <updated>2019-03-26T15:48:18.322Z</updated>
    
    <content type="html"><![CDATA[<p>åˆåœ¨ã€Œæ‚ä¹±çš„å·¥ä½œå°ä¸Šã€å®Œæˆæ–‡ç« â€¦â€¦</p><p>æ²¡é”™åˆé”™è¿‡ä¸€ä¸ªéå¸¸å¥½çš„æœºä¼šã€‚ä¸å…¶è¯´æ˜¯å› ä¸ºæ—¶é—´ä¸å¤Ÿåšä¸å®Œï¼Œè¿˜ä¸å¦‚è¯´æ˜¯å› ä¸ºé™·å…¥æ–æ³¢é‚£å¥‘æ€è€ƒå¯¼è‡´åšä¸å®Œã€‚</p><p>ä¸ç•™é—æ†¾ï¼ŒæŠŠå®ƒæå®Œã€‚é¢˜æºå°±ä¸è¯´äº†ã€‚<br><a id="more"></a></p><h3 id="1-ç°æœ‰-a-b-c-d-å››ä¸ªæ¥å£ï¼Œæ‰¾å‡ºæœ€å¿«çš„é‚£ä¸ªã€‚å¼‚æ­¥ç”¨-setTimeout-æ¨¡æ‹Ÿ"><a href="#1-ç°æœ‰-a-b-c-d-å››ä¸ªæ¥å£ï¼Œæ‰¾å‡ºæœ€å¿«çš„é‚£ä¸ªã€‚å¼‚æ­¥ç”¨-setTimeout-æ¨¡æ‹Ÿ" class="headerlink" title="1. ç°æœ‰ /a, /b, /c, /d å››ä¸ªæ¥å£ï¼Œæ‰¾å‡ºæœ€å¿«çš„é‚£ä¸ªã€‚å¼‚æ­¥ç”¨ setTimeout æ¨¡æ‹Ÿ"></a>1. ç°æœ‰ /a, /b, /c, /d å››ä¸ªæ¥å£ï¼Œæ‰¾å‡ºæœ€å¿«çš„é‚£ä¸ªã€‚å¼‚æ­¥ç”¨ setTimeout æ¨¡æ‹Ÿ</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> requests: <span class="built_in">Promise</span>&lt;<span class="built_in">string</span>&gt;[]</span><br><span class="line">  = [<span class="string">'/a'</span>, <span class="string">'/b'</span>, <span class="string">'/c'</span>, <span class="string">'/d'</span>]</span><br><span class="line">  .map(<span class="function"><span class="params">v</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> time = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">1000</span>)</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">`<span class="subst">$&#123;v&#125;</span> spent <span class="subst">$&#123;time&#125;</span>`</span>)</span><br><span class="line">    &#125;, time);</span><br><span class="line">  &#125;))</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race(requests).then(<span class="built_in">console</span>.log)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆåœ¨ã€Œæ‚ä¹±çš„å·¥ä½œå°ä¸Šã€å®Œæˆæ–‡ç« â€¦â€¦&lt;/p&gt;
&lt;p&gt;æ²¡é”™åˆé”™è¿‡ä¸€ä¸ªéå¸¸å¥½çš„æœºä¼šã€‚ä¸å…¶è¯´æ˜¯å› ä¸ºæ—¶é—´ä¸å¤Ÿåšä¸å®Œï¼Œè¿˜ä¸å¦‚è¯´æ˜¯å› ä¸ºé™·å…¥æ–æ³¢é‚£å¥‘æ€è€ƒå¯¼è‡´åšä¸å®Œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ç•™é—æ†¾ï¼ŒæŠŠå®ƒæå®Œã€‚é¢˜æºå°±ä¸è¯´äº†ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="å‰ç«¯æ€è€ƒ" scheme="https://colmugx.github.io/blog/categories/%E5%89%8D%E7%AB%AF%E6%80%9D%E8%80%83/"/>
    
    
      <category term="TypeScript" scheme="https://colmugx.github.io/blog/tags/TypeScript/"/>
    
  </entry>
  
  <entry>
    <title>Redux â€”â€” combineReducers</title>
    <link href="https://colmugx.github.io/blog/2019/03/08/redux-combinereducers/"/>
    <id>https://colmugx.github.io/blog/2019/03/08/redux-combinereducers/</id>
    <published>2019-03-08T06:49:12.000Z</published>
    <updated>2019-04-28T16:09:00.378Z</updated>
    
    <content type="html"><![CDATA[<p>äº‹å‡ºæœ‰å› ï¼Œå†™ <code>rabbit</code> çš„æ—¶å€™ï¼Œä¸€æ¡å•æµ‹å‡ºäº†é—®é¢˜</p><blockquote><p>Reducer _object returned undefined during initialization.</p></blockquote><p>æƒ³æ¥å¿…ç„¶æ˜¯ <code>reducer</code> ç¼ºå°‘é»˜è®¤çš„ <code>state</code> æ‰€è‡´ï¼Œ<del>ä½†æ˜¯æˆ‘çš„å•æµ‹æ˜¯ä» <code>dva</code> ç›´æ¥æ‹¿è¿‡æ¥æ”¹æ”¹å°±ç”¨çš„ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯å“ªé‡Œå‡ºäº†å·®é”™ã€‚åé¢å‘ç°äº†ï¼Œè™½ç„¶ <code>dva</code> å¯ä»¥æ¥å— <code>reducers</code> æ˜¯ç©ºå¯¹è±¡ï¼Œä½†åº”ç”¨è¿è¡Œèµ·æ¥æœ‰ä¸€æ ·é—®é¢˜ã€‚</del></p><p>ä¸»è¦æ˜¯è¿™ä¸ªé—®é¢˜æ— ä¼¤å¤§é›…ï¼Œ<code>model</code> ä¸ä¼šå‡ºç°åªæœ‰ <code>reducers</code> è¿™ç§æƒ…å†µã€‚æˆ‘ä¹Ÿç»™å‡ºäº†è§£å†³ï¼šæ„å»º <code>reducer</code> ç»™ä¸€ä¸ªé»˜è®¤ <code>state</code> é¡¶ç€ï¼ˆä½†æˆ‘è®¤ä¸ºä¸€ä¸ª <code>model</code> åº”è¯¥å¼ºåˆ¶å­˜åœ¨ <code>state</code>ï¼‰</p><p>æ˜¾ç„¶è¿™æ¬¡å¹¶ä¸æƒ³è®²è¿™ä¸ªï¼Œè€Œæ˜¯æƒ³ç†è§£ <code>combineReducers</code><br><a id="more"></a><br><code>combineReducers</code> ä¸€å…±æœ‰ 4 ä¸ªæ–¹æ³•ï¼š</p><ul><li><code>getUndefinedStateErrorMessage</code></li><li><code>getUnexpectedStateShapeWarningMessage</code></li><li><code>assertReducerShape</code></li><li>(ä¸»è¦æ–¹æ³•) <code>combineReducers</code></li></ul><h3 id="getUndefinedStateErrorMessage"><a href="#getUndefinedStateErrorMessage" class="headerlink" title="getUndefinedStateErrorMessage"></a>getUndefinedStateErrorMessage</h3><p>å¾ˆæ˜æ˜¾ï¼Œè¿™æ˜¯ä¸€ä¸ªç”Ÿæˆé”™è¯¯ä¿¡æ¯çš„æ–¹æ³•ã€‚ä¸»è¦æ˜¯é™åˆ¶ <code>reducer</code> å¿…é¡»è¿”å› <code>state</code></p><h3 id="assertReducerShape"><a href="#assertReducerShape" class="headerlink" title="assertReducerShape"></a>assertReducerShape</h3><p>è¿™æ˜¯ä¸€ä¸ªæ£€æŸ¥ <code>reducer</code> æ˜¯å¦åˆè§„çš„æ–¹æ³•ã€‚</p><p>é¦–å…ˆæ¥å—ä¸€ä¸ªé›†åˆæ‰€æœ‰ <code>reducer</code> çš„å¯¹è±¡è¿›è¡Œéå†ï¼Œæ¯ä¸€ä¸ªæŠ½å‡ºæ¥æ£€éªŒï¼Œåšä¸€æ¬¡è¿è¡Œå°è¯•ï¼Œçœ‹æ˜¯å¦èƒ½å¾—åˆ° <code>state</code>ã€‚å¦‚æœå¾—åˆ°çš„ <code>state</code> ä¸º  <code>undefined</code> åˆ™è¯¥ <code>reducer</code> æ˜¯éæ³•çš„ã€‚</p><p>æ–‡ä¸­å¼€å¤´æåˆ°çš„é—®é¢˜æ­£æ˜¯ç”±è¿™é‡ŒæŠ¥å‡ºï¼Œå› ä¸ºæˆ‘ä»¬ç»™å‡ºçš„ <code>reducers</code> ä¸ºç©ºå¯¹è±¡ï¼Œä¸” <code>state</code> ä¸º <code>undefined</code>ï¼Œæ‰€ä»¥è‡ªç„¶ä¼šæŠ¥é”™ã€‚<code>dva</code> çš„å•æµ‹åªæ£€æŸ¥ <code>model</code> çš„åˆç†æ€§ï¼Œä¸” <code>state</code> å…è®¸ä»»ä½•å†…å®¹å’Œ <code>reducers</code> å…è®¸ç©ºå¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘ä¸€ä¸ª <code>model</code> åŒæ—¶ä¸å­˜åœ¨è¿™ä¸¤è€…çš„æƒ…å†µï¼Œä¸è¿‡æ˜¾ç„¶æ²¡æ„ä¹‰ï¼Œæ‰€ä»¥ç›®å‰æ˜¯ä¸æ¸…æ¥š <code>dva</code> å›¢é˜Ÿæ˜¯æ²¡æƒ³åˆ°è¿˜æ˜¯ä¹Ÿè§‰å¾—æ— æ‰€è°“ã€‚</p><h3 id="combineReducers"><a href="#combineReducers" class="headerlink" title="combineReducers"></a>combineReducers</h3><p>è¿™æ˜¯è¿™ç»„æ–¹æ³•ä¸­çš„æ ¸å¿ƒï¼Œè¯¥æ–¹æ³•ä¹Ÿä½œä¸ºé»˜è®¤æ–¹æ³•å¯¼å‡ºã€‚è¿™ç»„æ–¹æ³•çš„ç›®çš„æ˜¯æŠŠä¸€ç¾¤ <code>reducer</code> åˆå¹¶ä¸ºä¸€ä¸ªæ–¹æ³•ä¾› <code>createStore</code> ä½¿ç”¨ã€‚</p><p>ä¸Šæ¥æ˜¯ä¸¤ç»„å˜é‡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æå–å¯¹è±¡ä¸­æ‰€æœ‰å­—æ®µåï¼Œä¸€ä¸ª key å¯¹åº”ä¸€ä¸ª reducer æ–¹æ³•</span></span><br><span class="line"><span class="keyword">const</span> reducerKeys = <span class="built_in">Object</span>.keys(reducers)</span><br><span class="line"><span class="comment">// ç”±ä¸‹é¢å¯å¾—ï¼Œè¯¥å˜é‡ç”¨æ¥æš‚å­˜åŸºæœ¬åˆç†ï¼ˆreducer æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼‰çš„ reducer æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="keyword">const</span> finalReducers = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> reducers[key] === <span class="string">'function'</span>) &#123;</span><br><span class="line">  finalReducers[key] = reducers[key]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¦‚æœåœ¨éç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿˜ä¼šæç¤ºä»…æœ‰ key æ²¡æœ‰æ–¹æ³•çš„å€¼ä»¥æ–¹ä¾¿æˆ‘ä»¬ä¿®æ”¹è°ƒè¯•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†æŠŠåˆæ­¥éªŒè¯è¿‡çš„ reducer å–å‡º</span></span><br><span class="line"><span class="keyword">const</span> finalReducerKeys = <span class="built_in">Object</span>.keys(finalReducers)</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> shapeAssertionError</span><br><span class="line"><span class="comment">// æ”¾å…¥åˆšåˆšç”¨æ¥éªŒè¯ reducer åˆè§„çš„æ–¹æ³•è¿›è¡Œç¬¬äºŒæ¬¡éªŒè¯ï¼Œå¹¶åšé”™è¯¯å¤„ç†</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  assertReducerShape(finalReducers)</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  shapeAssertionError = e</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„ <code>reducer</code>ï¼Œå¹¶å¯¹æ‰€æœ‰ä¼ å…¥çš„åˆè§„çš„ <code>reducer</code> è¿›è¡Œ diffã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯¹æ¯”è®°å½•å˜é‡ä»¥åŠæ–° state</span></span><br><span class="line"><span class="keyword">let</span> hasChanged = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> nextState = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†åˆšåˆšéªŒè¯å®Œçš„ reducer key æ•°ç»„</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; finalReducerKeys.length; i++) &#123;</span><br><span class="line">  <span class="keyword">const</span> key = finalReducerKeys[i]</span><br><span class="line">  <span class="keyword">const</span> reducer = finalReducers[key]</span><br><span class="line">  <span class="comment">// è·å–å½“å‰ state</span></span><br><span class="line">  <span class="keyword">const</span> previousStateForKey = state[key]</span><br><span class="line">  <span class="comment">// é€šè¿‡æ‰§è¡Œ reducer å¾—åˆ°æ–°çš„ state</span></span><br><span class="line">  <span class="keyword">const</span> nextStateForKey = reducer(previousStateForKey, action)</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> nextStateForKey === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> errorMessage = getUndefinedStateErrorMessage(key, action)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(errorMessage)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å¹¶å°†æ–° reducer äº§ç‰©ç»‘å®šåˆ° nextStateï¼Œkey ä¸å˜ã€‚ï¼ˆæ–¹ä¾¿å¯¹æ¯”ï¼‰</span></span><br><span class="line">  nextState[key] = nextStateForKey</span><br><span class="line">  <span class="comment">// å³å¼ç¬¬ä¸€ä¸ª hasChanged è¡¨è¾¾ï¼šå¦‚æœå·²ç»ä¸º true é‚£ä¹ˆå°±è‚¯å®š trueï¼Œæ²¡å¿…è¦å†å»å¯¹æ¯”éªŒè¯</span></span><br><span class="line">  hasChanged = hasChanged || nextStateForKey !== previousStateForKey</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿”å›ï¼šæœ‰æ”¹å˜çš„è¿”å›æ–°çš„ï¼Œæ— æ”¹å˜è¿”å›åŸ stateã€‚</span></span><br><span class="line"><span class="keyword">return</span> hasChanged ? nextState : state</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥è¿™ç»„æ–¹æ³•ç›®çš„å°±æ˜¯æŠŠæ‰€æœ‰å¤æ‚çš„ <code>reducer</code> å’Œ <code>state</code> ç»„æˆæ–°çš„çŠ¶æ€æ ‘ï¼Œç»Ÿä¸€ç®¡ç†ã€‚ä¸šåŠ¡å¼€å‘æ—¶å¯ä»¥æ ¹æ®éœ€æ±‚æ‹†åˆ†å¤šä¸ª <code>reducer</code> å’Œ <code>state</code>ï¼Œä¾¿äºå¼€å‘å’Œç»„ç»‡ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;äº‹å‡ºæœ‰å› ï¼Œå†™ &lt;code&gt;rabbit&lt;/code&gt; çš„æ—¶å€™ï¼Œä¸€æ¡å•æµ‹å‡ºäº†é—®é¢˜&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Reducer _object returned undefined during initialization.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æƒ³æ¥å¿…ç„¶æ˜¯ &lt;code&gt;reducer&lt;/code&gt; ç¼ºå°‘é»˜è®¤çš„ &lt;code&gt;state&lt;/code&gt; æ‰€è‡´ï¼Œ&lt;del&gt;ä½†æ˜¯æˆ‘çš„å•æµ‹æ˜¯ä» &lt;code&gt;dva&lt;/code&gt; ç›´æ¥æ‹¿è¿‡æ¥æ”¹æ”¹å°±ç”¨çš„ï¼Œåº”è¯¥ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯å“ªé‡Œå‡ºäº†å·®é”™ã€‚åé¢å‘ç°äº†ï¼Œè™½ç„¶ &lt;code&gt;dva&lt;/code&gt; å¯ä»¥æ¥å— &lt;code&gt;reducers&lt;/code&gt; æ˜¯ç©ºå¯¹è±¡ï¼Œä½†åº”ç”¨è¿è¡Œèµ·æ¥æœ‰ä¸€æ ·é—®é¢˜ã€‚&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;ä¸»è¦æ˜¯è¿™ä¸ªé—®é¢˜æ— ä¼¤å¤§é›…ï¼Œ&lt;code&gt;model&lt;/code&gt; ä¸ä¼šå‡ºç°åªæœ‰ &lt;code&gt;reducers&lt;/code&gt; è¿™ç§æƒ…å†µã€‚æˆ‘ä¹Ÿç»™å‡ºäº†è§£å†³ï¼šæ„å»º &lt;code&gt;reducer&lt;/code&gt; ç»™ä¸€ä¸ªé»˜è®¤ &lt;code&gt;state&lt;/code&gt; é¡¶ç€ï¼ˆä½†æˆ‘è®¤ä¸ºä¸€ä¸ª &lt;code&gt;model&lt;/code&gt; åº”è¯¥å¼ºåˆ¶å­˜åœ¨ &lt;code&gt;state&lt;/code&gt;ï¼‰&lt;/p&gt;
&lt;p&gt;æ˜¾ç„¶è¿™æ¬¡å¹¶ä¸æƒ³è®²è¿™ä¸ªï¼Œè€Œæ˜¯æƒ³ç†è§£ &lt;code&gt;combineReducers&lt;/code&gt;&lt;br&gt;
    
    </summary>
    
      <category term="å‰ç«¯æ€è€ƒ" scheme="https://colmugx.github.io/blog/categories/%E5%89%8D%E7%AB%AF%E6%80%9D%E8%80%83/"/>
    
    
      <category term="Redux" scheme="https://colmugx.github.io/blog/tags/Redux/"/>
    
  </entry>
  
  <entry>
    <title>çœ‹è¿‡ Redux ä¹‹åï¼Œæˆ‘å†™äº†ä¸€ä¸ªä¸è´Ÿè´£ä»»çš„çŠ¶æ€ç®¡ç†</title>
    <link href="https://colmugx.github.io/blog/2019/03/02/about-redux/"/>
    <id>https://colmugx.github.io/blog/2019/03/02/about-redux/</id>
    <published>2019-03-02T10:00:19.000Z</published>
    <updated>2019-03-25T06:39:45.803Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬ç°åœ¨å°ç¨‹åºéœ€è¦ä½¿ç”¨çŠ¶æ€ç®¡ç†ï¼Œä½†å› ä¸ºé¡¹ç›®ä½“é‡å®åœ¨å¾ˆå°åˆæ²¡å¿…è¦ä½¿ç”¨ redux æˆ–è€… mobxã€‚æ‰€ä»¥æˆ‘æ‰“ç®—ä¸è´Ÿè´£ä»»çš„å†™ä¸€ä¸ªã€‚</p><h3 id="createStore"><a href="#createStore" class="headerlink" title="createStore"></a>createStore</h3><p>Redux æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œæä¾›åŸºç¡€çš„åŠŸèƒ½ã€‚<code>createStore</code>æ¥å—ä¸‰ä¸ªå‚æ•°ï¼š<code>reducer</code>, <code>initialState</code>, <code>enhancer</code>ã€‚å‰ä¸¤ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œ<code>enhancer</code>ä¸»è¦ç”¨åœ¨æ¥å—ä¸­é—´ä»¶ä¸­ã€‚è¿”å›äº§ç‰©æˆ‘ä»¬ä¸»è¦ä½¿ç”¨ä¸‰ä¸ªæ–¹æ³•ï¼š<code>getState</code>, <code>dispatch</code>, <code>subscribe</code>ã€‚</p><ul><li><code>getState</code>ï¼šè·å–å½“å‰ state å€¼</li><li><code>subscribe</code>ï¼šæ¥å—ç›‘å¬ï¼Œå­˜å…¥ <code>listeners</code> æ± ä¸­</li><li><code>dispatch</code>ï¼šå¤„ç† <code>reducer</code> æ“ä½œï¼Œè§¦å‘ <code>listeners</code> æ–¹æ³•<a id="more"></a>æ‰€æœ‰æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿éƒ½äº†è§£æ¸…æ¥šäº†ï¼Œå…¶ä»–çš„åŠŸèƒ½å’Œè¾¹ç¼˜ä¿æŠ¤å…ˆä¸è€ƒè™‘ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¯´æ˜¯ä¸è´Ÿè´£ä»»çš„çŠ¶æ€ç®¡ç†(é€ƒ</li></ul><h3 id="copy"><a href="#copy" class="headerlink" title="copy"></a>copy</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> currentState = state || &#123;&#125;</span><br><span class="line">  <span class="keyword">let</span> listeners = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; getState, dispatch, subscribe &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> currentState</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">subscribe</span>(<span class="params">listener</span>) </span>&#123;</span><br><span class="line">    listeners.push(listener)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">dispatch</span>(<span class="params">action</span>) </span>&#123;</span><br><span class="line">    action.call(<span class="keyword">this</span>, currentState)</span><br><span class="line">    listeners.forEach(<span class="function"><span class="params">f</span> =&gt;</span> f.call(<span class="literal">null</span>))</span><br><span class="line">    <span class="keyword">return</span> currentState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¿®æ”¹äº†ä¸€äº›ï¼šè®¢é˜…æ²¡æœ‰è¿”å›å–æ¶ˆè®¢é˜…æ“ä½œã€‚åŸå› æ˜¯æ‡’ã€‚ã€‚<code>dispatch</code> å¹¶ä¸æ˜¯æ¥å—ä¸€ä¸ªçº¯å‡½æ•°è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œè€Œæ˜¯ç›´æ¥ç”±ä¸šåŠ¡ä¿®æ”¹çŠ¶æ€ç„¶åé€šçŸ¥æ›´æ–°ï¼Œæ‰€ä»¥è¿™å…¶å®ä¸èƒ½ç®—æ˜¯ä¸€ä¸ª redux äº§ç‰©ï¼Œå¹¶ä¸”è¿™å¾ˆä¸å¯æ§ã€‚æ‰€ä»¥è¿™æ›´åƒæ˜¯ä¸ºäº†åˆ©ç”¨<code>react-redux</code>æˆ–è€…<code>taro-redux</code>è€Œäº§ç”Ÿçš„ä¸€ç§çŠ¶æ€ä¿å­˜æ–¹å¼ã€‚</p><p>åŸå› è¿˜æ˜¯ä¸šåŠ¡æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸ºäº†å­˜å‡ ä¸ªä¸æ˜¯å¾ˆå…³é”®çš„æ•°æ®ä½†ä¸æƒ³ä½¿ç”¨å°ç¨‹åºçš„ <code>storage</code> å»ç®¡ç†è€Œäº§ç”Ÿçš„æ–¹æ³•ã€‚ç°åœ¨ä¸ä»…æ»¡è¶³ä¸šåŠ¡ï¼Œå‹ç¼©åä¹Ÿåªæœ‰ <code>270b</code> å·¦å³ï¼Œçœç‚¹ç©ºé—´ç»™å°ç¨‹åºä»£ç ï¼Œæœ‰ç‚¹èµšçš„å®é™…ä¸Šã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬ç°åœ¨å°ç¨‹åºéœ€è¦ä½¿ç”¨çŠ¶æ€ç®¡ç†ï¼Œä½†å› ä¸ºé¡¹ç›®ä½“é‡å®åœ¨å¾ˆå°åˆæ²¡å¿…è¦ä½¿ç”¨ redux æˆ–è€… mobxã€‚æ‰€ä»¥æˆ‘æ‰“ç®—ä¸è´Ÿè´£ä»»çš„å†™ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;h3 id=&quot;createStore&quot;&gt;&lt;a href=&quot;#createStore&quot; class=&quot;headerlink&quot; title=&quot;createStore&quot;&gt;&lt;/a&gt;createStore&lt;/h3&gt;&lt;p&gt;Redux æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œæä¾›åŸºç¡€çš„åŠŸèƒ½ã€‚&lt;code&gt;createStore&lt;/code&gt;æ¥å—ä¸‰ä¸ªå‚æ•°ï¼š&lt;code&gt;reducer&lt;/code&gt;, &lt;code&gt;initialState&lt;/code&gt;, &lt;code&gt;enhancer&lt;/code&gt;ã€‚å‰ä¸¤ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œ&lt;code&gt;enhancer&lt;/code&gt;ä¸»è¦ç”¨åœ¨æ¥å—ä¸­é—´ä»¶ä¸­ã€‚è¿”å›äº§ç‰©æˆ‘ä»¬ä¸»è¦ä½¿ç”¨ä¸‰ä¸ªæ–¹æ³•ï¼š&lt;code&gt;getState&lt;/code&gt;, &lt;code&gt;dispatch&lt;/code&gt;, &lt;code&gt;subscribe&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;getState&lt;/code&gt;ï¼šè·å–å½“å‰ state å€¼&lt;/li&gt;
&lt;li&gt;&lt;code&gt;subscribe&lt;/code&gt;ï¼šæ¥å—ç›‘å¬ï¼Œå­˜å…¥ &lt;code&gt;listeners&lt;/code&gt; æ± ä¸­&lt;/li&gt;
&lt;li&gt;&lt;code&gt;dispatch&lt;/code&gt;ï¼šå¤„ç† &lt;code&gt;reducer&lt;/code&gt; æ“ä½œï¼Œè§¦å‘ &lt;code&gt;listeners&lt;/code&gt; æ–¹æ³•
    
    </summary>
    
      <category term="å®è·µå°è¯•" scheme="https://colmugx.github.io/blog/categories/%E5%AE%9E%E8%B7%B5%E5%B0%9D%E8%AF%95/"/>
    
    
      <category term="JavaScript" scheme="https://colmugx.github.io/blog/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä½èµŒç‹—å‰ç«¯çš„è‡ªæˆ‘ä¿®å…»</title>
    <link href="https://colmugx.github.io/blog/2018/11/19/gamble-fn/"/>
    <id>https://colmugx.github.io/blog/2018/11/19/gamble-fn/</id>
    <published>2018-11-19T09:57:59.000Z</published>
    <updated>2018-11-20T07:14:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸¤ä¸ªæœˆå·¥ä½œå·¨å¤šï¼Œç›´åˆ°ä»Šå¤©æ‰æœ‰æ—¶é—´å†™ç‚¹éªšä¸œè¥¿ã€‚</p><p>å¯æ˜¯è¦å†™ç‚¹ä»€ä¹ˆæ¯”è¾ƒå¥½å‘¢ï¼Ÿè¿™æ—¶å€™çœ‹åˆ°äº†éš”å£æ¡Œé¢ä¸Šæ”¾ç€ä¸€å¼ ç¦å½©ï¼Œæˆ‘è„‘å­é‡Œæœ‰ç”»é¢äº†ã€‚ï¼ˆæ‰€ä»¥è¿™ä½èµŒç‹—ä¸æ˜¯æˆ‘ï¼Œæˆ‘ä¸ä¹°å½©ç¥¨ï¼‰</p><p>ä¸ºäº†æ–¹ä¾¿ä»¥åæ”¯æŒæ›´å¤šçš„å½©ç¥¨ï¼Œç›´æ¥æä¸ªç±»</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Gamble &#123;</span><br><span class="line">    <span class="keyword">static</span> dualColor(red: <span class="built_in">number</span> = <span class="number">6</span>, blue: <span class="built_in">number</span> = <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> reds: [<span class="built_in">number</span>, <span class="built_in">number</span>] = [<span class="number">1</span>, <span class="number">33</span>];</span><br><span class="line">        <span class="keyword">const</span> blues: [<span class="built_in">number</span>, <span class="built_in">number</span>] = [<span class="number">1</span>, <span class="number">16</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> [<span class="keyword">this</span>.randomVal(reds, red), <span class="keyword">this</span>.randomVal(blues, blue)];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> randomVal(</span><br><span class="line">        fromto: <span class="built_in">number</span>[],</span><br><span class="line">        total: <span class="built_in">number</span>,</span><br><span class="line">        temp: <span class="built_in">number</span>[] = [],</span><br><span class="line">    ): <span class="built_in">number</span>[] &#123;</span><br><span class="line">        <span class="keyword">const</span> [head, ...body] = (!temp.length</span><br><span class="line">            ? [...Array(fromto[<span class="number">1</span>]).keys()]</span><br><span class="line">                  .map(<span class="function"><span class="params">item</span> =&gt;</span> item + <span class="number">1</span>)</span><br><span class="line">                  .splice(fromto[<span class="number">0</span>] - <span class="number">1</span>)</span><br><span class="line">            : fromto</span><br><span class="line">        ).sort(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>);</span><br><span class="line">        <span class="keyword">return</span> !total</span><br><span class="line">            ? temp</span><br><span class="line">            : <span class="keyword">this</span>.randomVal(body, total - <span class="number">1</span>, temp.concat(head));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è¿™ä¸¤ä¸ªæœˆå·¥ä½œå·¨å¤šï¼Œç›´åˆ°ä»Šå¤©æ‰æœ‰æ—¶é—´å†™ç‚¹éªšä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;å¯æ˜¯è¦å†™ç‚¹ä»€ä¹ˆæ¯”è¾ƒå¥½å‘¢ï¼Ÿè¿™æ—¶å€™çœ‹åˆ°äº†éš”å£æ¡Œé¢ä¸Šæ”¾ç€ä¸€å¼ ç¦å½©ï¼Œæˆ‘è„‘å­é‡Œæœ‰ç”»é¢äº†ã€‚ï¼ˆæ‰€ä»¥è¿™ä½èµŒç‹—ä¸æ˜¯æˆ‘ï¼Œæˆ‘ä¸ä¹°å½©ç¥¨ï¼‰&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ–¹ä¾¿ä»¥åæ”¯æŒæ›´å¤šçš„å½©ç¥¨ï¼Œç›´æ¥æä¸ªç±»&lt;/p&gt;
&lt;figure class=&quot;hig
      
    
    </summary>
    
      <category term="æ›²è‹‘æ‚å›" scheme="https://colmugx.github.io/blog/categories/%E6%9B%B2%E8%8B%91%E6%9D%82%E5%9D%9B/"/>
    
    
      <category term="TypeScript" scheme="https://colmugx.github.io/blog/tags/TypeScript/"/>
    
  </entry>
  
  <entry>
    <title>è®°åœ¨NPMæŠ¢ç©ºåŒ…åçš„ç»å†</title>
    <link href="https://colmugx.github.io/blog/2018/07/12/kill-parentless-on-npm/"/>
    <id>https://colmugx.github.io/blog/2018/07/12/kill-parentless-on-npm/</id>
    <published>2018-07-12T07:10:23.000Z</published>
    <updated>2019-03-22T16:07:34.681Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼ºçƒˆè°´è´£æŸäº›å¤§å‚ï¼Œå‰ç«¯æˆ–è€…è¯´ JavaScript æ˜¯ä¸€ä¸ªæå…¶ä¾èµ–ç¤¾åŒºç¯å¢ƒçš„è¯­è¨€ï¼Œä½ ä»¬åœ¨æ‹›äººä¹‹å‰èƒ½ä¸èƒ½å…ˆè°ƒæŸ¥ä¸€ä¸‹å‡†æ–°äººæœ‰æ²¡æœ‰åœ¨ç¤¾åŒºä¸ºéä½œæ­¹ï¼Ÿ</p></blockquote><p>å¹´å‰æƒ³æå®š<code>React</code>çš„æ—¶å€™æƒ³äº†ä¸ªéªšæ“ä½œï¼šå°è¯•ç”¨<code>React</code>çš„æ€è·¯å»åš<code>Vue</code>çš„äº‹æƒ…ã€‚åˆè¯ç”Ÿäº†ã€ŒVueç”Ÿæ€ç»Ÿä¸€å¯ä»¥èšåˆã€çš„éªšæƒ³æ³•ï¼Œå¼€å§‹äº§ç”Ÿåš<code>Ahri</code>çš„å¿µå¤´ã€‚æƒ³ç€é‚£å¾—æä¸ª npm åŒ…å§ï¼Œå­¤å„¿ä¸Šçº¿äº†ã€‚</p><p>å˜›ï¼Œåœ¨ npm æ‹¿ã€Šè‹±é›„è”ç›Ÿã€‹è‹±é›„åå­—æŠ¢æ³¨åŒ…åçš„åšæ³•éƒ½å¾ˆå¼±æ™ºäº†ï¼Œè¿˜â€œå¤§ä¹‰å‡›ç„¶â€çš„åœ¨æè¿°é‡Œå†™ç€ï¼š<code>League of Legends hero.</code></p><p>å…³äºç¬¬ä¸€æ¬¡é‡åˆ°å®ƒçš„æ—¶å€™ï¼Œæˆ‘å°±æƒ³ç®—äº†ï¼Œé‡æ–°æ‰¾åˆé€‚çš„åå­—å§ï¼Œä½†åæ¥å› ä¸ºå…¶ä»–åŸå› å°±æç½®äº†ã€‚ç°åœ¨é‡æ–°å›å‘ï¼Œä¾ç„¶é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ¬¡æˆ‘ä¸å¿äº†ï¼Œæˆ‘æ‰“ç®—æ‰¾ npm è‚›ä»–ï¼</p><a id="more"></a><h3 id="å¯»æ‰¾å…¥å£"><a href="#å¯»æ‰¾å…¥å£" class="headerlink" title="å¯»æ‰¾å…¥å£"></a>å¯»æ‰¾å…¥å£</h3><p>é¦–å…ˆçœ‹äº†<code>profile</code>é¡µï¼Œå‘ç°æ²¡æœ‰ä¸¾æŠ¥å…¥å£ã€‚ï¼ˆä»è¿™é‡Œè¿›äº†Twitterï¼Œè®©äººæ„Ÿè§‰è¿™æ˜¯ä¸€ä¸ªä¸ºäº†è£…é€¼è€Œæ´»ç€çš„äººã€‚</p><p>çœ‹çœ‹ npm æœ¬èº«é¡µé¢æœ‰æ²¡æœ‰ä»€ä¹ˆå…¥å£ï¼Œæ¯”å¦‚â€œè”ç³»æˆ‘ä»¬â€ä¹‹ç±»çš„é‚®ç®±æ€»æœ‰å§ï¼Œæœ€ååœ¨æœ€ä¸‹é¢æ‰¾åˆ°äº†<code>Reporting Abuse</code>ã€‚</p><p>ä¸å¾—ä¸è¯´ npm è¿â€œå› ä¸ºåå­—æ‰“èµ·æ¥â€çš„å¯èƒ½éƒ½æƒ³åˆ°äº†ï¼Œé‚£â€œå› ä¸ºå­¤å„¿æ“ä½œâ€åº”è¯¥ä¹Ÿä¼šåˆ—å…¥å…¶ä¸­å§ï¼Œæœä¸å…¶ç„¶ã€‚åœ¨éªšæ‰°ä¸¾æŠ¥ä¸€æ æ‰¾åˆ°äº†æ§ç©ºåŒ…çš„æƒ…å†µï¼šå¦‚æœæœ‰ç”¨æˆ·æ³¨å†Œæ— ç”¨ç©ºåŒ…ï¼Œæˆ–è€…åˆ©ç”¨åŒ…è¿›è¡Œä¹±ä¸ƒå…«ç³Ÿçš„æ´»åŠ¨ï¼Œå¯èƒ½æœ‰ä¸¤ç§æªæ–½ï¼šban äº†è¿™ä¸ªç”¨æˆ·ï¼›æ¸…é™¤è¿™äº›ä¸œè¥¿ã€‚</p><p>æˆ‘ä¸€çœ‹åˆ°å¯ä»¥ ban äº†ä»–æˆ‘å°±å¯å…´å¥‹äº†ï¼Œäºæ˜¯ï¼Œå‘é‚®ä»¶èµ°èµ·ã€‚</p><h3 id="é‡‡å–è¡ŒåŠ¨"><a href="#é‡‡å–è¡ŒåŠ¨" class="headerlink" title="é‡‡å–è¡ŒåŠ¨"></a>é‡‡å–è¡ŒåŠ¨</h3><p>æ“èµ·æˆ‘400åˆ†çš„4çº§æ°´å¹³è‹±è¯­ï¼Œå°±å¼€å§‹å†™ã€‚</p><blockquote><p>hi,<br>here a profile page: xxxxxx.</p><p>this account keep a lot of empty packages which name as a role name in a game, it cause difficulty for me.</p><p>I NEED HELP! THANK YOU!</p></blockquote><p>è¿‡äº†ä¸€ä¼šæ”¶åˆ°å›ä¿¡ï¼š</p><blockquote><p>Our support hours are Monday through Friday, 9:00AM - 6:00PM PST, excluding US holidays.</p><p>Your request is being reviewed by our support staff and weâ€™ll be responding soon.</p><p>To add additional comments, reply to this email.</p></blockquote><p>å™¢ï¼Œæ²¡åœ¨å·¥ä½œæ—¶é—´è¿˜è¡Œã€‚è¿‡äº†å‡ ç§’åˆæ”¶åˆ°ä¸€å°é‚®ä»¶ï¼š</p><blockquote><p>Hey there,</p><p>Thank you for reaching out. We hope youâ€™re having a great week thus far, and are looking forward to responding to your request.</p><p>The npm support staff will be off on Wednesday, July 4th in observance of Independence Day. Due to this, you may experience some delay in expected reply times.</p><p>Thanks for your patience.</p></blockquote><p>ç‹—å±è¿˜å¸¦æ”¾å‡çš„ï¼Ÿç¾å›½å‘˜å·¥çœŸçš„èˆ’æœå•Šï¼Œä¸åŠ ç­ï¼ŒèŠ‚å‡æ—¥æ”¾æ»¡ã€‚åƒæˆ‘ä»¬è¿™ç§997èŠ‚å‡æ—¥è¿˜æ”¾ä¸æ»¡çš„ç®€ç›´å—åˆ°äº†6æŠŠæ— å°½çš„æš´å‡»ã€‚</p><p>ç­‰äº†å‡ å¤©å‘ç°ä¸å¯¹ï¼Œæ²¡ç†æˆ‘ï¼Œå†æŒ‰ç…§ç¬¬ä¸€å°å‘äº†ä¸€æ¬¡ï¼Œè¿™æ¬¡è¿‡äº†åŠå¤©å¤šæ‰å›ã€‚è¿™æ¬¡å·®ç‚¹å°±æ€•æˆ‘æ°”åˆ°äº†ï¼Œå¤§æ¦‚çš„æ„æ€å°±æ˜¯ä½ ä¸Šæ¬¡çš„ ticket è¿˜æ²¡è§£å†³ï¼Œå¦‚æœä½ æ²¡é—®é¢˜äº†æˆ‘ä»¬å°±å…³äº†ã€‚ã€‚ã€‚ç¾å›½äººä¸Šç­éƒ½è¿™ä¹ˆæ‘¸çš„ï¼Ÿ</p><p>åˆè¿‡äº†åŠå¤©æ”¶åˆ°ä¸€å°é‚®ä»¶ï¼Œè¿™æ¬¡æ˜¯æŠ€æœ¯å®¢æœï¼ˆé‚®ä»¶æ˜¯æœ‰äººåçš„å¤§ä½¬ï¼‰å‘æ¥çš„ï¼š</p><blockquote><p>Thanks for reaching out.</p><p>I was not able to find an account associated with (æˆ‘å‘ä¿¡çš„é‚®ç®±). Was there a specific one of these userâ€™s package names you are interested in for a project?</p><p>If so, we may assist you with a transfer request or granting access to that package, depending on the package and contents.</p></blockquote><p>æœ‰ç‚¹ç€æ€¥ï¼Œçœ‹äº†ç¬¬ä¸€å¥ä¹‹åï¼Œä¸‹é¢æ²¡ä»”ç»†çœ‹ï¼Œå°±æœ‰ç‚¹æƒ³æä»–ï¼Œæˆ‘å°±å›ä¿¡äº†ã€‚ä¿¡çš„å†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·ï¼šè°¢è°¢ä½ çš„å›å¤ã€‚è¿™æ˜¯æˆ‘çš„é¡¹ç›®åå­—ï¼ˆå‘äº†<code>Ahri</code>çš„GitHub Repoï¼‰ï¼Œè¿™æ˜¯æˆ‘çš„ npm è´¦å·ï¼ˆæ„è¯†åˆ°å‘ä¿¡çš„è´¦å·ä¸å¯¹ï¼‰ã€‚æˆ‘å¯¹<code>Ahri</code>æœ‰å…´è¶£ï¼Œä½†ä»–æ˜¯ä¸ªç©ºçš„è€Œä¸”è¢«å ç”¨äº†ï¼Œæˆ‘æ²¡åŠæ³•ä½¿ç”¨ï¼Œå¯¹å§ï¼Ÿè¿˜æœ‰è¿™ä¸ª B æ¶æ„å ç”¨äº†å¤§é‡çš„ç©ºåŒ…ï¼ˆè·Ÿä¸Šå­¤å„¿è´¦å·ï¼‰ï¼Œä»–æ˜¯ä¸æ˜¯åŒæ—¶è¿åäº†è§„åˆ™ï¼Œæ˜¯ä¸æ˜¯åº”è¯¥æœ‰æ‰€åŠ¨ä½œï¼Ÿ</p><p>ç¬¬äºŒå¤©ï¼ˆæœ‰æ—¶å·®ï¼‰ï¼Œæ”¶åˆ°äº†å›ä¿¡ï¼Œè¯´åŒ…åå·²ç»è½¬ç§»åˆ°æˆ‘çš„è´¦å·ä¸Šï¼š</p><blockquote><p>Thanks for getting back to me with that information.</p><p>Itâ€™s all yours now, but you wonâ€™t be able to re-use any version numbers used by the previous author. In fact, Iâ€™d suggest publishing your first update as a major release, i.e., v1.0.0. Please publish an update to the package as soon as possible with your code.</p></blockquote><p>æˆ‘ä¸Šäº†æˆ‘çš„ npm çœ‹äº†ä¸€çœ¼ï¼ŒæƒŠäº†..è¿™å°±æ‹¿åˆ°äº†..</p><p>ä½†å¹¶æ²¡æœ‰è§£æ”¾å…¶ä»–çš„ç©ºåŒ…å’Œ <strong>ban äº†ä»–</strong>ï¼Œè¿™ç‚¹æˆ‘æœ‰ç‚¹å¤±æœ›ã€‚æ€»ä¹‹ï¼Œè¦åˆ°æƒ³è¦çš„åŒ…ï¼Œè¿™æ‰æ˜¯æƒ³è¦çš„ç»“æœã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;å¼ºçƒˆè°´è´£æŸäº›å¤§å‚ï¼Œå‰ç«¯æˆ–è€…è¯´ JavaScript æ˜¯ä¸€ä¸ªæå…¶ä¾èµ–ç¤¾åŒºç¯å¢ƒçš„è¯­è¨€ï¼Œä½ ä»¬åœ¨æ‹›äººä¹‹å‰èƒ½ä¸èƒ½å…ˆè°ƒæŸ¥ä¸€ä¸‹å‡†æ–°äººæœ‰æ²¡æœ‰åœ¨ç¤¾åŒºä¸ºéä½œæ­¹ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¹´å‰æƒ³æå®š&lt;code&gt;React&lt;/code&gt;çš„æ—¶å€™æƒ³äº†ä¸ªéªšæ“ä½œï¼šå°è¯•ç”¨&lt;code&gt;React&lt;/code&gt;çš„æ€è·¯å»åš&lt;code&gt;Vue&lt;/code&gt;çš„äº‹æƒ…ã€‚åˆè¯ç”Ÿäº†ã€ŒVueç”Ÿæ€ç»Ÿä¸€å¯ä»¥èšåˆã€çš„éªšæƒ³æ³•ï¼Œå¼€å§‹äº§ç”Ÿåš&lt;code&gt;Ahri&lt;/code&gt;çš„å¿µå¤´ã€‚æƒ³ç€é‚£å¾—æä¸ª npm åŒ…å§ï¼Œå­¤å„¿ä¸Šçº¿äº†ã€‚&lt;/p&gt;
&lt;p&gt;å˜›ï¼Œåœ¨ npm æ‹¿ã€Šè‹±é›„è”ç›Ÿã€‹è‹±é›„åå­—æŠ¢æ³¨åŒ…åçš„åšæ³•éƒ½å¾ˆå¼±æ™ºäº†ï¼Œè¿˜â€œå¤§ä¹‰å‡›ç„¶â€çš„åœ¨æè¿°é‡Œå†™ç€ï¼š&lt;code&gt;League of Legends hero.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…³äºç¬¬ä¸€æ¬¡é‡åˆ°å®ƒçš„æ—¶å€™ï¼Œæˆ‘å°±æƒ³ç®—äº†ï¼Œé‡æ–°æ‰¾åˆé€‚çš„åå­—å§ï¼Œä½†åæ¥å› ä¸ºå…¶ä»–åŸå› å°±æç½®äº†ã€‚ç°åœ¨é‡æ–°å›å‘ï¼Œä¾ç„¶é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ¬¡æˆ‘ä¸å¿äº†ï¼Œæˆ‘æ‰“ç®—æ‰¾ npm è‚›ä»–ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="æ›²è‹‘æ‚å›" scheme="https://colmugx.github.io/blog/categories/%E6%9B%B2%E8%8B%91%E6%9D%82%E5%9D%9B/"/>
    
    
      <category term="colmugx" scheme="https://colmugx.github.io/blog/tags/colmugx/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘å°±å†™ä¸ªæ–¹æ³•ï¼Œè¿™ä¹ˆéº»çƒ¦ï¼Ÿ</title>
    <link href="https://colmugx.github.io/blog/2018/07/04/different-function/"/>
    <id>https://colmugx.github.io/blog/2018/07/04/different-function/</id>
    <published>2018-07-04T07:06:43.000Z</published>
    <updated>2019-03-22T16:07:34.681Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆJavaScriptå®šä¹‰ä¸€ä¸ªå‡½æ•°æœ‰é‚£ä¹ˆå¤šç§å½¢å¼ï¼Œæ˜¯å†å²æ®‹ç•™è¿˜æ˜¯ä¸ºäº†è£…é€¼ï¼Ÿç ”ç©¶äº†ä¸€ä¸‹å‘ç°è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><p>JavaScriptä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ä¸»è¦å¯ä»¥åˆ†æˆä¸¤ç§å½¢å¼ï¼š</p><ul><li>å‡½æ•°å£°æ˜</li><li>å‡½æ•°è¡¨è¾¾å¼</li></ul><a id="more"></a><h3 id="å‡½æ•°å£°æ˜"><a href="#å‡½æ•°å£°æ˜" class="headerlink" title="å‡½æ•°å£°æ˜"></a>å‡½æ•°å£°æ˜</h3><p>å£°æ˜ä½“æ˜¯æœ€æ™®é€šçš„ï¼Œå…¶ä»–è¯­è¨€ä¹Ÿç›¸è¿‘çš„ä¸€ç§æ–¹å¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><p>ä¸è¿‡ï¼Œæ¯•ç«Ÿæ˜¯ã€Œå‡½æ•°å°±æ˜¯çˆ¸çˆ¸ã€çš„JavaScriptï¼å®ƒæœ‰ä¸€ä¸ªç‰¹æ€§ï¼šå‡½æ•°æå‡ã€‚</p><blockquote><p>å‡½æ•°æå‡ï¼šæŠŠæ‰€æœ‰å‡½æ•°æå‡åˆ°å½“å‰ä½œç”¨åŸŸä¸Šï¼Œä»è€Œåšåˆ°äº†å¯ä»¥â€œæœªå£°æ˜å…ˆè°ƒç”¨â€ã€‚</p></blockquote><h3 id="å‡½æ•°è¡¨è¾¾å¼"><a href="#å‡½æ•°è¡¨è¾¾å¼" class="headerlink" title="å‡½æ•°è¡¨è¾¾å¼"></a>å‡½æ•°è¡¨è¾¾å¼</h3><p>è¿™å¯èƒ½æ˜¯ç›®å‰ç”¨çš„æœ€å¤šçš„å£°æ˜æ–¹å¼ï¼Œå› ä¸ºå¯ä»¥æ­é…ç®­å¤´å‡½æ•°å‡è£…è‡ªå·±ç”¨çš„æ˜¯å‡½æ•°å¼ç¼–ç¨‹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">const</span> funcA = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"></span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><p>ä½†å˜é‡å—ä½œç”¨åŸŸå½±å“ï¼Œæ‰€ä»¥<code>const</code>å’Œ<code>let</code>å¹¶æ²¡æœ‰å˜é‡æå‡çš„èƒ½åŠ›ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">funcA(<span class="number">1</span>) <span class="comment">// ReferenceError: funcA is not defined</span></span><br><span class="line"><span class="keyword">const</span> funcA = <span class="function"><span class="params">a</span> =&gt;</span> a</span><br></pre></td></tr></table></figure></p><p>ç‡ƒé¹…ï¼Œè¿™æ‰åˆšåˆšå¼€å§‹â€¦â€¦</p><h3 id="åŒ¿å-amp-å…·å"><a href="#åŒ¿å-amp-å…·å" class="headerlink" title="åŒ¿å &amp; å…·å"></a>åŒ¿å &amp; å…·å</h3><p>åŒ¿åå°±æ˜¯ä¸Šé¢é‚£ç§ï¼Œå…·åå°±æ˜¯ç»™å‡½æ•°æœ¬ä½“å†èµ·ä¸€ä¸ªåå­—ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure></p><p>è¿™æ ·æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿåé¢é‚£ä¸ªåå­—åˆä¸èƒ½ç”¨ï¼ç­”æ¡ˆè¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><p>é¦–å…ˆæœ‰ä¸€ä¸ªå‡½æ•°åæ¨æ–­ï¼Œæ¯”å¦‚ä¸Šé¢è¿™ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆ<code>func.name</code>ä¼šè¿”å›<code>funcName</code>ã€‚å¦‚æœåŒ¿åå‡½æ•°çš„è¯<code>[fn].name</code>ä¼šè¿”å›<code>&#39;&#39;</code>ã€‚å…¶æ¬¡è¿™ä¸ªåå­—å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚å½“ç„¶äº†æŒ‡ä»£çš„å°±æ˜¯è‡ªå·±äº†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a &lt; <span class="number">0</span> ? b : funcName(a+<span class="number">1</span>-b, a)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func(<span class="number">431</span>, <span class="number">151</span>) <span class="comment">// 281</span></span><br><span class="line">funcName(<span class="number">431</span>, <span class="number">151</span>) <span class="comment">// ReferenceError: funcName is not defined</span></span><br><span class="line"><span class="built_in">console</span>.log(func.name) <span class="comment">// funcName</span></span><br><span class="line"><span class="keyword">typeof</span> funcName === <span class="string">'function'</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥è¿™ç§æ–¹å¼æœ€é€‚åˆé€’å½’å‡½æ•°äº†ã€‚</p><h3 id="å‡½æ•°è¡¨è¾¾å¼ä¾ç„¶æ˜¯ä¸ªå¸¸-å˜é‡"><a href="#å‡½æ•°è¡¨è¾¾å¼ä¾ç„¶æ˜¯ä¸ªå¸¸-å˜é‡" class="headerlink" title="å‡½æ•°è¡¨è¾¾å¼ä¾ç„¶æ˜¯ä¸ªå¸¸/å˜é‡"></a>å‡½æ•°è¡¨è¾¾å¼ä¾ç„¶æ˜¯ä¸ªå¸¸/å˜é‡</h3><p>æŠŠå®ƒå½“åšä¸€ä¸ªâ€œæ–¹ç¨‹â€æ¥çœ‹å§ï¼Œå…³é”®è¯å·²ç»å†³å®šäº†è¿™ä¸ªâ€œé‡â€ä¼šä»¥ä»€ä¹ˆå½¢å¼å­˜åœ¨ï¼Œæ¯”å¦‚<code>var</code>å’Œ<code>let</code>æ˜¯å˜é‡ï¼Œ<code>const</code>æ˜¯å¸¸é‡ï¼Œå¹¶ä¸”<code>let</code>è¿˜æœ‰ä½œç”¨åŸŸèŒƒå›´ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> funcA = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'A'</span>)</span><br><span class="line">funcA() <span class="comment">// A</span></span><br><span class="line">funcA = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'AA'</span>) <span class="comment">// TypeError: Assignment to constant variable.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> funcB = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'B'</span>)</span><br><span class="line">funcB() <span class="comment">// B</span></span><br><span class="line">funcB = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'BB'</span>)</span><br><span class="line">funcB() <span class="comment">// BB</span></span><br></pre></td></tr></table></figure></p><p>é¢˜å¤–è¯ï¼šé‚£ä¹ˆå°±æœ‰ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œå‡½æ•°è¡¨è¾¾å¼æŒ‰é“ç†æ¥è®²æ˜¯â€œçµæ´»çš„â€ï¼Œé‚£ä¹ˆä¸‹é¢è¿™ä¸ªå‡½æ•°ä¼šæ˜¯ä»€ä¹ˆç»“æœï¼Ÿ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'B'</span>)</span><br><span class="line">&#125;</span><br><span class="line">funcB() <span class="comment">// BB</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcB</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'BB'</span>)</span><br><span class="line">&#125;</span><br><span class="line">funcB() <span class="comment">// BB</span></span><br></pre></td></tr></table></figure></p><p>ä¸ºä»€ä¹ˆï¼Ÿè¿˜æ˜¯é‚£å¥è¯ï¼šJavaScriptä¸–ç•Œä¸­ï¼Œå‡½æ•°æ˜¯ä½ çˆ¹ï¼</p><h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h3><p>åˆåˆ°äº†å¤§å®¶æœ€æœ€å–œæ¬¢çš„ç®­å¤´å‡½æ•°ç¯èŠ‚ï¼Œç°åœ¨è¿˜æœ‰è°æ˜¯ä¸æ„¿æ„å†™ç®­å¤´å‡½æ•°çš„ï¼Ÿ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="function"><span class="params">a</span> =&gt;</span> <span class="function"><span class="params">b</span> =&gt;</span> a + b</span><br><span class="line">func(<span class="number">1</span>)(<span class="number">2</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><p>åœ¨è¿™ç¯‡æ–‡ç« ï¼š<a href="/blog/2017/03/03/js-this/">ã€Šå…³äºJavaScriptçš„thisã€‹</a>å·²ç»è¢«å®‰æ’çš„æ˜æ˜ç™½ç™½äº†ã€‚</p><p>å®é™…ä¸Šç°åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¹Ÿæœ‰ç‚¹é—®é¢˜ï¼Œå¹´è½»çš„æ—¶å€™ç‰›æ‰¹å¹å¤šäº†ã€‚æ€»ç»“ç®­å¤´å‡½æ•°ä¸¤ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼š</p><ul><li>ä¸ä¼šåˆ›é€ ä¸Šä¸‹æ–‡ï¼ˆè‡ªèº«æ— thisï¼‰</li><li>å¿…ç„¶æ˜¯ä¸ªåŒ¿åå‡½æ•°</li><li>æ²¡æœ‰ <code>arguments</code></li></ul><p>ä¸æ˜¯ä¸¤ä¸ªå—ï¼Ÿæ€ä¹ˆå˜æˆä¸‰ä¸ªäº†ï¼Ÿæ­¤æ—¶ä½ å¯èƒ½ä¼šå›å»æ£€æŸ¥åˆšåˆšé‚£å¥è¯ï¼Œç„¶åæˆ‘ç°åœ¨æ‚„æ‚„å‘Šè¯‰ä½ ï¼Œï¼ˆç¬¬ä¸‰ç‚¹æ˜¯é€çš„ï¼‰ã€‚</p><h3 id="è®¡ç®—å±æ€§å‡½æ•°å"><a href="#è®¡ç®—å±æ€§å‡½æ•°å" class="headerlink" title="è®¡ç®—å±æ€§å‡½æ•°å"></a>è®¡ç®—å±æ€§å‡½æ•°å</h3><p>è¿™ä¸ªåº”è¯¥æ˜¯åœ¨â€œå¯¹è±¡â€çš„ç¯å¢ƒä¸­å­˜åœ¨ï¼Œæ¯•ç«Ÿå¯¹è±¡å¯ä»¥æŒ‡ä»£å¾ˆå¤šç§åªè¦æ˜¯å¯¹è±¡çš„æƒ…å†µã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object = &#123;</span><br><span class="line">  [<span class="string">'a'</span> + <span class="string">'b'</span>](a, b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">object.ab(<span class="number">1</span>, <span class="number">3</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>è¿™å°±å®ç°äº†â€œå‡½æ•°åå¯ä»¥æš‚æ—¶ä¸çŸ¥é“æ˜¯ä»€ä¹ˆâ€çš„æƒ…å†µï¼Œé€šè¿‡è®¡ç®—æ¥å¾—åˆ°è¿™ä¸ªå‡½æ•°ã€‚</p><h3 id="Other"><a href="#Other" class="headerlink" title="Other"></a>Other</h3><h3 id="new-Function"><a href="#new-Function" class="headerlink" title="new Function"></a>new Function</h3><p>è¿™æ˜¯ä¸€ä¸ªä¸çŸ¥é“å“ªé‡Œå¯ä»¥ç”¨å¾—ä¸Šä½†æ˜¯å°±æ˜¯å¯ä»¥ç”¨çš„æ–¹å¼ï¼šé€šè¿‡å¯¹è±¡åˆ›å»º<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'return a + b'</span>)</span><br><span class="line">func(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><h3 id="å‡½æ•°å‚æ•°åˆå§‹å€¼"><a href="#å‡½æ•°å‚æ•°åˆå§‹å€¼" class="headerlink" title="å‡½æ•°å‚æ•°åˆå§‹å€¼"></a>å‡½æ•°å‚æ•°åˆå§‹å€¼</h3><p>å¯èƒ½æœ‰ä¸€å®šéœ€æ±‚ï¼Œä½†å¯èƒ½æ²¡æœ‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a = <span class="number">1</span>, b = <span class="number">2</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func() <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><p>å¯èƒ½æˆ‘ä»¬æ›´å¸¸ç”¨çš„æœ‰è¿™äº›<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> funcA = <span class="function">(<span class="params">obj = &#123;&#125;</span>) =&gt;</span> obj</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> funcB = <span class="function">(<span class="params">arr = []</span>) =&gt;</span> arr</span><br></pre></td></tr></table></figure></p><p>ä½†JavaScriptæ¯•ç«Ÿæ˜¯ã€Œå‡½æ•°æ˜¯ç¬¬ä¸€å…¬æ°‘ã€çš„è¯­è¨€ï¼Œæœ‰æœºä¼šä¼šå†™åˆ°å¾ˆå¤šé«˜é˜¶å‡½æ•°ã€‚æ‰€ä»¥<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> func = <span class="function">(<span class="params">fn = (</span>) =&gt;</span> <span class="string">'ğŸ’‰ğŸ’§ğŸ®ğŸº'</span>) =&gt; fn.call(<span class="literal">null</span>)</span><br></pre></td></tr></table></figure></p><p>å‡­ä»€ä¹ˆå‡½æ•°ä½œä¸ºå‚æ•°å°±ä¸èƒ½æœ‰åˆå§‹å€¼å‘¢ï¼Ÿå½“ç„¶æ˜¯å¯ä»¥çš„å‘€ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆJavaScriptå®šä¹‰ä¸€ä¸ªå‡½æ•°æœ‰é‚£ä¹ˆå¤šç§å½¢å¼ï¼Œæ˜¯å†å²æ®‹ç•™è¿˜æ˜¯ä¸ºäº†è£…é€¼ï¼Ÿç ”ç©¶äº†ä¸€ä¸‹å‘ç°è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚&lt;/p&gt;
&lt;p&gt;JavaScriptä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ä¸»è¦å¯ä»¥åˆ†æˆä¸¤ç§å½¢å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡½æ•°å£°æ˜&lt;/li&gt;
&lt;li&gt;å‡½æ•°è¡¨è¾¾å¼&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="å‰ç«¯æ€è€ƒ" scheme="https://colmugx.github.io/blog/categories/%E5%89%8D%E7%AB%AF%E6%80%9D%E8%80%83/"/>
    
    
      <category term="JavaScript" scheme="https://colmugx.github.io/blog/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºå››è½´çš„è¸©å‘æŒ‡å—</title>
    <link href="https://colmugx.github.io/blog/2018/03/12/dji-interview/"/>
    <id>https://colmugx.github.io/blog/2018/03/12/dji-interview/</id>
    <published>2018-03-12T02:39:13.000Z</published>
    <updated>2019-04-17T09:38:15.730Z</updated>
    
    <content type="html"><![CDATA[<p>æ€ä¹ˆå¯èƒ½çœŸçš„æ˜¯å››è½´çš„è¸©å‘æŒ‡å—ï¼Œå…¶å®æ˜¯å¤§ç–†çš„å—è‹¦ä¹‹æ—…ã€‚æ¼ç¾æˆæ€’ä¸‹å•äº†<code>mavic air</code>ï¼ˆæ‰€ä»¥djiè¿˜æ˜¯èµšäº†ï¼Ÿï¼‰</p><p>æ€ä¹ˆå¯èƒ½ä¼šè®©ä½ å›å»è¿˜èƒ½ç­‰åˆ°é€šçŸ¥ï¼Œäººå®¶HRæ˜æ˜éƒ½å‘Šè¯‰æˆ‘é¢è¯•å…¥èŒä¸€æ¡é¾™äº†ï¼ç®—äº†æœ¬æ¥å°±æ˜¯è‡ªå·±çš„é—®é¢˜ï¼Œèƒ½ä¸€è·¯åˆ°çœ‹åˆ°å››ä¸ªå¤§ä½¬éƒ½æ˜¯èµšçš„ã€‚é¢è¯•ç»“æŸè¿˜é€äº†æ¶ç²¾çµè¿˜æœ‰ä¸€å—å·¥ç‰Œï¼ï¼ˆè™½ç„¶æ˜¯çº¸ç²¾çµå’Œå·¥ç‰Œå¥—å­ã€‚</p><p>æ€»ç»“ä¸€ä¸‹å°è±¡æ·±åˆ»å—è‹¦çš„é—®é¢˜å’Œç­”æ¡ˆï¼Œä¸è¿‡æœ‰ä¸€ç‚¹æƒ³åæ§½çš„â€¦å°±<code>vue</code>å’Œ<code>react</code>ä¹‹é—´çš„å…³ç³»å’Œé€‰æ‹©ï¼Œæˆ‘çœ‹åˆ°äº†é«˜ä¸€æ–‡ç†ç§‘åˆ†ç­çš„é‚£ç§å½±å­ï¼šäººå®¶éƒ½æ˜¯å“ªç§‘åˆ†é«˜é€‰å“ªç§‘ï¼Œæˆ‘æ˜¯é€‰åˆ†ä½ + ä¸»ç®¡è‡†æƒ³â€¦â€¦<br><a id="more"></a></p><h3 id="html5-css3"><a href="#html5-css3" class="headerlink" title="html5 css3"></a>html5 css3</h3><p>css3ï¼šåœ†è§’ï¼Œå˜å½¢ï¼Œçº¿æ€§æ¸å˜ï¼Œé˜´å½±ã€‚åä¸¤ä¸ªæ²¡ç­”ï¼Œå¦å¤–é˜´å½±æˆ‘ä¸€ç›´ä»¥ä¸ºæ˜¯<code>css2</code>çš„ã€‚</p><p>html5: ç®—äº†æŒºå¤šçš„â€¦åŸºæœ¬ä¸Šç”¨è¿‡çš„éƒ½è¯´äº†ä¸€éâ€¦ ä¸‹æ¬¡è®°å¾—èƒŒä¸€ä¸‹ï¼ˆçœŸçš„éœ€è¦ç”¨åˆ°é‚£ä¹ˆå¤šï¼Ÿ</p><h3 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h3><h3 id="created-å’Œ-mounted-åŒºåˆ«ï¼Œajaxä¼šåœ¨å“ªé‡Œæ“ä½œ"><a href="#created-å’Œ-mounted-åŒºåˆ«ï¼Œajaxä¼šåœ¨å“ªé‡Œæ“ä½œ" class="headerlink" title="created å’Œ mounted åŒºåˆ«ï¼Œajaxä¼šåœ¨å“ªé‡Œæ“ä½œ"></a>created å’Œ mounted åŒºåˆ«ï¼Œajaxä¼šåœ¨å“ªé‡Œæ“ä½œ</h3><blockquote><p>æ”¾åœ¨ createdï¼Œå› ä¸º mounted çš„æ—¶å€™è¿˜æ²¡æœ‰æ¸²æŸ“èŠ‚ç‚¹ã€‚</p></blockquote><p>è™½ç„¶è¿™ä¸ªé—®é¢˜ä¹Ÿæœ‰ä¸€äº›è®¨è®ºï¼Œæœ‰äº›ä¼šåœ¨<code>created</code>å°±åšäº†ï¼Œæœ‰äº›æ˜¯åœ¨<code>mounted</code>åšã€‚</p><p>æœ‰é—®é¢˜å—ï¼Ÿè¿˜çœŸæœ‰ã€‚å› ä¸ºæˆ‘æƒ³åˆ°çš„æ˜¯ï¼šåœ¨<code>created</code>è¿‡ç¨‹æŠŠæ•°æ®è·å–ä¹‹åï¼Œä»è™šæ‹Ÿdomè½¬ä¸ºçœŸå®domçš„æ—¶å€™å¯ä»¥é¡ºä¾¿æŠŠæ•°æ®å¸¦è¿›å»ã€‚è€Œä¸éœ€è¦ä¸€æ•´ä¸ªç»„ä»¶éƒ½åˆ›å»ºå®Œæ•´ä¹‹åå†å»åŠ è½½æ•°æ®ã€‚æ¯•ç«Ÿåˆ°<code>mounted</code>çš„æ—¶å€™å®ä¾‹éƒ½å»ºç«‹å®Œäº†ï¼Œè¿™ä¸ªæ—¶å€™å†åˆ·æ–°æ•°æ®ä¸æ˜¯ä¼šå¼•èµ·åˆ·æ–°/é‡ç»˜ï¼Ÿä¸è¿‡è¿™ä¸ªé—®é¢˜ä¸åº”è¯¥æ˜¯æˆ‘æ²¡çœ‹æºç çš„é—®é¢˜ï¼Œè€Œæ˜¯æœ‰äº›é—®é¢˜æ²¡äº†è§£é€å½»ï¼Œæˆ–è€…è¯´ï¼Œæ–‡ç« çœ‹å¤ªå°‘ã€‚</p><p>æ°å¥½å°±å‘è¿™äº†ï¼Œè¦çš„å°±æ˜¯åœ¨<code>mounted</code>ï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™å·²ç»æœ‰ç»„ä»¶å®ä¾‹äº†ï¼Œä¹Ÿå°±æ˜¯<code>this.$el</code>å·²ç»æœ‰æ ‘äº†ï¼Œå¦‚æœ<code>ajax</code>è¿‡æ¥çš„å†…å®¹æ˜¯éœ€è¦ä¾èµ–<code>el</code>çš„è¯ï¼Œé‚£åœ¨<code>created</code>çš„æ—¶å€™è¿˜æ²¡æœ‰ä¸œè¥¿å‘¢ã€‚</p><p><img src="https://cn.vuejs.org/images/lifecycle.png" alt="Vueç”Ÿå‘½å‘¨æœŸå›¾ç¤º"></p><h3 id="æ·±åº¦-watcher"><a href="#æ·±åº¦-watcher" class="headerlink" title="æ·±åº¦ watcher"></a>æ·±åº¦ watcher</h3><p>å»ç¿»äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œæˆ‘å‘ç°ç¿»è½¦çš„æ˜¯è‡ªå·±å§ï¼<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">c: &#123;</span><br><span class="line">  handler: <span class="function"><span class="keyword">function</span> (<span class="params">val, oldVal</span>) </span>&#123; <span class="comment">/* ... */</span> &#125;,</span><br><span class="line">  deep: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>åªéœ€è¦ç»™å¯¹è±¡åŠ ä¸ª<code>deep</code>å°±è¡Œäº†,è€Œ<code>a.b</code>è¿™ç§æƒ…å†µåº”ä¸å±äºæ·±åº¦watchï¼Œè¿™åªæ˜¯éœ€è¦ç›‘å¬çš„æ•°æ®åœ¨æ¯”è¾ƒæ·±å¤„è€Œå·²â€¦</p><h3 id="vue-å‡½æ•°å¼ç»„ä»¶"><a href="#vue-å‡½æ•°å¼ç»„ä»¶" class="headerlink" title="vue å‡½æ•°å¼ç»„ä»¶"></a>vue å‡½æ•°å¼ç»„ä»¶</h3><p>è¿™æ˜¯ä¸€ä¸ªè¡¥å……é—®é¢˜ï¼Œå…³äº ä»€ä¹ˆæ—¶å€™å¯ä»¥ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œæˆ‘è§‰å¾—ç¡®å®æ²¡ä»€ä¹ˆå¯ä»¥è¯´çš„å•Šâ€¦</p><p>å¦‚æœåªæ˜¯å……å½“æ¸²æŸ“ä»»åŠ¡ï¼Œä¸éœ€è¦æŒä¹…åŒ–ä¸éœ€è¦çŠ¶æ€ï¼Œé‡‡ç”¨å‡½æ•°å¼ç»„ä»¶å¯ä»¥å‡å°‘å¼€é”€ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜è¿˜æ˜¯å‡ºç°åœ¨ï¼šè¡¨è¾¾èƒ½åŠ›æœ‰é—®é¢˜ + ç†è§£æ¡†æ¶ä¸å¤Ÿæ·±åˆ»ï¼ˆä½†è¿œä¸åŠåŸç†ï¼‰ + ç‹—å¨˜çš„è‹±è¯­è¡¨è¾¾ã€‚è¿˜æœ‰<code>css</code>è¿‡äºä¾èµ–è¡¥å…¨å¯¼è‡´æƒ³å£å¤´è¡¨è¿°è¯­å¥çš„æ—¶å€™ï¼Œå•è¯ä¸­é—´é‚£æ®µæƒ³ä¸èµ·æ¥æ‰€ä»¥è¯´ä¸å‡ºå£å¯¼è‡´çš„ä¸¢åˆ†ã€‚æ‰€ä»¥æ‰“ç®—CSSéƒ¨åˆ†å…³é—­è¡¥å…¨ä¸€æ®µæ—¶é—´ã€‚</p><p>è¿™å±äºæœºä¼šå®Œå…¨è¢«è‡ªå·±æ¯äº†ï¼ˆè¿˜ä¸æ˜¯æŠ€æœ¯å±‚é¢é—®é¢˜ï¼‰ï¼Œæ‰€ä»¥çƒ¦èºå’Œä¸ç”˜åˆæœ‰ä»€ä¹ˆç”¨å‘¢â€¦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ€ä¹ˆå¯èƒ½çœŸçš„æ˜¯å››è½´çš„è¸©å‘æŒ‡å—ï¼Œå…¶å®æ˜¯å¤§ç–†çš„å—è‹¦ä¹‹æ—…ã€‚æ¼ç¾æˆæ€’ä¸‹å•äº†&lt;code&gt;mavic air&lt;/code&gt;ï¼ˆæ‰€ä»¥djiè¿˜æ˜¯èµšäº†ï¼Ÿï¼‰&lt;/p&gt;
&lt;p&gt;æ€ä¹ˆå¯èƒ½ä¼šè®©ä½ å›å»è¿˜èƒ½ç­‰åˆ°é€šçŸ¥ï¼Œäººå®¶HRæ˜æ˜éƒ½å‘Šè¯‰æˆ‘é¢è¯•å…¥èŒä¸€æ¡é¾™äº†ï¼ç®—äº†æœ¬æ¥å°±æ˜¯è‡ªå·±çš„é—®é¢˜ï¼Œèƒ½ä¸€è·¯åˆ°çœ‹åˆ°å››ä¸ªå¤§ä½¬éƒ½æ˜¯èµšçš„ã€‚é¢è¯•ç»“æŸè¿˜é€äº†æ¶ç²¾çµè¿˜æœ‰ä¸€å—å·¥ç‰Œï¼ï¼ˆè™½ç„¶æ˜¯çº¸ç²¾çµå’Œå·¥ç‰Œå¥—å­ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹å°è±¡æ·±åˆ»å—è‹¦çš„é—®é¢˜å’Œç­”æ¡ˆï¼Œä¸è¿‡æœ‰ä¸€ç‚¹æƒ³åæ§½çš„â€¦å°±&lt;code&gt;vue&lt;/code&gt;å’Œ&lt;code&gt;react&lt;/code&gt;ä¹‹é—´çš„å…³ç³»å’Œé€‰æ‹©ï¼Œæˆ‘çœ‹åˆ°äº†é«˜ä¸€æ–‡ç†ç§‘åˆ†ç­çš„é‚£ç§å½±å­ï¼šäººå®¶éƒ½æ˜¯å“ªç§‘åˆ†é«˜é€‰å“ªç§‘ï¼Œæˆ‘æ˜¯é€‰åˆ†ä½ + ä¸»ç®¡è‡†æƒ³â€¦â€¦&lt;br&gt;
    
    </summary>
    
      <category term="å‰ç«¯æ€è€ƒ" scheme="https://colmugx.github.io/blog/categories/%E5%89%8D%E7%AB%AF%E6%80%9D%E8%80%83/"/>
    
    
      <category term="JavaScript" scheme="https://colmugx.github.io/blog/tags/JavaScript/"/>
    
      <category term="vue" scheme="https://colmugx.github.io/blog/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>promiseé“¾å¼è°ƒç”¨</title>
    <link href="https://colmugx.github.io/blog/2018/02/28/promise-chaining/"/>
    <id>https://colmugx.github.io/blog/2018/02/28/promise-chaining/</id>
    <published>2018-02-28T02:16:22.000Z</published>
    <updated>2019-03-25T06:37:13.980Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¼šäº†å´ä¸ä¼šæ´»ç”¨æ˜¯çœŸçš„èœâ€¦</p><p>å‰å‡ å¤©é¢è¯•ï¼Œæåˆ°äº†å›è°ƒåœ°ç‹±ç”¨<code>promise</code>ï¼Œç„¶åæŠ›å‡ºä¸ªè¡ç”Ÿé—®é¢˜ï¼š<code>promise</code>ä¹Ÿä¼šåµŒå¥—ï¼Œæ€ä¹ˆè§£å†³<code>promise</code>çš„å›è°ƒåœ°ç‹±ã€‚</p><p>æˆ‘æƒ³ä¸åˆ°ï¼Œç›´æ¥é—®èƒ½ä¸èƒ½ç”¨<code>ES8</code>ï¼Œè¯´è¡Œï¼Œç„¶åæˆ‘å°±æƒ³åˆ°äº†<code>const p2 = await Promise</code>è¿™ç§åšæ³•ã€‚</p><p>å¯æ˜¯ï¼Œæˆ‘è®°å¾—æˆ‘åœ¨è‹¥å¹²å¤©å‰æ‰å†™äº†ä¸€ç¯‡å…³äºã€ŒJSæ–¹æ³•é“¾å¼è°ƒç”¨ã€ã€‚</p><blockquote><p>åªè¦å‡½æ•°è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±å¯ä»¥è¿ç€è°ƒç”¨</p></blockquote><p>So,</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p1.then(<span class="function">(<span class="params">&#123; p2 &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> p2</span><br><span class="line">&#125;).then(&#123; p3 &#125; =&gt; &#123;&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å­¦ä¼šäº†å´ä¸ä¼šæ´»ç”¨æ˜¯çœŸçš„èœâ€¦&lt;/p&gt;
&lt;p&gt;å‰å‡ å¤©é¢è¯•ï¼Œæåˆ°äº†å›è°ƒåœ°ç‹±ç”¨&lt;code&gt;promise&lt;/code&gt;ï¼Œç„¶åæŠ›å‡ºä¸ªè¡ç”Ÿé—®é¢˜ï¼š&lt;code&gt;promise&lt;/code&gt;ä¹Ÿä¼šåµŒå¥—ï¼Œæ€ä¹ˆè§£å†³&lt;code&gt;promise&lt;/code&gt;çš„å›è°ƒåœ°ç‹±ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æƒ³ä¸åˆ°ï¼Œç›´æ¥é—®
      
    
    </summary>
    
      <category term="æ›²è‹‘æ‚å›" scheme="https://colmugx.github.io/blog/categories/%E6%9B%B2%E8%8B%91%E6%9D%82%E5%9D%9B/"/>
    
    
      <category term="JavaScript" scheme="https://colmugx.github.io/blog/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>æŠ›ä¸‹ä¸æˆç†Ÿï¼Œå¼€å§‹nvim</title>
    <link href="https://colmugx.github.io/blog/2018/02/13/new-life-nvim/"/>
    <id>https://colmugx.github.io/blog/2018/02/13/new-life-nvim/</id>
    <published>2018-02-13T03:02:00.000Z</published>
    <updated>2019-03-25T06:41:48.996Z</updated>
    
    <content type="html"><![CDATA[<p>æƒ³æ´»å¾—è·Ÿè¿‡å»æœ‰äº›åŒºåˆ«ï¼Œæ´»å¾—æ›´æœ‰æ•ˆç‡è¯¥æœ‰çš„æ ·å­ï¼Œè€Œä¸”æˆ‘è®¨åŒä¸Šä¸€å¹´çš„è‡ªå·±ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆæƒ³ã€‚åæ­£ï¼Œæ”¾å¼ƒspacemacså¼€å§‹ä½¿ç”¨vimäº†ã€‚</p><p>å¾ˆç®€å•ï¼Œspacemacsæœ‰æ—¶å€™ä¼šå¡ä¸€ä¸‹ï¼Œå°±åƒåå¹´å‰çš„ç”µè„‘ï¼ŒæŒ‰äº†ä¸€é•¿ä¸²éœ€è¦ç­‰ä¸€ä¸‹æ‰ä¼šçªçªçªçªå…¨æ˜¾ç¤ºå‡ºæ¥ã€‚åæ¥vscode + vimæ’ä»¶åˆå‡ºç°äº†â€œä¸è‡ªè§‰æŒ‰ç©ºæ ¼â€çš„æƒ…å†µï¼Œå°±æ˜¯å†™å®ŒæŒ‰ä¸¤ä¸‹ç©ºæ ¼è°ƒæ’ä»¶ã€‚é‚£æ—¢ç„¶è¿™æ ·çš„è¯ï¼Œä»é›¶å¼€å§‹ä¸€ä¸ªvimå§ï¼ŒæŠŠleaderæ¢æˆç©ºæ ¼ç„¶åä¸€äº›æ”¹ä¸è¿‡æ¥çš„ä¹ æƒ¯æ¢è¿‡æ¥å°±è¡Œäº†ã€‚</p><p>å®é™…ä¸Šï¼Œå¦‚æœä¸æ˜¯å› ä¸ºæ‡’ï¼Œæ—©å°±è¯¥å®šåˆ¶ç¼–è¾‘å™¨äº†ã€‚ã€‚ä¸è¿‡æˆ‘ä¸ä¼šæ”¾å¼ƒvscodeï¼Œå› ä¸ºè¿˜æ˜¯æœ‰äº›æ®‹ç•™ã€‚ä¸ºä»€ä¹ˆä¸ä»é›¶å¼€å§‹ä¸€ä¸ªemacsï¼Ÿæˆæœ¬å¤ªé«˜å•Šï¼Œåˆè¦vimæ¨¡å¼åˆè¦æ”¹æˆleaderé”®æ“ä½œï¼Œè€Œä¸”é€æ¸èƒ½ç†è§£é‚£ä¸ªèšŠé¦™å›¾æ˜¯ä»€ä¹ˆæ„æ€äº†ã€‚</p><h3 id="iterm2"><a href="#iterm2" class="headerlink" title="iterm2"></a>iterm2</h3><p>å®¿ä¸»ç”¨è¿™ä¸ªï¼ŒåŸå…ˆå¾ˆæ’æ–¥åœ¨ç»ˆç«¯å†™ä¸œè¥¿ï¼ˆä¸èƒ½ç”¨é¼ æ ‡ï¼‰ï¼Œä¸è¿‡åæ¥ä¸€æ‰‹èœé¸¡æ“ä½œ<code>xj</code>, <code>xk</code>è¿˜æœ‰<code>wwwwwwww...</code>ä¹Ÿèƒ½è¾¾åˆ°éœ€æ±‚äº†ï¼Œåº”è¯¥æ²¡é—®é¢˜äº†ã€‚<br><a id="more"></a><br>14pxçš„<code>menlo nerd</code>ï¼Œ204x60 çš„<code>full-width top</code>ï¼Œæ¥è¿‘<code>40%</code>çš„é€æ˜åº¦çº¯é»‘èƒŒæ™¯è§£å†³å­—ä½“å­—ç¬¦å®Œæ•´æ˜¾ç¤ºå’Œå¯åŠ¨æ—¶è‡ªåŠ¨æ— è¾¹æ¡†å…¨å±ï¼Œè¿˜èƒ½çœ‹åˆ°çª—åçš„æƒ…å†µã€‚é¡ºä¾¿æŠŠçƒ­é”®æ”¹æˆ<code>cmd + return</code>ï¼ˆè¿™æ“ä½œæ‡‚å¾—éƒ½æ‡‚â€¦ï¼‰</p><h3 id="zsh"><a href="#zsh" class="headerlink" title="zsh"></a>zsh</h3><p>oh-my-zshä¸€æ—©å°±è£…äº†ï¼Œç”¨çš„<code>avit</code>ä¸»é¢˜ï¼Œå…¶ä»–æ²¡åŠ¨ã€‚å¯¹æˆ‘æ¥è¯´<code>shell</code>å°±æ˜¯<code>shell</code>ã€‚</p><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><p>ä»åˆšå¼€å§‹å°è¯•MacVimåˆ°åé¢æŠŠè¿™ä¸œè¥¿å¹²æ‰ï¼Œç»ˆç«¯vimæ›´æ–°åˆ°vim8.0ä¹‹åï¼Œvimä¸€ç›´å……å½“ç€â€œé¡ºæ‰‹æ”¹æ”¹â€çš„ä»»åŠ¡ã€‚è¿™æ¬¡å› ä¸ºè¦åŠä¸»åŠ›ç¼–è¾‘å™¨ï¼Œä¹Ÿä¸èƒ½å…¨é æ‰‹æ‰“äº†â€¦</p><p>å¯¹ycmå°è±¡æå·®ï¼Œè™½ç„¶deopleteæ”¯æŒvim8ï¼Œå¼„äº†ä¸€é˜µå­èƒ½ç”¨ä½†æ˜¯ä¸€å‡ºé—®é¢˜éº»çƒ¦æå¤šï¼›æ‰¾åˆ°äº†vim-lspä½†æ˜¯èµ„æºç¨€ç¼ºï¼Œè¿˜ä¸ä¼šè‡ªå¯æœåŠ¡å™¨ï¼ä¸€æ°”ä¹‹ä¸‹ç¼–è¯‘ä¸€æ‰‹<code>neovim</code>ï¼Œå®Œç¾ã€‚æ¯•ç«Ÿæˆ‘è¦æœ‰è¿™è„¾æ°”æˆ‘å°±å»ä»é›¶å¼€å§‹space + emacsäº†ï¼ˆä¸»è¦è¿˜å¯ä»¥ç›´æ¥æŠ„å¤§ä½¬çš„é…ç½®ï¼‰ã€‚</p><p>è‡³äºå…¶ä»–æ’ä»¶ï¼Œå› ä¸ºè¿˜æ²¡æœ‰å®æˆ˜è¿‡è¿˜ä¸çŸ¥é“ç¼ºå“ªäº›ä¸œè¥¿ã€‚å…ˆé…å¥½çš„æ˜¯è‚¯å®šä¼šç”¨ä¸Šçš„ï¼Œçœ‹æƒ…å†µå†è¯´ã€‚</p><p>å¦å¤–æ±‚ä¸€ä¸ªvimæ’ä»¶ï¼Œvimæœ‰æ²¡æœ‰åƒ<code>mmm-mode</code>çš„æ’ä»¶ï¼Œå°±æ˜¯åŒä¸€ä¸ªæ–‡ä»¶å¯ä»¥ä¸åŒè®¾ç½®é«˜äº®æˆ–è€…è¡¥å…¨çš„ï¼Ÿç”¨<code>mmm-mode</code>å¯ä»¥åœ¨åŒä¸€æ–‡ä»¶åŒæ—¶é‡‡ç”¨<code>emmet-mode</code>å’Œ<code>js2-mode</code>ï¼Œä¹Ÿå› ä¸ºè¿™æ ·è§£å†³æˆ‘<code>vue</code>é«˜äº®è¡¥å…¨é—®é¢˜â€¦</p><p>ç„¶åå°±æ˜¯çœ‹æƒ…å†µæŠŠåœ¨<code>spacemacs</code>çš„ç‰‡æ®µæ¬åˆ°<code>vim</code>äº†ã€‚</p><h3 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h3><p>å…¶å®<code>iterm2</code>ä¹Ÿå¯ä»¥èƒ¡ä¹±åˆ†å±ï¼Œä½†æ˜¯è€ƒè™‘åˆ°å¤§ä½¬å¢™è£‚æ¨èã€‚ç”¨ï¼</p><p>çœ‹åˆ°äº†<code>i3</code>çš„å½±å­ï¼Œé…ç½®çª—å£å‰åé¢œè‰²ï¼Œè°ƒæ•´äº†çŠ¶æ€æ å·¦å³å®½åº¦å’Œé…è‰²ã€‚æ¯•ç«Ÿè¿˜ä¸ç†Ÿï¼Œéšæ„çš„æ”¹æˆäº†å’Œvimä¸»é¢˜ç›¸è¿‘çš„ä½è°ƒé…è‰²å¹¶åŠ ä¸Šæ—¶é’Ÿï¼ˆç€æ‰‹åšç”µé‡ï¼‰ã€‚ä¸è¿‡æˆ‘çš„ç»ˆç«¯æ¯•ç«Ÿä¸æ˜¯å…¨å±çš„ï¼Œé¡¶æ å’Œdockè¿˜æ˜¯ä¼šå¸¸é©»å±å¹•ï¼Œæ‰€ä»¥ä¸€å †ä¸œè¥¿ä¹Ÿæ²¡ä»€ä¹ˆç”¨ã€‚å¯¹äº†ï¼Œè¿™ä¸€å¥—æœ‰é¢œè‰²çš„ä¸»é¢˜é¢œè‰²éƒ½é‡‡ç”¨äº†<code>one</code>ï¼Œatomå®¶é‚£ä¸ªã€‚</p><p>ç„¶åå‰©ä¸‹çš„å°±æ˜¯é€šè¿‡ä½¿ç”¨å¯»æ‰¾é—®é¢˜äº†ï¼Œç°åœ¨ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯vimçš„ä¸»é¢˜æ€ä¹ˆæŠŠèƒŒæ™¯ä¹Ÿè‡³å°‘<code>30%</code>çš„é€æ˜ï¼Œæ”¹äº†ä¸»é¢˜æ–‡ä»¶å‘ç°ä¸€ç‚¹ç”¨éƒ½æ²¡æœ‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æƒ³æ´»å¾—è·Ÿè¿‡å»æœ‰äº›åŒºåˆ«ï¼Œæ´»å¾—æ›´æœ‰æ•ˆç‡è¯¥æœ‰çš„æ ·å­ï¼Œè€Œä¸”æˆ‘è®¨åŒä¸Šä¸€å¹´çš„è‡ªå·±ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆæƒ³ã€‚åæ­£ï¼Œæ”¾å¼ƒspacemacså¼€å§‹ä½¿ç”¨vimäº†ã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆç®€å•ï¼Œspacemacsæœ‰æ—¶å€™ä¼šå¡ä¸€ä¸‹ï¼Œå°±åƒåå¹´å‰çš„ç”µè„‘ï¼ŒæŒ‰äº†ä¸€é•¿ä¸²éœ€è¦ç­‰ä¸€ä¸‹æ‰ä¼šçªçªçªçªå…¨æ˜¾ç¤ºå‡ºæ¥ã€‚åæ¥vscode + vimæ’ä»¶åˆå‡ºç°äº†â€œä¸è‡ªè§‰æŒ‰ç©ºæ ¼â€çš„æƒ…å†µï¼Œå°±æ˜¯å†™å®ŒæŒ‰ä¸¤ä¸‹ç©ºæ ¼è°ƒæ’ä»¶ã€‚é‚£æ—¢ç„¶è¿™æ ·çš„è¯ï¼Œä»é›¶å¼€å§‹ä¸€ä¸ªvimå§ï¼ŒæŠŠleaderæ¢æˆç©ºæ ¼ç„¶åä¸€äº›æ”¹ä¸è¿‡æ¥çš„ä¹ æƒ¯æ¢è¿‡æ¥å°±è¡Œäº†ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œå¦‚æœä¸æ˜¯å› ä¸ºæ‡’ï¼Œæ—©å°±è¯¥å®šåˆ¶ç¼–è¾‘å™¨äº†ã€‚ã€‚ä¸è¿‡æˆ‘ä¸ä¼šæ”¾å¼ƒvscodeï¼Œå› ä¸ºè¿˜æ˜¯æœ‰äº›æ®‹ç•™ã€‚ä¸ºä»€ä¹ˆä¸ä»é›¶å¼€å§‹ä¸€ä¸ªemacsï¼Ÿæˆæœ¬å¤ªé«˜å•Šï¼Œåˆè¦vimæ¨¡å¼åˆè¦æ”¹æˆleaderé”®æ“ä½œï¼Œè€Œä¸”é€æ¸èƒ½ç†è§£é‚£ä¸ªèšŠé¦™å›¾æ˜¯ä»€ä¹ˆæ„æ€äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;iterm2&quot;&gt;&lt;a href=&quot;#iterm2&quot; class=&quot;headerlink&quot; title=&quot;iterm2&quot;&gt;&lt;/a&gt;iterm2&lt;/h3&gt;&lt;p&gt;å®¿ä¸»ç”¨è¿™ä¸ªï¼ŒåŸå…ˆå¾ˆæ’æ–¥åœ¨ç»ˆç«¯å†™ä¸œè¥¿ï¼ˆä¸èƒ½ç”¨é¼ æ ‡ï¼‰ï¼Œä¸è¿‡åæ¥ä¸€æ‰‹èœé¸¡æ“ä½œ&lt;code&gt;xj&lt;/code&gt;, &lt;code&gt;xk&lt;/code&gt;è¿˜æœ‰&lt;code&gt;wwwwwwww...&lt;/code&gt;ä¹Ÿèƒ½è¾¾åˆ°éœ€æ±‚äº†ï¼Œåº”è¯¥æ²¡é—®é¢˜äº†ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="å®è·µå°è¯•" scheme="https://colmugx.github.io/blog/categories/%E5%AE%9E%E8%B7%B5%E5%B0%9D%E8%AF%95/"/>
    
    
      <category term="vim" scheme="https://colmugx.github.io/blog/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>vuexæºç ç†è§£ï¼ˆäºŒï¼‰</title>
    <link href="https://colmugx.github.io/blog/2018/01/30/vuex-study-2/"/>
    <id>https://colmugx.github.io/blog/2018/01/30/vuex-study-2/</id>
    <published>2018-01-30T02:34:11.000Z</published>
    <updated>2019-03-22T16:07:34.680Z</updated>
    
    <content type="html"><![CDATA[<p>ç»§ç»­ï¼Œè¿™æ¬¡å°è¯•é€è¡Œç†è§£Storeç±»çš„ä¸œè¥¿</p><p>ç„¶åå…³äºè¿™æ¬¡ï¼Œä¸€äº›â€œå·¥å…·å‡½æ•°â€éƒ½é›†ä¸­åœ¨<code>util.js</code>çš„è¿™ç§åšæ³•ï¼Œå·²ç»å¤Ÿæˆ‘å­¦çš„äº†ã€‚è¿™æ˜¯ä¸ªå¾ˆå—ç”¨çš„åšæ³•ã€‚</p><h3 id="ä¸€äº›ç®€å•çš„ä¸œè¥¿"><a href="#ä¸€äº›ç®€å•çš„ä¸œè¥¿" class="headerlink" title="ä¸€äº›ç®€å•çš„ä¸œè¥¿"></a>ä¸€äº›ç®€å•çš„ä¸œè¥¿</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV !== <span class="string">'production'</span>) &#123;</span><br><span class="line">  assert(Vue, <span class="string">`must call Vue.use(Vuex) before creating a store instance.`</span>)</span><br><span class="line">  assert(<span class="keyword">typeof</span> <span class="built_in">Promise</span> !== <span class="string">'undefined'</span>, <span class="string">`vuex requires a Promise polyfill in this browser.`</span>)</span><br><span class="line">  assert(<span class="keyword">this</span> <span class="keyword">instanceof</span> Store, <span class="string">`Store must be called with the new operator.`</span>)</span><br><span class="line">&#125; <span class="comment">// æ–­è¨€å‡½æ•°åœ¨utilï¼Œå¦‚æœä¸æ»¡è¶³å‰é¢çš„æƒ…å†µï¼Œåé¢ä»¥error æ’å‡ºæ¥</span></span><br><span class="line"><span class="comment">// ï¼ˆå®é™…ä¸Šå°±æ˜¯æƒ³çœ‹æœ‰æ²¡æœ‰åœ¨vueç¯å¢ƒä¸­å’Œæœ‰æ²¡æœ‰æ­£ç¡®å®‰è£…ï¼‰</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">  plugins = [],</span><br><span class="line">  strict = <span class="literal">false</span></span><br><span class="line">&#125; = options <span class="comment">// å®šä¹‰ä¸¤ä¸ªå˜é‡ï¼Œåœ¨ä¼ å…¥çš„å¯¹è±¡ä¸­æŠŠè¿™ä¸¤ä¸ªä¸œè¥¿æ‹¿å‡ºæ¥ï¼Œå­—é¢æ„æ€</span></span><br></pre></td></tr></table></figure><a id="more"></a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œå¯èƒ½æ˜¯ä¼šæŠŠæ•´ä¸ªvuexæ‰€æœ‰çš„å†…å®¹éƒ½ä¼šè§„æ•´åˆ°è¿™äº›ä¸­</span></span><br><span class="line"><span class="comment">// store internal state</span></span><br><span class="line"><span class="keyword">this</span>._committing = <span class="literal">false</span>  <span class="comment">// commit switchï¼ˆ -&gt; mutationsï¼‰</span></span><br><span class="line"><span class="keyword">this</span>._actions = <span class="built_in">Object</span>.create(<span class="literal">null</span>) <span class="comment">// actions</span></span><br><span class="line"><span class="keyword">this</span>._actionSubscribers = [] <span class="comment">// åº”è¯¥åƒåœ¨dvaä¸­çœ‹åˆ°çš„è®¢é˜…ï¼Œæ²¡ç”¨è¿‡ä¹Ÿæ²¡å¼„æ¸…æ¥šåº”è¯¥æ€ä¹ˆç”¨</span></span><br><span class="line"><span class="keyword">this</span>._mutations = <span class="built_in">Object</span>.create(<span class="literal">null</span>) <span class="comment">// mutations</span></span><br><span class="line"><span class="keyword">this</span>._wrappedGetters = <span class="built_in">Object</span>.create(<span class="literal">null</span>) <span class="comment">// getters</span></span><br><span class="line"><span class="keyword">this</span>._modules = <span class="keyword">new</span> ModuleCollection(options) <span class="comment">// åˆ†æ¨¡å—å¾—åˆ°ä¸€ä¸ªç±»</span></span><br><span class="line"><span class="keyword">this</span>._modulesNamespaceMap = <span class="built_in">Object</span>.create(<span class="literal">null</span>)  <span class="comment">// å‘½åç©ºé—´ï¼Œä¸Šä¸€æ¬¡æœ‰è®²åˆ°</span></span><br><span class="line"><span class="keyword">this</span>._subscribers = [] <span class="comment">// æ‰€æœ‰è®¢é˜…è€…</span></span><br><span class="line"><span class="keyword">this</span>._watcherVM = <span class="keyword">new</span> Vue() <span class="comment">//watcher??åº”è¯¥è·Ÿvueçš„watcheræœ‰å…³ï¼Ÿ</span></span><br></pre></td></tr></table></figure><h3 id="å¼€å§‹è·³ç€ç†è§£"><a href="#å¼€å§‹è·³ç€ç†è§£" class="headerlink" title="å¼€å§‹è·³ç€ç†è§£"></a>å¼€å§‹è·³ç€ç†è§£</h3><h3 id="store-ä¸-æ“ä½œç»‘å®š"><a href="#store-ä¸-æ“ä½œç»‘å®š" class="headerlink" title="store ä¸ æ“ä½œç»‘å®š"></a>store ä¸ æ“ä½œç»‘å®š</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bind commit and dispatch to self</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">this</span> <span class="comment">// æŠŠstore æ˜¯æŒ‡å‘ this çš„</span></span><br><span class="line"><span class="keyword">const</span> &#123; dispatch, commit &#125; = <span class="keyword">this</span> <span class="comment">// æ‰€ä»¥ &#123; dispatch, commit &#125; = store ?</span></span><br><span class="line"><span class="keyword">this</span>.dispatch = <span class="function"><span class="keyword">function</span> <span class="title">boundDispatch</span> (<span class="params">type, payload</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> dispatch.call(store, type, payload)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>.commit = <span class="function"><span class="keyword">function</span> <span class="title">boundCommit</span> (<span class="params">type, payload, options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> commit.call(store, type, payload, options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶æœ‰æ³¨é‡Šï¼Œå°±æ˜¯æŠŠ commit, dispatch å’Œstoreç»‘å®šåˆ°<code>this</code>ä¸Šï¼Œç„¶å<code>{ dispatch, commit } = store</code>äº†ã€‚æ¥ç€classä¸­çš„<code>dispatch</code>æŒ‡å‘åˆšåˆšå¯¹è±¡ä¸­<code>dispatch</code>çš„æ–¹æ³•ï¼Œé€šè¿‡<code>call</code>ç”¨æ³•æ”¹å˜ä½œç”¨åŸŸè°ƒç”¨ã€‚æˆ‘ä»¬ç”¨åˆ°çš„<code>this.$store.dispatch</code>åº”è¯¥æ¥æºè¿™é‡Œï¼Œä¸‹é¢åŒç†</p><h3 id="ModuleCollection"><a href="#ModuleCollection" class="headerlink" title="ModuleCollection"></a>ModuleCollection</h3><p>è¿™é‡Œæ„Ÿè§‰å¾ˆæœ‰æ„æ€ï¼Œå› ä¸ºæˆ‘è¿™æ˜¯ç¬¬ä¸€æ¬¡å…³æ³¨vuexçš„ä»£ç ï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šå‘½åç©ºé—´ç­‰è¿™äº›ä¸œè¥¿æ˜¯ä»€ä¹ˆæ—¶å€™åŠ è¿›å»çš„ï¼Œä½†æˆ‘çŒœæµ‹åº”è¯¥æ˜¯vue2.5ä¹‹åçš„å†…å®¹å› ä¸ºä¹‹å‰æ²¡åœ¨æ–‡æ¡£é‡Œè§è¿‡è¿™äº›ä¸œè¥¿ã€‚</p><p>å­—é¢æ„æ€ï¼Œæ¨¡å—æ”¶é›†å™¨ã€‚ç”±äºç°åœ¨å¤æ‚åº¦çš„å…³ç³»ï¼Œè¿™éƒ¨åˆ†åº”è¯¥å…ˆå¤„ç†ä¸€ä¸‹ã€‚æŠŠä»vueçš„vuexå¾—åˆ°çš„optionsï¼Œç›´æ¥ä¼ å…¥è¿™ä¸ªç±»ï¼Œç„¶åå†è¿›å…¥<code>register</code>æ–¹æ³•ï¼Œæ¥ä¸‹æ¥çš„å·¥ä½œå°±æ˜¯ä¸æ–­çš„å°¾é€’å½’ï¼ˆï¼Ÿï¼‰å¾—åˆ°æ•´æ£µæ ‘ã€‚å› ä¸ºç°åœ¨è¿˜æœ‰å‘½åç©ºé—´ä»€ä¹ˆçš„ï¼Œæ‰€ä»¥è¿˜æœ‰å…³äºå‘½åç©ºé—´çš„åˆ¤æ–­å’Œç»“åˆã€‚</p><p>ç„¶åè¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹æ³•ï¼Œæ¯”å¦‚çƒ­æ›´ä»€ä¹ˆçš„ã€‚</p><h3 id="installModule"><a href="#installModule" class="headerlink" title="installModule"></a>installModule</h3><p>ä½¿ç”¨åˆ°çš„ä½ç½®<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">installModule(<span class="keyword">this</span>, state, [], <span class="keyword">this</span>._modules.root)</span><br></pre></td></tr></table></figure></p><p>Storeå¼€å§‹åˆå§‹åŒ–çš„å…¶ä¸­ç¬¬ä¸€ä¸ªæ–¹æ³•ã€‚</p><p>è¿™ä¸ªæ–¹æ³•ï¼Œå­—é¢å«ä¹‰å°±æ˜¯å®‰è£…æ¨¡å—ï¼ŒçŒœæµ‹åº”è¯¥æ˜¯æŠŠstoreç›¸å…³çš„ä¸œè¥¿å…ˆé…ç½®ä¸‹æ¥ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªç‚¹ï¼ˆå‡½æ•°å¤ªé•¿äº†ä¸æµªè´¹ç¯‡å¹…äº†ï¼‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isRoot = !path.length</span><br></pre></td></tr></table></figure></p><p>åˆ¤æ–­æ˜¯å¦æ˜¯æ ¹æ˜¯é€šè¿‡<code>path</code>çš„é•¿åº¦æ¥åšçš„ï¼Œå¦‚æœæ²¡é•¿åº¦å°±æ˜¯<code>/</code>äº†ï¼Œå¾ˆæœ‰æ„æ€ï¼Œå¯¹äºè¿˜æ²¡ä»€ä¹ˆç»éªŒçš„æˆ‘å—ç›ŠåŒªæµ…ã€‚</p><p>è¿™ä¸ªå‡½æ•°ï¼Œéœ€è¦5ä¸ªå‚æ•°ï¼Œ<code>store</code>, <code>rootState</code>, <code>path</code>, <code>module</code>, <code>hot</code>ã€‚æœ€åä¸€ä¸ªåº”è¯¥ä¹Ÿè·Ÿæ›´æ–°æœ‰å…³ç³»å§ï¼Ÿ</p><p><code>this</code>åœ¨<code>class</code>ä¸­ï¼Œæ‰€ä»¥æŒ‡å‘æ˜¯<code>class Store</code>çš„ï¼›<code>state</code>æ˜¯<code>const state = this._modules.root.state</code>å¾—åˆ°ï¼Œè€Œ<code>_modules</code>å°±ä¸Šé¢æåˆ°çš„å®šä¹‰äº†ï¼›å› ä¸ºè¿˜åœ¨æ ¹æ‰€ä»¥æ²¡æœ‰<code>path</code>ï¼Œæœ€åä¼ å…¥åˆšåˆšå„ç§å°¾é€’å½’å¾—åˆ°çš„æ ‘ã€‚</p><p>æ¥ä¸‹æ¥æ³¨å†Œå‘½åç©ºé—´ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¿™æ¬¡çš„storeæœ‰æ²¡æœ‰ç”¨åˆ°å‘½åç©ºé—´ï¼Œæœ‰å°±åˆ†æˆä¸€å¼ å¼ ç½‘ï¼Œæ‘Šå¼€å¤„ç†ã€‚</p><p>æ¥ä¸‹æ¥ä¼šé‡åˆ°ä¸€ä¸ªå‡½æ•°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNestedState</span> (<span class="params">state, path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> path.length</span><br><span class="line">    ? path.reduce(<span class="function">(<span class="params">state, key</span>) =&gt;</span> state[key], state)</span><br><span class="line">    : state</span><br><span class="line">&#125; <span class="comment">// å¦‚æœä¸æ˜¯æ ¹çš„è¯ä¼šè¢«åˆ†é…åˆ°è¿™é‡Œï¼Œçœ‹éœ€ä¸éœ€è¦æ‹¼å‡‘stateï¼Œå°±â€œä¸‰å…‰å±æ€§â€</span></span><br></pre></td></tr></table></figure></p><p>éæ ¹æ³¨å†Œåº”è¯¥æ˜¯æ–‡æ¡£çš„<a href="https://vuex.vuejs.org/zh-cn/modules.html" target="_blank" rel="noopener">è¿™é‡Œ</a>å§ï¼Œè¿™é‡Œæåˆ°äº†æ¨¡å—å¯ä»¥åªæ˜¯å±€éƒ¨æ³¨å†Œï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ç›´æ¥åœ¨<code>main.js</code>å®Œäº‹å„¿äº†ã€‚</p><p>ç„¶åå°±æ˜¯ä¸‰ç§æ“ä½œçš„æ¨¡å—éå†æ³¨å†Œï¼Œç”¨åˆ°çš„æ–¹æ³•å­˜åœ¨<code>module.js</code>ï¼Œå®åˆ™è¿˜æ˜¯ç”¨åˆ°äº†<code>util.js</code>çš„éå†æ–¹æ³•ï¼ˆé€šè¿‡å›è°ƒå‡½æ•°è¿”å›å›å»ï¼Œå†æ¬¡èµå¹ï¼‰</p><p>è€Œæ³¨å†Œçš„æ–¹æ³•<code>registerMutation</code> &amp;&amp; <code>registerAction</code> &amp;&amp; <code>registerGetter</code> å°±æ˜¯æˆ‘ä»¬ç”¨åˆ°çš„é‚£äº›ä¾‹å¦‚<code>store.commit(type, payload)</code>çš„æ–¹æ³•ã€‚</p><p>ç„¶<code>registerAction</code>çš„æ–¹æ³•æ¯”å…¶ä»–çš„å¤æ‚å¾—å¤šï¼Œå®ƒè¦æ±‚<code>handler</code>ä¼ å…¥<code>dispatch</code>, <code>commit</code>, <code>getter</code>, <code>state</code>ç­‰ã€‚æ˜¾ç„¶ä»–å‘½ä¸­æ³¨å®šè¦å¹²ä¸€äº›â€œè„ä¹±å·®â€çš„å·¥ä½œã€‚ç”±æ­¤ä¹Ÿå¯ä»¥å¾—åˆ°ä¸ºä»€ä¹ˆ<code>actions</code>çš„æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°(type)å¯ä»¥ä¼ å…¥<code>{dispatch, commit, state}</code>â€¦çš„ä¸œè¥¿äº†ã€‚</p><p>é¢˜å¤–è¯ï¼šä¹‹å‰åœ¨æŸä¸ªè®ºå›çœ‹åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œé—®åœ¨vuexä¸­çš„actionsä¸ºä»€ä¹ˆå¯ä»¥å–åˆ°stateï¼Œä¸ä¼šé€ æˆä»€ä¹ˆä¹±ä¸ƒå…«ç³Ÿçš„é—®é¢˜ä¹ˆï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œé—®é¢˜çš„ç­”æ¡ˆå…ˆç•™ç€ã€‚ä¸è¿‡å› ä¸ºå¯ä»¥å¾—åˆ°stateï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ç°æœ‰çš„stateæ¥åˆ¤æ–­æˆ–è€…æ“ä½œï¼Œè¿™ä¸æ˜¯æ›´æ–¹ä¾¿äº†ä¹ˆï¼Ÿ</p><h3 id="resetStoreVM"><a href="#resetStoreVM" class="headerlink" title="resetStoreVM"></a>resetStoreVM</h3><p>å½“ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ä¹‹åï¼Œæ€¼è¿›å®ä¾‹ã€‚</p><p>å®é™…ä¸Šå‰é¢ä¹Ÿæœ‰æåˆ°ï¼Œvuexæ˜¯è¢«vueå½“åšä¸“å±æ’ä»¶è¿›è¡Œå®‰è£…çš„ï¼Œåœ¨Vueå®ä¾‹ç¯å¢ƒä¸­å°±å¯ä»¥é€šè¿‡<code>this.$store</code>æ‘¸åˆ°vuexã€‚ç„¶åvuexå°±å¯ä»¥é€šè¿‡æ•°æ®çš„æ”¹å˜æ¥é‡æ–°å¾—åˆ°æ–°çš„ç»„ä»¶æˆ–è€…æ–°çš„å»ä¿ƒè¿›ç”Ÿæˆå¾—åˆ°æ–°çš„domã€‚ç„¶ååœ¨ä¸Šä¸€ç¯‡æœ‰è®²åˆ°é‚£ä¸€å †è¾…åŠ©å‡½æ•°ï¼Œå®é™…ä¸Šå°±æ˜¯æ§åˆ¶æˆ–è€…çº¦æŸæ“ä½œï¼Œä½†å®è´¨å°±æ˜¯<code>Vue.$store.dispatch</code>ç­‰ç­‰ç­‰ã€‚</p><p>å…ˆæ˜¯ä»storeæ‹¿åˆ°vmä½œä¸ºæ—§çš„vmä»¥ä½œå¤‡ä»½ï¼ˆå½“ç„¶å¦‚æœä¸å­˜åœ¨å°±ä¸å­˜åœ¨å¤‡ä»½äº†ï¼‰ï¼Œç„¶åè®©<code>Vue</code>æŠŠè¿™æ®µæ“ä½œå®šä¹‰ä¸ºé™é»˜æ“ä½œã€‚</p><p>æ¥ç€ç”Ÿæˆé€šè¿‡<code>new Vue</code>ç”Ÿæˆæ–°çš„vmï¼ˆå‡å¦‚æœ‰æ—§çš„ä¹Ÿå¤‡ä»½äº†ï¼Œä¸ä¼šå½±å“ï¼‰ï¼Œæ¢å¤å–æ¶ˆé™é»˜æ“ä½œã€‚ï¼ˆæ„æ€å°±æ˜¯å·å·æ›¿æ¢äº†vmï¼‰</p><p>è‡³æ­¤æ–°çš„è§†å›¾å·²ç»æ›´æ–°å®Œæˆï¼Œæ²¡æœ‰å‡ºæ„å¤–çš„è¯ï¼Œå­˜åœ¨çš„åˆšåˆšå¤‡ä»½è¿‡çš„æ—§vmå°±å¯ä»¥å¹²æ‰çš„ï¼Œæ‰§è¡Œé”€æ¯</p><h3 id="withCommit"><a href="#withCommit" class="headerlink" title="_withCommit()"></a>_withCommit()</h3><p>é€šç¯‡æ˜¯æ²¡æœ‰æåˆ°è¿™ä¸ªå‡½æ•°çš„ï¼Œåˆ°è¿™é‡Œæä¸€ä¸‹æ˜¯å› ä¸ºï¼Œè‡³æ­¤è¿™ä¸ªå‡½æ•°ç”¨äº†ä¸¤æ¬¡ï¼Œæœ€åä¸€æ¬¡æ˜¯å‘ç”Ÿåœ¨åˆšåˆš<code>resetStoreVM</code>çš„æœ€åï¼Œå¦‚æœå­˜åœ¨çƒ­æ›´çš„æƒ…å†µä¸‹é‚£é‡Œã€‚ç¯‡å¹…ä¸é•¿ï¼Œæ‹¿å‡ºæ¥çœ‹ä¸€ä¸‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_withCommit (fn) &#123;</span><br><span class="line">  <span class="keyword">const</span> committing = <span class="keyword">this</span>._committing</span><br><span class="line">  <span class="keyword">this</span>._committing = <span class="literal">true</span></span><br><span class="line">  fn()</span><br><span class="line">  <span class="keyword">this</span>._committing = committing</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ¯•ç«ŸçŠ¶æ€ç®¡ç†ï¼Œå¦‚æœè°éƒ½èƒ½ç†è¿™ä¸ªçŠ¶æ€ï¼Œè¿˜éœ€è¦ç®¡ç†å¹²ä»€ä¹ˆã€‚è¿™é‡Œçš„ç†è§£å¯ä»¥å¥—å…¥<code>reducer</code>ååŠ©ç†è§£ï¼Œ<code>state</code>æœ‰ä¸”ä»…æœ‰<code>reducer</code>å¯ä»¥ä¿®æ”¹ï¼Œè€Œvuexçš„<code>mutations</code>ä¹Ÿå°±æ˜¯åšè¿™ä»½å·¥ä½œçš„åœ°æ–¹ã€‚ç„¶å<code>_withCommit</code>çš„è¯ï¼Œæ˜¯ä¸ªä»£ç†æ¥çš„ã€‚</p><p>è¿˜æ˜¯åˆšåˆšå¤‡ä»½æ—§vmé‚£ä¸ªæ ·å­ï¼Œå…ˆå¤‡ä»½å½“å‰çŠ¶æ€ï¼Œç„¶åæŠŠè¯¥çŠ¶æ€è½¬ä¸º<code>true</code>ï¼Œæ®è¯´æ˜¯å¦‚æœä¸æš‚æ—¶æ”¹å˜çŠ¶æ€ï¼Œä¸¥æ ¼<code>vuex</code>ä¼šè®¤ä¸ºè¿™æ˜¯éæ³•æ“ä½œï¼Œæ˜¯ç¦æ­¢çš„ã€‚</p><p>å°å°è§£é™¤ä¹‹åï¼Œæ‰§è¡Œä¸€ä¸‹å›è°ƒï¼ˆå„ç§éœ€è¦ç ´ä¾‹æ›´æ–°çš„æ•°æ®ï¼‰ï¼Œç„¶åå†å›ºç€ã€‚</p><p>ä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦å¤‡ä»½çŠ¶æ€æ¢å›å»ï¼Œè€Œä¸”è¿™é‡Œæ˜¯<code>boolean</code>ï¼Œéé»‘å³ç™½çš„ã€‚å®é™…ä¸Šå¦‚æœè¿™ä¸ªæ‰€è°“çš„å¼€å…³ï¼Œåœ¨æ‰§è¡Œè¿™é‡Œä¹‹å‰å°±æ˜¯å…³é—­çš„ï¼Œé‚£é“ç†é€šè¿‡ã€‚å¦‚æœåœ¨è¿™ä¹‹å‰ï¼Œå¼€å…³æœ¬æ¥å¼€ç€ï¼Œè¿™æ ·ä½ æ‰§è¡Œä¸€æ¬¡è¿™é‡Œï¼Œå°±åˆæŠŠå¼€å…³å…³å›å»çš„è¯ï¼Œä¼šå½±å“åˆ°å…¶ä»–åœ°æ–¹çš„æ­£å¸¸å·¥ä½œï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªâ€œåˆæ ¼çš„ç§˜ä¹¦â€ã€‚</p><p>åˆšåˆšæœ€åé‚£é‡Œçš„æ“ä½œ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">store._withCommit(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  oldVm._data.$$state = <span class="literal">null</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>å°±æ˜¯å‡å¦‚è¿™é‡Œæ˜¯<code>hot</code>çš„è¯ï¼Œå°±æŠŠæ—§vmçš„çŠ¶æ€æ”¹æˆ<code>null</code>ï¼Œç„¶åè·Ÿè¿™ä¸ªvmæœ‰å…³çš„watcherå’Œè®¡ç®—éƒ½ä¼šè¢«å¼ºè¡Œè§¦å‘æ›´æ–°ã€‚é€šè¿‡è¿™æ ·è®©é¡µé¢ä¸åˆ·æ–°ç„¶ååˆ·æ–°domã€‚</p><p>æœ€åä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆæ˜æ˜<code>this</code>æŒ‡å‘çš„æ˜¯æœ¬ä½“(Store)ï¼Œåˆå§‹åŒ–çš„æ—¶å€™éœ€è¦<code>const store = this</code></p><p>å›ç­”ï¼šJavaScripté‚£ä¹ˆç‰›é€¼çš„<code>this</code>ï¼Œå¢™å¤´è‰å±æ€§çš„ï¼Œä¸æ‰¾ä¸ªéœ€è¦å›ºå®šçš„ä½ç½®å›ºå®šä¸‹æ¥è‚¯å®šä¼šæœ‰æœºä¼šè¢«å¸¦åçš„ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»§ç»­ï¼Œè¿™æ¬¡å°è¯•é€è¡Œç†è§£Storeç±»çš„ä¸œè¥¿&lt;/p&gt;
&lt;p&gt;ç„¶åå…³äºè¿™æ¬¡ï¼Œä¸€äº›â€œå·¥å…·å‡½æ•°â€éƒ½é›†ä¸­åœ¨&lt;code&gt;util.js&lt;/code&gt;çš„è¿™ç§åšæ³•ï¼Œå·²ç»å¤Ÿæˆ‘å­¦çš„äº†ã€‚è¿™æ˜¯ä¸ªå¾ˆå—ç”¨çš„åšæ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸€äº›ç®€å•çš„ä¸œè¥¿&quot;&gt;&lt;a href=&quot;#ä¸€äº›ç®€å•çš„ä¸œè¥¿&quot; class=&quot;headerlink&quot; title=&quot;ä¸€äº›ç®€å•çš„ä¸œè¥¿&quot;&gt;&lt;/a&gt;ä¸€äº›ç®€å•çš„ä¸œè¥¿&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (process.env.NODE_ENV !== &lt;span class=&quot;string&quot;&gt;&#39;production&#39;&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assert(Vue, &lt;span class=&quot;string&quot;&gt;`must call Vue.use(Vuex) before creating a store instance.`&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assert(&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Promise&lt;/span&gt; !== &lt;span class=&quot;string&quot;&gt;&#39;undefined&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;`vuex requires a Promise polyfill in this browser.`&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  assert(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; Store, &lt;span class=&quot;string&quot;&gt;`Store must be called with the new operator.`&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;span class=&quot;comment&quot;&gt;// æ–­è¨€å‡½æ•°åœ¨utilï¼Œå¦‚æœä¸æ»¡è¶³å‰é¢çš„æƒ…å†µï¼Œåé¢ä»¥error æ’å‡ºæ¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ï¼ˆå®é™…ä¸Šå°±æ˜¯æƒ³çœ‹æœ‰æ²¡æœ‰åœ¨vueç¯å¢ƒä¸­å’Œæœ‰æ²¡æœ‰æ­£ç¡®å®‰è£…ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  plugins = [],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  strict = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; = options &lt;span class=&quot;comment&quot;&gt;// å®šä¹‰ä¸¤ä¸ªå˜é‡ï¼Œåœ¨ä¼ å…¥çš„å¯¹è±¡ä¸­æŠŠè¿™ä¸¤ä¸ªä¸œè¥¿æ‹¿å‡ºæ¥ï¼Œå­—é¢æ„æ€&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="å‰ç«¯æ€è€ƒ" scheme="https://colmugx.github.io/blog/categories/%E5%89%8D%E7%AB%AF%E6%80%9D%E8%80%83/"/>
    
    
      <category term="vue" scheme="https://colmugx.github.io/blog/tags/vue/"/>
    
      <category term="vuex" scheme="https://colmugx.github.io/blog/tags/vuex/"/>
    
  </entry>
  
  <entry>
    <title>vuexæºç ç†è§£ï¼ˆä¸€ï¼‰</title>
    <link href="https://colmugx.github.io/blog/2018/01/25/vuex-study-1/"/>
    <id>https://colmugx.github.io/blog/2018/01/25/vuex-study-1/</id>
    <published>2018-01-25T15:39:58.000Z</published>
    <updated>2019-03-22T16:07:34.680Z</updated>
    
    <content type="html"><![CDATA[<p>çœ‹ä¸ªä»£ç ä»£ä»·å¾ˆé«˜ï¼Œæˆ‘è¾¹è¯»è¾¹è½¬ç¬”ï¼Œç„¶åä¸€ä¸ªå¤±æ‰‹æŠŠæ‰‹æŒ‘äº†ä¸ªæ»´è¡€ä¸æ­¢â€¦ï¼ˆç¬”å¤´æŒ‘æ‰äº†ä¸€å±‚æ‰‹çš®ï¼‰</p><p>vuexå’Œdvaçš„æºç éƒ½æƒ³çœ‹ï¼Œä¸ç„¶æ²¡åŠæ³•çŸ¥é“ç›¸æ€§åœ¨å“ªã€‚</p><h3 id="ç”±å£è€Œå…¥"><a href="#ç”±å£è€Œå…¥" class="headerlink" title="ç”±å£è€Œå…¥"></a>ç”±å£è€Œå…¥</h3><p>è¿™éƒ½æš´éœ²å¹²å‡€äº†â€¦<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  Store,</span><br><span class="line">  install,</span><br><span class="line">  version: <span class="string">'__VERSION__'</span>,</span><br><span class="line">  mapState,</span><br><span class="line">  mapMutations,</span><br><span class="line">  mapGetters,</span><br><span class="line">  mapActions,</span><br><span class="line">  createNamespacedHelpers</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><code>install</code>è‚¯å®šæ˜¯Vueè€å¥—è·¯ï¼Œæƒ³æŠŠä¸œè¥¿å½“æ’ä»¶ç”¨è‚¯å®šè¦æš´éœ²è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªä¹‹å‰å†™ç»„ä»¶ç»å¸¸éœ€è¦ç¢°åˆ°ï¼Œå¼ƒä¹‹ï¼</p><p>è¿™æ¬¡å°±å…ˆè¯»æš´éœ²å‡ºæ¥çš„å››ä¸ªæ–¹æ³•å§</p><a id="more"></a><h3 id="è¾…åŠ©å‡½æ•°"><a href="#è¾…åŠ©å‡½æ•°" class="headerlink" title="è¾…åŠ©å‡½æ•°"></a>è¾…åŠ©å‡½æ•°</h3><h3 id="normalizeNamespace"><a href="#normalizeNamespace" class="headerlink" title="normalizeNamespace"></a>normalizeNamespace</h3><p>è¿™ä¸ªä¸œè¥¿å¯èƒ½è¦å…ˆè®²ï¼Œå› ä¸ºä½ çœ‹åˆ°<code>mapState</code>çš„ç¬¬ä¸€çœ¼ä½ å°±ä¼šçœ‹åˆ°ä»–ï¼Œè™½ç„¶ä¸é‡è¦ã€‚</p><p>è¿™åº”è¯¥æ˜¯ä¸€ä¸ªåˆå§‹åŒ–æˆ–è€…æ ‡å‡†åŒ–å‘½åç©ºé—´çš„æ–¹æ³•ï¼Œä¹‹å‰â€å°è¯•ç”¨dvaçš„ç†è§£å¯¹å¤„ç†æ•°æ®â€æœ‰é‡åˆ°ä½¿ç”¨å‘½åç©ºé—´çš„æƒ…å†µã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(<span class="string">'spacename'</span>, &#123;</span><br><span class="line">    count: <span class="function"><span class="params">state</span> =&gt;</span> state.count</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹ä¸€ä¸‹å®ç°æ–¹æ³•<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalizeNamespace</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">namespace, map</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> namespace !== <span class="string">'string'</span>) &#123;</span><br><span class="line">      map = namespace</span><br><span class="line">      namespace = <span class="string">''</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (namespace.charAt(namespace.length - <span class="number">1</span>) !== <span class="string">'/'</span>) &#123;</span><br><span class="line">      namespace += <span class="string">'/'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fn(namespace, map)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ˜ å…¥çœ¼å¸˜å°±æ˜¯ä¸€ä¸ªæŸ¯é‡Œäº†ï¼Œå¤§è‡´æ„æ€å°±æ˜¯å‘½åç©ºé—´éœ€è¦å¤„ç†ï¼Œå¦‚æœè¿›æ¥çš„å‡½æ•°ç¬¬ä¸€ä¸ªä¸æ˜¯ç©ºé—´åç§°é‚£ä¹ˆè‚¯å®šç›´æ¥æ˜¯å¯¹è±¡äº†ï¼Œå› ä¸ºæˆ‘ä»¬ä¹Ÿä¸æ˜¯å¿…é¡»ä½¿ç”¨å‘½åç©ºé—´ï¼Œæ¯”å¦‚æœ€æ™®é€šçš„è¿™æ ·çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    count: <span class="function"><span class="params">state</span> =&gt;</span> state.count</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰å‘½åç©ºé—´çš„è¯ï¼Œå°±æ ¹æ®å±‚æ•°ç”¨<code>/</code>åˆ†å¼€ï¼Œæ¯”å¦‚<code>app/save</code></p><h3 id="normalizeMap"><a href="#normalizeMap" class="headerlink" title="normalizeMap"></a>normalizeMap</h3><p>å¯¹ä¸èµ·è¿˜æ˜¯ä¸èƒ½è®²åˆ°<code>mapState</code>ï¼Œæ¯•ç«Ÿé€šç”¨çš„å‡½æ•°ç†è§£å®Œäº†ä¹‹åï¼Œæ¸¸æˆä¹Ÿå°±ç»“æŸäº†ã€‚ï¼ˆè¦ä¸æ€ä¹ˆè¯´æ˜¯è¾…åŠ©å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Normalize the map</span></span><br><span class="line"><span class="comment"> * normalizeMap([1, 2, 3]) =&gt; [ &#123; key: 1, val: 1 &#125;, &#123; key: 2, val: 2 &#125;, &#123; key: 3, val: 3 &#125; ]</span></span><br><span class="line"><span class="comment"> * normalizeMap(&#123;a: 1, b: 2, c: 3&#125;) =&gt; [ &#123; key: 'a', val: 1 &#125;, &#123; key: 'b', val: 2 &#125;, &#123; key: 'c', val: 3 &#125; ]</span></span><br><span class="line"><span class="comment"> * @param &#123;Array|Object&#125; map</span></span><br><span class="line"><span class="comment"> * @return &#123;Object&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalizeMap</span> (<span class="params">map</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(map)</span><br><span class="line">    ? map.map(<span class="function"><span class="params">key</span> =&gt;</span> (&#123; key, <span class="attr">val</span>: key &#125;))</span><br><span class="line">    : <span class="built_in">Object</span>.keys(map).map(<span class="function"><span class="params">key</span> =&gt;</span> (&#123; key, <span class="attr">val</span>: map[key] &#125;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨é‡Šéƒ½ç›´æ¥å‘Šè¯‰ä½ äº†ï¼å¯¹çš„å®é™…ä¸Šç»„ä»¶å¯¹<code>vuex</code>çš„è®¿é—®å¯ä»¥æœ‰ä¸¤ç§ï¼Œå¯¹è±¡æˆ–è€…æ•°ç»„ã€‚å¯¹è±¡çš„æƒ…å†µä¸Šé¢å·²ç»æœ‰äº†ï¼Œè¿˜æœ‰ä¸€ç§æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(<span class="string">'spacename'</span>, [</span><br><span class="line">    <span class="string">'count'</span></span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ˜¯ï¼Œå¦‚æœç»„ä»¶çš„å‚æ•°è·Ÿvuexè®¾å®šä¸€æ ·ï¼Œé‚£ä¹ˆå°±ç›´æ¥ä¼ å…¥æ•°ç»„åŒ¹é…ï¼Œç›¸å½“äº<code>this.count</code>æŒ‡å‘<code>this.$store.state.count</code></p><h3 id="mapState-mapMutations-mapGetters-mapActions"><a href="#mapState-mapMutations-mapGetters-mapActions" class="headerlink" title="mapState, mapMutations, mapGetters, mapActions"></a>mapState, mapMutations, mapGetters, mapActions</h3><p>å‰©ä¸‹çš„å°±çœŸçš„æ˜¯â€œæ‹¼è£…æœ¯â€çš„äº‹æƒ…äº†ï¼Œé€šè¿‡æš´éœ²å‡ºå»çš„è¾…åŠ©å‡½æ•°æ‰€æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œè½¬æ¢å¹¶è¿æ¥<code>vuex</code>ã€‚</p><p>ç›¸å½“äº<code>redux</code>æœ¬èº«åªæä¾›äº†çŠ¶æ€ç®¡ç†ï¼Œä¾¿æ·æ“ä½œéœ€è¦æ¥è§¦å„ç±»å‹æ’ä»¶ã€‚è€Œ<code>vuex</code>ä½œä¸º<code>vue</code>ä¸“å±çŠ¶æ€ç®¡ç†ï¼Œå·²ç»æä¾›äº†æœ€é€‚åˆ<code>vue</code>çš„æ“ä½œã€‚</p><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>ç”±äºè¾…åŠ©å‡½æ•°åšçš„å·¥ä½œå°±æ˜¯æä¾›åœ¨ç»„ä»¶ä¸­å¯¹<code>vuex</code>è¿æ¥æ“ä½œçš„å·¥ä½œï¼Œè€Œå‡½æ•°ä¸­çš„è½¬æ¢ç»“æœéƒ½ä¼šæ˜¯<code>this.$store</code>ã€‚åœ¨æ³¨å…¥<code>vue</code>çš„ç¯å¢ƒä¸­ï¼Œ<code>this</code>ä¸å‡ºæ„å¤–çš„è¯æ˜¯æŒ‡å‘<code>vue</code>åŸå‹ä¸Šçš„ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼Œ<code>vuex</code>å®é™…ä¸Šä¹Ÿæ˜¯ä½œä¸ºæ’ä»¶é™„ç€åœ¨<code>vue</code>åŸå‹ä¸­ã€‚</p><p>ä¸è¿‡å…³äºè¿™ä¸€ç‚¹ï¼Œåœ¨ä¸€å¼€å§‹å°±æœ‰æåˆ°ï¼Œ<code>vuex</code>æ˜¯é€šè¿‡æš´éœ²è‡ªå·±çš„å®‰è£…å‡½æ•°è®©<code>vue</code>å¯ä»¥ç›´æ¥<code>use()</code>ã€‚è€Œä¸”æˆ‘ä»¬åœ¨<code>main.js</code>ç»‘å®šæ—¶ä¹Ÿé»˜è®¤ä½¿ç”¨<code>store</code>è¿™ä¸ªkeyã€‚</p><p>è¿™æ ·çš„è¯ï¼Œåªè¦æ˜¯èƒ½è®¿é—®åˆ°<code>vue</code>çš„åœ°æ–¹å°±å¯ä»¥è®¿é—®åˆ°<code>$store</code>äº†ï¼ŒåŒ…æ‹¬ç»„ä»¶ã€‚<strong>ä»è€Œå¯ä»¥åšåˆ°ä¸éœ€è¦ä»€ä¹ˆè¾…åŠ©å‡½æ•°ä¹Ÿä¸éœ€è¦<code>actions</code>ç›´æ¥å¯¹çŠ¶æ€ç®¡ç†åŠ¨æ‰‹åŠ¨è„šã€‚</strong>è¿™ä¸ä»…æ˜¯reactçš„ä½¿ç”¨è€…æ„Ÿè§‰åˆ°çš„è¯§å¼‚æˆ–è€…åæ„Ÿäº†å§ã€‚</p><p>ä¸è¿‡å›¢é˜Ÿæ˜¯çŸ¥é“è¿™ç§æƒ…å†µçš„å­˜åœ¨çš„ï¼Œæ‰€ä»¥ä»–ä»¬æ˜¯<strong>æ¨èåœ¨ç»„ä»¶ä¸­ä½¿ç”¨è¾…åŠ©å‡½æ•°ï¼Œè¯·ä¸è¦ç›´æ¥æ“ä½œ</strong>ã€‚</p><p>ï¼ˆä¸è¿‡è¿™ä¸ªæ³¨é‡Šæœ€å¤šä¹Ÿå°±è¯´è¯´è€Œå·²ï¼Œæ‡‚é“ç†çš„äººéƒ½ä¼šè¿™ä¹ˆåšï¼›ä¸æ‡‚é“ç†çš„ï¼Œåªå­˜ç•™â€œæˆ‘åªè¦è§£å†³é—®é¢˜å°±è¡Œäº†â€çš„æŸäº›äººæ˜¯ä¸ä¼šè¿™ä¹ˆåšçš„ã€‚ï¼‰</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;çœ‹ä¸ªä»£ç ä»£ä»·å¾ˆé«˜ï¼Œæˆ‘è¾¹è¯»è¾¹è½¬ç¬”ï¼Œç„¶åä¸€ä¸ªå¤±æ‰‹æŠŠæ‰‹æŒ‘äº†ä¸ªæ»´è¡€ä¸æ­¢â€¦ï¼ˆç¬”å¤´æŒ‘æ‰äº†ä¸€å±‚æ‰‹çš®ï¼‰&lt;/p&gt;
&lt;p&gt;vuexå’Œdvaçš„æºç éƒ½æƒ³çœ‹ï¼Œä¸ç„¶æ²¡åŠæ³•çŸ¥é“ç›¸æ€§åœ¨å“ªã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç”±å£è€Œå…¥&quot;&gt;&lt;a href=&quot;#ç”±å£è€Œå…¥&quot; class=&quot;headerlink&quot; title=&quot;ç”±å£è€Œå…¥&quot;&gt;&lt;/a&gt;ç”±å£è€Œå…¥&lt;/h3&gt;&lt;p&gt;è¿™éƒ½æš´éœ²å¹²å‡€äº†â€¦&lt;br&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  Store,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  install,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  version: &lt;span class=&quot;string&quot;&gt;&#39;__VERSION__&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  mapState,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  mapMutations,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  mapGetters,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  mapActions,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  createNamespacedHelpers&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;install&lt;/code&gt;è‚¯å®šæ˜¯Vueè€å¥—è·¯ï¼Œæƒ³æŠŠä¸œè¥¿å½“æ’ä»¶ç”¨è‚¯å®šè¦æš´éœ²è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªä¹‹å‰å†™ç»„ä»¶ç»å¸¸éœ€è¦ç¢°åˆ°ï¼Œå¼ƒä¹‹ï¼&lt;/p&gt;
&lt;p&gt;è¿™æ¬¡å°±å…ˆè¯»æš´éœ²å‡ºæ¥çš„å››ä¸ªæ–¹æ³•å§&lt;/p&gt;
    
    </summary>
    
      <category term="å‰ç«¯æ€è€ƒ" scheme="https://colmugx.github.io/blog/categories/%E5%89%8D%E7%AB%AF%E6%80%9D%E8%80%83/"/>
    
    
      <category term="vue" scheme="https://colmugx.github.io/blog/tags/vue/"/>
    
      <category term="vuex" scheme="https://colmugx.github.io/blog/tags/vuex/"/>
    
  </entry>
  
</feed>
