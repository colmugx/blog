<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="browsermode" content="application"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Colmugx 's Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="msapplication-navbutton-color" content="#666666"><meta name="format-detection" content="telephone=no"><link rel="apple-touch-icon" sizes="72x72" href="https://avatars2.githubusercontent.com/u/21327913?v=3&s=466"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://avatars2.githubusercontent.com/u/21327913?v=3&s=466"><meta name="subtitle" content="让一切充满想象力"><meta name="description" content="Co1MugX Blog"><meta name="keywords" content="rust, quickjs, vite, solid, ssr, nlvi"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="preload" href="/blog/script/lib/nlvi/banderole.js" as="script"><link rel="apple-touch-startup-image" media="(device-width: 375px)" href="assets/apple-launch-1125x2436.png"><link rel="apple-touch-startup-image" media="(orientation: landscape)" href="assets/apple-touch-startup-image-2048x1496.png"><link rel="stylesheet" href="/blog/style/style.css"><script>var nlviconfig={title:"Colmugx 's Blog",author:"colmugx",baseUrl:"/blog/",theme:{scheme:"banderole",lightbox:!0,animate:!0,search:!0,friends:!0,reward:!1,pjax:!0,lazy:!0,toc:!0,prism:!0}}</script><link rel="stylesheet" href="/blog/script/lib/prism/prism.css"><link rel="stylesheet" href="/blog/script/lib/remix/remixicon.css"><link rel="stylesheet" href="/blog/syuanpi/syuanpi.min.css"><link rel="icon" href="https://avatars2.githubusercontent.com/u/21327913?v=3&s=466"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-98059014-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-98059014-1")</script><style>@font-face{font-family:Allura;font-display:fallback;src:url(/blog/font/allura/allura.ttf)}</style><title>我早就想拿 QuickJS 做 SSR 了 · Colmugx 's Blog</title><meta name="generator" content="Hexo 6.2.0"></head><body><div class="container" data-barba="wrapper"><header class="header" id="header"><div class="header-wrapper"><div class="logo"><div class="logo-inner syuanpi tvIn"><h1><a href="/blog/">Colmugx 's Blog</a></h1><span id="subtitle">让一切充满想象力</span></div></div><nav class="main-nav"><ul class="main-nav-list syuanpi tvIn"><li class="menu-item"><a href="javascript:;" id="search-btn" aria-label="Search"><i class="ri-search-2-line"></i></a></li><li class="menu-item"><a href="/blog/" id="article"><span class="base-name">ARTICLE</span></a></li><li class="menu-item"><a href="/blog/archives" id="archives"><span class="base-name">ARCHIVES</span></a></li><li class="menu-item"><a href="javascript:;" id="tags"><span class="base-name">TAGS</span></a></li><li class="menu-item"><a href="/blog/about" id="about"><span class="base-name">ABOUT</span></a></li><li class="menu-item"><a href="/blog/rss.xml" id="rss"><span class="base-name">RSS</span></a></li></ul></nav></div></header><div class="mobile-header" id="mobile-header"><div class="mobile-header-nav"><div class="mobile-header-item" id="mobile-left"><div class="header-menu-item"><div class="header-menu-line"></div></div></div><h1 class="mobile-header-title"><a href="/">Colmugx 's Blog</a></h1><div class="mobile-header-item"></div></div><div class="mobile-header-body"><ul class="mobile-header-list"><li class="mobile-nav-item syuanpi fadeInRightShort back-0"><a href="/blog/">ARTICLE</a></li><li class="mobile-nav-item syuanpi fadeInRightShort back-1"><a href="/blog/archives">ARCHIVES</a></li><li class="mobile-nav-item syuanpi fadeInRightShort back-2"><a href="javascript:;" id="mobile-tags">TAGS</a></li><li class="mobile-nav-item syuanpi fadeInRightShort back-3"><a href="/blog/about">ABOUT</a></li><li class="mobile-nav-item syuanpi fadeInRightShort back-4"><a href="/blog/rss.xml">RSS</a></li></ul></div></div><div class="container-inner"><main class="main"><div class="main-inner" data-barba="container" data-barba-namespace="post"><article class="post is_post"><header class="post-header"><div class="post-time syuanpi fadeInRightShort back-1"><div class="post-time-wrapper"><time>2022-12-12</time> <span class="post-category"><a href="/blog/categories/%E6%9B%B2%E8%8B%91%E6%9D%82%E5%9D%9B/">曲苑杂坛</a></span></div></div><h1 class="post-title syuanpi fadeInRightShort back-2">我早就想拿 QuickJS 做 SSR 了</h1></header><div class="post-content syuanpi fadeInRightShort back-3"><blockquote><p>鸽了一年，不重要，下一篇解释</p></blockquote><p>现在几乎现代框架 SSR 默认都是用 <code>node</code>，难道不能用别的？原因很简单，同构，有天然适合的执行/运行时环境。拿 <code>React</code> 举例子，SSR 分两个步骤：</p><ol><li>静态部分先用服务器渲染一遍，最基本的都是拿入口过一遍 <code>renderToString</code></li><li>运行时水合，也就是不用 <code>render</code> 而是 <code>hydrate</code>，因为已经不需要在运行时创建节点，只需要绑定</li></ol><p>所以问题就很清晰：默认或者常规手段的 <code>hydrate</code> 和 <code>renderToString</code> 都是 JS 函数</p><p>当 QuickJS 刚出现在我的眼前的时候，特别是有人给 QuickJS 提供 rust 绑定的时候，我就在想一个问题：<strong>这 B 是不是可以直接拿来做 SSR ？</strong></p><span id="more"></span><h2 id="Why-QuickJS">Why QuickJS</h2><p>毕竟 rust 早就有 v8 绑定，<code>deno</code> 用的就是</p><p>你说得对，但是 QuickJS 是由著名神仙 Fabrice Bellard 所打造的一个小型并且可嵌入的 Javascript 引擎，它支持ES2020规范，包括模块，异步生成器和代理器。在这里，你可以用任何现代的 JavaScript 语言片段在几乎任何语言环境中运行，在自由的环境中邂逅不同的语言和技术栈，同时它还支持 Decimal 提案和运算符重载提案……</p><p>其实就是不挑</p><h2 id="前端">前端</h2><p>流水账，主要是踩坑流程</p><p>前端部分自不必多说，玩了两年半的 <code>solidjs</code>，现在只要不是上班都是用这款（其实上班能夹带私货的时候也用）</p><p><a target="_blank" rel="noopener" href="https://github.com/solidjs/solid/blob/main/packages/solid-ssr/README.md">solid-ssr</a> 提供 SSR 各种形态的 demo，但他们都有一个特点：使用非常原生的 <code>rollup</code> 插件作为演示<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>，那我正经用也不用这个啊，那不行，就得按 vite 工作流来。</p><p>so</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pnpm dlx degit solidjs&#x2F;templates&#x2F;ts</code></pre><p>首先 <code>vite.config.ts</code> 有两处调整：</p><ul><li>solid 插件激活 ssr，这在处理 ssr 输出时有用</li><li><code>noExternal</code>，后面讲为什么</li></ul><p>改完之后大概是这样</p><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">export default defineConfig(&#123;
  plugins: [solidPlugin(&#123; ssr: true &#125;)],
  build: &#123;
    target: &quot;esnext&quot;,
  &#125;,
  ssr: &#123;
    noExternal: true,
  &#125;,
&#125;);</code></pre><p><code>package.json</code> 新增一个 <code>script</code>，不加也行</p><pre class="line-numbers language-json" data-language="json"><code class="language-json">&#123;
  &quot;type&quot;: &quot;module&quot;,
  &quot;scripts&quot;: &#123;
    &quot;build&quot;: &quot;vite build --outDir .&#x2F;dist&#x2F;client&quot;,
    &quot;build:server&quot;: &quot;vite build --ssr .&#x2F;src&#x2F;entry-server.tsx --outDir .&#x2F;dist&#x2F;server&quot;,
  &#125;
&#125;</code></pre><p>这里把输出路径都有点调整，目的是把客户端产物和服务端产物分开，不这么做也行。<strong>但入口是肯定分开的</strong>，即使这很基操不需要写下来</p><p>按照 vite 建议的做法，客户端入口从 <code>index.tsx</code> 改为 <code>entry-client.tsx</code>，则服务端入口为 <code>entry-server.tsx</code>，内容每个框架都差不多，按照前端框架的建议做即可</p><p><strong>记得客户端真实入口 <code>index.html</code> 里的 script 路径也要改！</strong></p><p>过一下 build，能看到 dist 下两组目录，下一步</p><h2 id="服务端">服务端</h2><p>Web Framework 不用挑，用的最多的（可能也是两年半），可能也是目前来说依然最虎的 <code>actix-web</code>，需要花心思的是找 binding</p><p>首先用的是 <a target="_blank" rel="noopener" href="https://github.com/theduke/quickjs-rs">theduke/quickjs-rs</a>，在品鉴这个项目的时候还顺便搜到另一个项目 <a target="_blank" rel="noopener" href="https://github.com/galvez/fast-vue-ssr">galvez/fast-vue-ssr</a>，这是一个类似的操作：通过 QuickJS SSR Vue，可以读读看</p><blockquote><p>Node outperforms QuickJS by a wide margin. Especially with enough cores and memory. However, QuickJS is very small and has very low memory consumption, so running it threaded in a Rust shell makes it possible to have very high throughput using very few resources in comparison.</p></blockquote><p>顺便品鉴完这个项目之后，开始缝合。不出意外的话马上要出意外了</p><h3 id="坑1：">坑1：</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">unsupported keyword: export</code></pre><p>这里可以讲讲为什么上面要 <code>noExternal</code> ，原因很简答，vite 默认你是会用 node 的，加上 type 是 <code>module</code>，结果就是编译后的服务端入口依然有 <code>import</code> 和 <code>export</code></p><p>所以目的很简单：把所有用到的 js 都打成一个文件。并且这里还需要一个操作：去掉最后一行，也就是 <code>export</code> 部分</p><p>默认情况下是在 QuickJS global 环境下 eval 程序，直接当成 <code>REPL</code> 来用就完事了</p><h3 id="坑2：">坑2：</h3><blockquote><p>找不到 setTimeout</p></blockquote><p>一番查找，<code>setTimeout</code> 由 QuickJS 内置 module: os 提供，按道理来说 <code>setTimeout</code> 应该能在 globalThis 直接调用</p><p>没关系，直接 eval 进去吧</p><h3 id="坑3：">坑3：</h3><blockquote><p>不存在 os</p></blockquote><p><strong>这你妈你说你妈呢？</strong> 这怎么可能啊</p><p>只见 Issue 区赫然有这么一行</p><ul><li><a target="_blank" rel="noopener" href="https://github.com/theduke/quickjs-rs/issues/123">Is there any way to use std, os, and global?</a></li></ul><p>Ok，寄</p><h3 id="Finish">Finish</h3><p>本来看着是 star 最多的库</p><p>算了，还得是直接绑定来得稳定，虽然比较麻烦，相当于换个语言直接使用框架。但高级封装至少比低级封装容易使用</p><p>于是改用这个高级封装：<a target="_blank" rel="noopener" href="https://github.com/DelSkayn/rquickjs">DelSkayn/rquickjs</a>，这个就非常纯，需要直接生吃 Document</p><p>简单验证</p><pre class="line-numbers language-rust" data-language="rust"><code class="language-rust">let test &#x3D; ctx.eval(&quot;let a &#x3D; 1; let b &#x3D; 2; a + b&quot;).unwrap();
assert!(3, test);</code></pre><p>发现没问题，直接搬</p><pre class="line-numbers language-rust" data-language="rust"><code class="language-rust">let result &#x3D; context.with(|ctx| &#123;
    let _a: String &#x3D; ctx.eval_file(&quot;ssr&#x2F;dist&#x2F;server&#x2F;entry-server.js&quot;).unwrap();
    let result: Object &#x3D; ctx.eval(r#&quot;render()&quot;#).unwrap();

    let head: String &#x3D; result.get(&quot;head&quot;).unwrap();
    let body: String &#x3D; result.get(&quot;body&quot;).unwrap();
    let mut map &#x3D; HashMap::&lt;String, String&gt;::new();

    map.insert(&quot;body&quot;.to_string(), body);
    map.insert(&quot;head&quot;.to_string(), head);

    map
&#125;);</code></pre><p>这里转一次 <code>HashMap</code> 的原因是：<code>Object</code> 的类型没有声明，直接 return 出去有静态检查问题，rust 不允许</p><p>但因为是概念验证，先转成已知类型出去顶着用</p><p>编译没问题，继续搬</p><pre class="line-numbers language-rust" data-language="rust"><code class="language-rust">let template &#x3D; read_to_string(&quot;ssr&#x2F;dist&#x2F;client&#x2F;index.html&quot;).unwrap();

let html &#x3D; template
    .replace(&quot;&lt;!--app-head--&gt;&quot;, result.get(&quot;head&quot;).unwrap())
    .replace(&quot;&lt;!--app-body--&gt;&quot;, result.get(&quot;body&quot;).unwrap());
</code></pre><p>打印 html，确认内容就是一个完整的 html 文件。<strong>成了！</strong></p><p>那直接上 server-side，简简单单写个 get</p><pre class="line-numbers language-rust" data-language="rust"><code class="language-rust">#[get(&quot;&#x2F;&quot;)]
async fn hello() -&gt; impl Responder &#123;
    let html &#x3D; make_html();
    HttpResponse::Ok()
        .status(StatusCode::OK)
        .content_type(&quot;text&#x2F;html&quot;)
        .body(html)
&#125;

#[actix_web::main]
async fn main() -&gt; std::io::Result&lt;()&gt; &#123;
    HttpServer::new(|| &#123;
        App::new()
            &#x2F;&#x2F; 静态文件映射
            .service(Files::new(&quot;&#x2F;assets&quot;, &quot;ssr&#x2F;dist&#x2F;client&#x2F;assets&quot;))
            .service(hello)
    &#125;)
    .bind((&quot;127.0.0.1&quot;, 8080))?
    .run()
    .await
&#125;</code></pre><p>浏览器输入一个令人熟悉的 <code>localhost:8080</code>，正常运行，JS 绑定也一切正常</p><p>代码会发布在 <a target="_blank" rel="noopener" href="https://github.com/colmugx/quickjs-ssr">colmugx/quickjs-ssr</a></p><h2 id="最后-3">最后</h2><p>这里只是一个简单验证，SSR 的 real world 肯定不是这么两步就能完成，否则就不需要像 <code>next.js</code> 和 <code>SolidStart</code> 这样的上层框架</p><p>并且，除了服务端需要考虑线程池等等这些问题之外，拥有 JIT 的 v8 可能性能上会更优</p><p>但我的目的也很简单，我要的不是 SSR，而是两个需求</p><ul><li>给 <code>ayaka</code> 提供一个静态页面生成的方式，但默认还是像 <code>saika</code> 那样的运行时 fetch</li><li>给 <code>kazusa</code> 提供脚本执行环境，不过这是个 optional，主要维护还是 lua 执行环境，这与既定用户群有关</li></ul><p>别问为什么又来一个 <code>ayaka</code>，问就是灵感来源 <a target="_blank" rel="noopener" href="https://github.com/2nthony/saika">2nthony/saika</a>，而不叫<code>sakuya</code>的原因仅是因为那会在玩原神银趴</p><p>最后，这可能是第一篇来自于这个主题 3.5 版本的文章，想给用 hexo 的这段时间一个完美的休止符，然后去开发有新设计风格的 nlvi 4</p><p>但是重构一半，交互上还是有缺陷，只不过说不影响阅读</p><h2 id="Links">Links</h2><ul><li><a target="_blank" rel="noopener" href="https://github.com/solidjs/solid/blob/main/packages/solid-ssr/README.md">solid-ssr</a></li><li><a target="_blank" rel="noopener" href="https://github.com/DelSkayn/rquickjs">DelSkayn/rquickjs</a></li><li><a target="_blank" rel="noopener" href="https://github.com/theduke/quickjs-rs">theduke/quickjs-rs</a></li><li><a target="_blank" rel="noopener" href="https://github.com/galvez/fast-vue-ssr">galvez/fast-vue-ssr</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>solidjs 的 vite 插件来源于 rollup 插件的上层封装 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section></div><div class="post-tags syuanpi fadeInRightShort back-3"><a href="/blog/tags/rust/">rust</a> <a href="/blog/tags/quickjs/">quickjs</a> <a href="/blog/tags/vite/">vite</a> <a href="/blog/tags/solid/">solid</a> <a href="/blog/tags/ssr/">ssr</a></div><hr class="copy-line"><div class="post-copyright"><div class="copy-author"><span>作者 :</span> <span>colmugx</span></div><div class="copy-url"><span>地址 :</span> <a href="https://colmugx.github.io/blog/2022/12/12/quickjs-ssr/">https://colmugx.github.io/blog/2022/12/12/quickjs-ssr/</a></div><div class="copy-origin"><span>来源 :</span> <a href="https://colmugx.github.io/blog">https://colmugx.github.io/blog</a></div><div class="copy-license">著作权归作者所有，转载请联系作者获得授权。</div></div></article><nav class="article-page"><a href="/blog/2022/12/15/web-optimization/" id="art-left" class="art-left"><span class="next-title"><i class="ri-arrow-left-s-line"></i>web 「性能优化」 </span></a><a href="/blog/2022/01/07/to-be-a-gamer/" id="art-right" class="art-right"><span class="prev-title">作为玩家 成为玩家<i class="ri-arrow-right-s-line"></i></span></a></nav><i id="com-switch" class="ri-arrow-down-s-line jumping infinite" style="font-size:24px;display:block;text-align:center;transform:rotate(180deg);animation-duration:2s"></i><div class="post-comments" id="post-comments" style="display:block;margin:auto 16px"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script type="text/javascript">var disqus_shortname="co1mugxs-blog";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script></div><aside class="post-toc"><div class="toc-inner"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-QuickJS"><span class="toc-text">Why QuickJS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF"><span class="toc-text">前端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-text">服务端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%911%EF%BC%9A"><span class="toc-text">坑1：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%912%EF%BC%9A"><span class="toc-text">坑2：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%913%EF%BC%9A"><span class="toc-text">坑3：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Finish"><span class="toc-text">Finish</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%90%8E-3"><span class="toc-text">最后</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Links"><span class="toc-text">Links</span></a></li></ol></div></aside><script src="/blog/script/lib/prism/prism.js" async></script></div></main><footer class="footer syuanpi fadeIn" id="footer"><hr><div class="footer-wrapper"><div class="left"><div class="contact-icon"><a href="https://www.zhihu.com/people/colmugx" class="ri-zhihu-fill" title="zhihu"></a> <a href="https://github.com/colmugx" class="ri-github-fill" title="github"></a></div></div><div class="right"><div class="copyright"><div class="info"><span>&copy;</span> <span>2016 ~ 2023</span> <span>❤</span> <span>colmugx</span></div><div class="theme"><span>动力来源于 <a href="http://hexo.io/" target="_blank" rel="noopener">Hexo </a></span><span>主题 <a href="https://github.com/ColMugX/hexo-theme-Nlvi">Nlvi</a></span></div></div></div></div></footer></div><div class="tagcloud" id="tagcloud"><div class="tagcloud-taglist"><div class="tagcloud-tag"><button>函数式编程</button></div><div class="tagcloud-tag"><button>Nlvi</button></div><div class="tagcloud-tag"><button>PWA</button></div><div class="tagcloud-tag"><button>Redux</button></div><div class="tagcloud-tag"><button>组件化</button></div><div class="tagcloud-tag"><button>软件工程</button></div><div class="tagcloud-tag"><button>JavaScript</button></div><div class="tagcloud-tag"><button>vue</button></div><div class="tagcloud-tag"><button>electron</button></div><div class="tagcloud-tag"><button>editor</button></div><div class="tagcloud-tag"><button>docker</button></div><div class="tagcloud-tag"><button>react</button></div><div class="tagcloud-tag"><button>TypeScript</button></div><div class="tagcloud-tag"><button>flutter</button></div><div class="tagcloud-tag"><button>tauri</button></div><div class="tagcloud-tag"><button>rust</button></div><div class="tagcloud-tag"><button>godot</button></div><div class="tagcloud-tag"><button>cpp</button></div><div class="tagcloud-tag"><button>pong</button></div><div class="tagcloud-tag"><button>weapp</button></div><div class="tagcloud-tag"><button>hammerspoon</button></div><div class="tagcloud-tag"><button>swift</button></div><div class="tagcloud-tag"><button>NAS</button></div><div class="tagcloud-tag"><button>linux</button></div><div class="tagcloud-tag"><button>NPM</button></div><div class="tagcloud-tag"><button>vim</button></div><div class="tagcloud-tag"><button>quickjs</button></div><div class="tagcloud-tag"><button>vite</button></div><div class="tagcloud-tag"><button>solid</button></div><div class="tagcloud-tag"><button>ssr</button></div><div class="tagcloud-tag"><button>i18n</button></div><div class="tagcloud-tag"><button>redux</button></div><div class="tagcloud-tag"><button>Syuanpi</button></div><div class="tagcloud-tag"><button>CSS</button></div><div class="tagcloud-tag"><button>年度总结</button></div><div class="tagcloud-tag"><button>actix</button></div><div class="tagcloud-tag"><button>perfect</button></div><div class="tagcloud-tag"><button>vapor</button></div><div class="tagcloud-tag"><button>vuex</button></div><div class="tagcloud-tag"><button>dva</button></div><div class="tagcloud-tag"><button>preact</button></div><div class="tagcloud-tag"><button>性能优化</button></div><div class="tagcloud-tag"><button>设计</button></div><div class="tagcloud-tag"><button>简历</button></div></div><div class="tagcloud-postlist active"><h2>函数式编程</h2><div class="tagcloud-post"><a href="/blog/2017/12/07/about-currying/"><time class="tagcloud-posttime">2017 / 12 / 07</time> <span>扯扯柯里化</span></a></div><div class="tagcloud-post"><a href="/blog/2017/12/27/funny-monad/"><time class="tagcloud-posttime">2017 / 12 / 27</time> <span>有意思的monad记录</span></a></div></div><div class="tagcloud-postlist"><h2>Nlvi</h2><div class="tagcloud-post"><a href="/blog/2019/04/17/about-nlvi-pwa/"><time class="tagcloud-posttime">2019 / 04 / 17</time> <span>关于 Nlvi 「添加到桌面」</span></a></div><div class="tagcloud-post"><a href="/blog/2019/03/25/bye-nlvi/"><time class="tagcloud-posttime">2019 / 03 / 25</time> <span>最后的 Nlvi</span></a></div></div><div class="tagcloud-postlist"><h2>PWA</h2><div class="tagcloud-post"><a href="/blog/2019/04/17/about-nlvi-pwa/"><time class="tagcloud-posttime">2019 / 04 / 17</time> <span>关于 Nlvi 「添加到桌面」</span></a></div></div><div class="tagcloud-postlist"><h2>Redux</h2><div class="tagcloud-post"><a href="/blog/2019/03/02/about-redux/"><time class="tagcloud-posttime">2019 / 03 / 02</time> <span>看过 Redux 之后，我写了一个不负责任的状态管理</span></a></div></div><div class="tagcloud-postlist"><h2>组件化</h2><div class="tagcloud-post"><a href="/blog/2021/02/16/component-and-engineering/"><time class="tagcloud-posttime">2021 / 02 / 16</time> <span>组件化与工程设计</span></a></div></div><div class="tagcloud-postlist"><h2>软件工程</h2><div class="tagcloud-post"><a href="/blog/2021/02/16/component-and-engineering/"><time class="tagcloud-posttime">2021 / 02 / 16</time> <span>组件化与工程设计</span></a></div></div><div class="tagcloud-postlist"><h2>JavaScript</h2><div class="tagcloud-post"><a href="/blog/2018/07/04/different-function/"><time class="tagcloud-posttime">2018 / 07 / 04</time> <span>我就写个方法，这么麻烦？</span></a></div><div class="tagcloud-post"><a href="/blog/2017/12/20/exchange-number/"><time class="tagcloud-posttime">2017 / 12 / 20</time> <span>冒泡排序的骚思路</span></a></div><div class="tagcloud-post"><a href="/blog/2017/02/22/js-extends/"><time class="tagcloud-posttime">2017 / 02 / 22</time> <span>来搞一手关于Javascript对象继承</span></a></div><div class="tagcloud-post"><a href="/blog/2017/08/14/js-call-apply-bind/"><time class="tagcloud-posttime">2017 / 08 / 14</time> <span>JavaScript的call，bind，apply</span></a></div><div class="tagcloud-post"><a href="/blog/2017/11/20/js-console/"><time class="tagcloud-posttime">2017 / 11 / 20</time> <span>我还在用Console.log()？</span></a></div><div class="tagcloud-post"><a href="/blog/2017/03/02/js-for/"><time class="tagcloud-posttime">2017 / 03 / 02</time> <span>JavaScript所有for</span></a></div><div class="tagcloud-post"><a href="/blog/2017/03/03/js-this/"><time class="tagcloud-posttime">2017 / 03 / 03</time> <span>关于JavaScript的this</span></a></div><div class="tagcloud-post"><a href="/blog/2017/12/23/js-method-chaining/"><time class="tagcloud-posttime">2017 / 12 / 23</time> <span>JavaScript链式方法</span></a></div><div class="tagcloud-post"><a href="/blog/2018/02/28/promise-chaining/"><time class="tagcloud-posttime">2018 / 02 / 28</time> <span>promise链式调用</span></a></div><div class="tagcloud-post"><a href="/blog/2019/05/28/react-component-method/"><time class="tagcloud-posttime">2019 / 05 / 28</time> <span>react函数级写法和继承写法有什么区别？</span></a></div><div class="tagcloud-post"><a href="/blog/2017/10/17/reference-equal-pointer/"><time class="tagcloud-posttime">2017 / 10 / 17</time> <span>引用等于指针吗？</span></a></div><div class="tagcloud-post"><a href="/blog/2023/02/14/relearn-javascript/"><time class="tagcloud-posttime">2023 / 02 / 14</time> <span>重新学习 JavaScript</span></a></div><div class="tagcloud-post"><a href="/blog/2018/01/04/replace-space/"><time class="tagcloud-posttime">2018 / 01 / 04</time> <span>剑指Offer —— 替换空格</span></a></div><div class="tagcloud-post"><a href="/blog/2017/12/11/vue-jsx/"><time class="tagcloud-posttime">2017 / 12 / 11</time> <span>使用JSX的VUE应用开发体验</span></a></div><div class="tagcloud-post"><a href="/blog/2019/04/20/why-vue-proxy/"><time class="tagcloud-posttime">2019 / 04 / 20</time> <span>defineProperty? Proxy?</span></a></div><div class="tagcloud-post"><a href="/blog/2019/03/27/you-dont-know-let/"><time class="tagcloud-posttime">2019 / 03 / 27</time> <span>我今天给 let 安排了</span></a></div></div><div class="tagcloud-postlist"><h2>vue</h2><div class="tagcloud-post"><a href="/blog/2018/03/12/dji-interview/"><time class="tagcloud-posttime">2018 / 03 / 12</time> <span>关于四轴的踩坑指南</span></a></div><div class="tagcloud-post"><a href="/blog/2017/08/22/do-markdown-hexo/"><time class="tagcloud-posttime">2017 / 08 / 22</time> <span>搞electron + vue + webpack2 + TypeScript什么体验</span></a></div><div class="tagcloud-post"><a href="/blog/2017/12/11/vue-jsx/"><time class="tagcloud-posttime">2017 / 12 / 11</time> <span>使用JSX的VUE应用开发体验</span></a></div><div class="tagcloud-post"><a href="/blog/2018/01/25/vuex-study-1/"><time class="tagcloud-posttime">2018 / 01 / 25</time> <span>vuex源码理解（一）</span></a></div><div class="tagcloud-post"><a href="/blog/2021/11/24/why-not-eventbus/"><time class="tagcloud-posttime">2021 / 11 / 24</time> <span>为什么我没想过 EventBus</span></a></div><div class="tagcloud-post"><a href="/blog/2018/01/30/vuex-study-2/"><time class="tagcloud-posttime">2018 / 01 / 30</time> <span>vuex源码理解（二）</span></a></div><div class="tagcloud-post"><a href="/blog/2019/04/20/why-vue-proxy/"><time class="tagcloud-posttime">2019 / 04 / 20</time> <span>defineProperty? Proxy?</span></a></div></div><div class="tagcloud-postlist"><h2>electron</h2><div class="tagcloud-post"><a href="/blog/2017/08/22/do-markdown-hexo/"><time class="tagcloud-posttime">2017 / 08 / 22</time> <span>搞electron + vue + webpack2 + TypeScript什么体验</span></a></div><div class="tagcloud-post"><a href="/blog/2020/06/21/electron-crawler/"><time class="tagcloud-posttime">2020 / 06 / 21</time> <span>利用 electron 爬图片</span></a></div><div class="tagcloud-post"><a href="/blog/2017/09/19/what-the-feeling-about-hyper/"><time class="tagcloud-posttime">2017 / 09 / 19</time> <span>使用桌面应用写hexo博客是什么体验？</span></a></div></div><div class="tagcloud-postlist"><h2>editor</h2><div class="tagcloud-post"><a href="/blog/2017/08/22/do-markdown-hexo/"><time class="tagcloud-posttime">2017 / 08 / 22</time> <span>搞electron + vue + webpack2 + TypeScript什么体验</span></a></div><div class="tagcloud-post"><a href="/blog/2018/02/13/new-life-nvim/"><time class="tagcloud-posttime">2018 / 02 / 13</time> <span>抛下不成熟，开始nvim</span></a></div></div><div class="tagcloud-postlist"><h2>docker</h2><div class="tagcloud-post"><a href="/blog/2020/03/29/docker-container-bridge/"><time class="tagcloud-posttime">2020 / 03 / 29</time> <span>docker 容器内通信</span></a></div></div><div class="tagcloud-postlist"><h2>react</h2><div class="tagcloud-post"><a href="/blog/2020/06/21/electron-crawler/"><time class="tagcloud-posttime">2020 / 06 / 21</time> <span>利用 electron 爬图片</span></a></div><div class="tagcloud-post"><a href="/blog/2020/08/08/hi-swift-react/"><time class="tagcloud-posttime">2020 / 08 / 08</time> <span>我又不跨平台我为什么要 electron</span></a></div><div class="tagcloud-post"><a href="/blog/2019/05/28/react-component-method/"><time class="tagcloud-posttime">2019 / 05 / 28</time> <span>react函数级写法和继承写法有什么区别？</span></a></div><div class="tagcloud-post"><a href="/blog/2020/01/31/react-translate/"><time class="tagcloud-posttime">2020 / 01 / 31</time> <span>利用 Context 传递多语言文本</span></a></div><div class="tagcloud-post"><a href="/blog/2019/03/08/redux-combinereducers/"><time class="tagcloud-posttime">2019 / 03 / 08</time> <span>Redux —— combineReducers</span></a></div><div class="tagcloud-post"><a href="/blog/2022/12/15/web-optimization/"><time class="tagcloud-posttime">2022 / 12 / 15</time> <span>web 「性能优化」</span></a></div><div class="tagcloud-post"><a href="/blog/2021/11/24/why-not-eventbus/"><time class="tagcloud-posttime">2021 / 11 / 24</time> <span>为什么我没想过 EventBus</span></a></div></div><div class="tagcloud-postlist"><h2>TypeScript</h2><div class="tagcloud-post"><a href="/blog/2018/11/19/gamble-fn/"><time class="tagcloud-posttime">2018 / 11 / 19</time> <span>一位赌狗前端的自我修养</span></a></div><div class="tagcloud-post"><a href="/blog/2020/06/04/hammerspoon-clipboard/"><time class="tagcloud-posttime">2020 / 06 / 04</time> <span>我如何用 hammerspoon 实现剪贴板历史</span></a></div><div class="tagcloud-post"><a href="/blog/2020/06/02/hammerspoon-ts/"><time class="tagcloud-posttime">2020 / 06 / 02</time> <span>或许可以用 TypeScript 编写 hammerspoon</span></a></div><div class="tagcloud-post"><a href="/blog/2019/03/23/last-test-questions/"><time class="tagcloud-posttime">2019 / 03 / 23</time> <span>做不完的题目</span></a></div><div class="tagcloud-post"><a href="/blog/2019/10/13/try-wasm/"><time class="tagcloud-posttime">2019 / 10 / 13</time> <span>如果我把 Rust 用在网页呢</span></a></div><div class="tagcloud-post"><a href="/blog/2017/09/19/what-the-feeling-about-hyper/"><time class="tagcloud-posttime">2017 / 09 / 19</time> <span>使用桌面应用写hexo博客是什么体验？</span></a></div></div><div class="tagcloud-postlist"><h2>flutter</h2><div class="tagcloud-post"><a href="/blog/2021/06/17/flutter-tauri/"><time class="tagcloud-posttime">2021 / 06 / 17</time> <span>flutter desktop 能不能跨平台多窗口</span></a></div></div><div class="tagcloud-postlist"><h2>tauri</h2><div class="tagcloud-post"><a href="/blog/2021/06/17/flutter-tauri/"><time class="tagcloud-posttime">2021 / 06 / 17</time> <span>flutter desktop 能不能跨平台多窗口</span></a></div></div><div class="tagcloud-postlist"><h2>rust</h2><div class="tagcloud-post"><a href="/blog/2021/06/17/flutter-tauri/"><time class="tagcloud-posttime">2021 / 06 / 17</time> <span>flutter desktop 能不能跨平台多窗口</span></a></div><div class="tagcloud-post"><a href="/blog/2022/12/12/quickjs-ssr/"><time class="tagcloud-posttime">2022 / 12 / 12</time> <span>我早就想拿 QuickJS 做 SSR 了</span></a></div><div class="tagcloud-post"><a href="/blog/2019/12/29/try-actix/"><time class="tagcloud-posttime">2019 / 12 / 29</time> <span>创建一个 rust web server</span></a></div><div class="tagcloud-post"><a href="/blog/2019/10/13/try-wasm/"><time class="tagcloud-posttime">2019 / 10 / 13</time> <span>如果我把 Rust 用在网页呢</span></a></div></div><div class="tagcloud-postlist"><h2>godot</h2><div class="tagcloud-post"><a href="/blog/2021/08/29/game-pong-enhance-0/"><time class="tagcloud-posttime">2021 / 08 / 29</time> <span>从零开始的 Pong Game - 介绍</span></a></div><div class="tagcloud-post"><a href="/blog/2021/09/02/game-pong-enhance-1/"><time class="tagcloud-posttime">2021 / 09 / 02</time> <span>从零开始的 Pong Game - 发布</span></a></div><div class="tagcloud-post"><a href="/blog/2021/09/04/game-pong-enhance-2/"><time class="tagcloud-posttime">2021 / 09 / 04</time> <span>从零开始的 Pong Game - 一起玩吧</span></a></div></div><div class="tagcloud-postlist"><h2>cpp</h2><div class="tagcloud-post"><a href="/blog/2021/08/29/game-pong-enhance-0/"><time class="tagcloud-posttime">2021 / 08 / 29</time> <span>从零开始的 Pong Game - 介绍</span></a></div><div class="tagcloud-post"><a href="/blog/2021/09/02/game-pong-enhance-1/"><time class="tagcloud-posttime">2021 / 09 / 02</time> <span>从零开始的 Pong Game - 发布</span></a></div><div class="tagcloud-post"><a href="/blog/2021/09/04/game-pong-enhance-2/"><time class="tagcloud-posttime">2021 / 09 / 04</time> <span>从零开始的 Pong Game - 一起玩吧</span></a></div></div><div class="tagcloud-postlist"><h2>pong</h2><div class="tagcloud-post"><a href="/blog/2021/08/29/game-pong-enhance-0/"><time class="tagcloud-posttime">2021 / 08 / 29</time> <span>从零开始的 Pong Game - 介绍</span></a></div><div class="tagcloud-post"><a href="/blog/2021/09/02/game-pong-enhance-1/"><time class="tagcloud-posttime">2021 / 09 / 02</time> <span>从零开始的 Pong Game - 发布</span></a></div><div class="tagcloud-post"><a href="/blog/2021/09/04/game-pong-enhance-2/"><time class="tagcloud-posttime">2021 / 09 / 04</time> <span>从零开始的 Pong Game - 一起玩吧</span></a></div></div><div class="tagcloud-postlist"><h2>weapp</h2><div class="tagcloud-post"><a href="/blog/2016/10/28/guan-yu-wei-xin-xiao-cheng-xu/"><time class="tagcloud-posttime">2016 / 10 / 28</time> <span>关于微信小程序</span></a></div></div><div class="tagcloud-postlist"><h2>hammerspoon</h2><div class="tagcloud-post"><a href="/blog/2020/06/04/hammerspoon-clipboard/"><time class="tagcloud-posttime">2020 / 06 / 04</time> <span>我如何用 hammerspoon 实现剪贴板历史</span></a></div><div class="tagcloud-post"><a href="/blog/2020/06/02/hammerspoon-ts/"><time class="tagcloud-posttime">2020 / 06 / 02</time> <span>或许可以用 TypeScript 编写 hammerspoon</span></a></div></div><div class="tagcloud-postlist"><h2>swift</h2><div class="tagcloud-post"><a href="/blog/2020/08/08/hi-swift-react/"><time class="tagcloud-posttime">2020 / 08 / 08</time> <span>我又不跨平台我为什么要 electron</span></a></div><div class="tagcloud-post"><a href="/blog/2019/06/07/try-swift-perfect/"><time class="tagcloud-posttime">2019 / 06 / 07</time> <span>来自 swift 的跨界执法（零） —— Perfect</span></a></div><div class="tagcloud-post"><a href="/blog/2019/06/23/try-vapor-0/"><time class="tagcloud-posttime">2019 / 06 / 23</time> <span>来自 swift 的跨界执法（一） —— Vapor</span></a></div></div><div class="tagcloud-postlist"><h2>NAS</h2><div class="tagcloud-post"><a href="/blog/2020/06/07/home-server/"><time class="tagcloud-posttime">2020 / 06 / 07</time> <span>整一个家庭服务器记录</span></a></div></div><div class="tagcloud-postlist"><h2>linux</h2><div class="tagcloud-post"><a href="/blog/2020/06/07/home-server/"><time class="tagcloud-posttime">2020 / 06 / 07</time> <span>整一个家庭服务器记录</span></a></div></div><div class="tagcloud-postlist"><h2>NPM</h2><div class="tagcloud-post"><a href="/blog/2018/07/12/kill-orphan-on-npm/"><time class="tagcloud-posttime">2018 / 07 / 12</time> <span>记在NPM抢空包名的经历</span></a></div></div><div class="tagcloud-postlist"><h2>vim</h2><div class="tagcloud-post"><a href="/blog/2018/02/13/new-life-nvim/"><time class="tagcloud-posttime">2018 / 02 / 13</time> <span>抛下不成熟，开始nvim</span></a></div></div><div class="tagcloud-postlist"><h2>quickjs</h2><div class="tagcloud-post"><a href="/blog/2022/12/12/quickjs-ssr/"><time class="tagcloud-posttime">2022 / 12 / 12</time> <span>我早就想拿 QuickJS 做 SSR 了</span></a></div></div><div class="tagcloud-postlist"><h2>vite</h2><div class="tagcloud-post"><a href="/blog/2022/12/12/quickjs-ssr/"><time class="tagcloud-posttime">2022 / 12 / 12</time> <span>我早就想拿 QuickJS 做 SSR 了</span></a></div></div><div class="tagcloud-postlist"><h2>solid</h2><div class="tagcloud-post"><a href="/blog/2022/12/12/quickjs-ssr/"><time class="tagcloud-posttime">2022 / 12 / 12</time> <span>我早就想拿 QuickJS 做 SSR 了</span></a></div></div><div class="tagcloud-postlist"><h2>ssr</h2><div class="tagcloud-post"><a href="/blog/2022/12/12/quickjs-ssr/"><time class="tagcloud-posttime">2022 / 12 / 12</time> <span>我早就想拿 QuickJS 做 SSR 了</span></a></div></div><div class="tagcloud-postlist"><h2>i18n</h2><div class="tagcloud-post"><a href="/blog/2020/01/31/react-translate/"><time class="tagcloud-posttime">2020 / 01 / 31</time> <span>利用 Context 传递多语言文本</span></a></div></div><div class="tagcloud-postlist"><h2>redux</h2><div class="tagcloud-post"><a href="/blog/2019/03/08/redux-combinereducers/"><time class="tagcloud-posttime">2019 / 03 / 08</time> <span>Redux —— combineReducers</span></a></div></div><div class="tagcloud-postlist"><h2>Syuanpi</h2><div class="tagcloud-post"><a href="/blog/2017/02/13/syuanpi-css/"><time class="tagcloud-posttime">2017 / 02 / 13</time> <span>自己造轮子！—— Syuanpi.css</span></a></div></div><div class="tagcloud-postlist"><h2>CSS</h2><div class="tagcloud-post"><a href="/blog/2017/02/13/syuanpi-css/"><time class="tagcloud-posttime">2017 / 02 / 13</time> <span>自己造轮子！—— Syuanpi.css</span></a></div></div><div class="tagcloud-postlist"><h2>年度总结</h2><div class="tagcloud-post"><a href="/blog/2022/12/31/to-be-a-gamer-2022/"><time class="tagcloud-posttime">2022 / 12 / 31</time> <span>成为玩家 2022</span></a></div><div class="tagcloud-post"><a href="/blog/2022/01/07/to-be-a-gamer/"><time class="tagcloud-posttime">2022 / 01 / 07</time> <span>作为玩家 成为玩家</span></a></div></div><div class="tagcloud-postlist"><h2>actix</h2><div class="tagcloud-post"><a href="/blog/2019/12/29/try-actix/"><time class="tagcloud-posttime">2019 / 12 / 29</time> <span>创建一个 rust web server</span></a></div></div><div class="tagcloud-postlist"><h2>perfect</h2><div class="tagcloud-post"><a href="/blog/2019/06/07/try-swift-perfect/"><time class="tagcloud-posttime">2019 / 06 / 07</time> <span>来自 swift 的跨界执法（零） —— Perfect</span></a></div></div><div class="tagcloud-postlist"><h2>vapor</h2><div class="tagcloud-post"><a href="/blog/2019/06/23/try-vapor-0/"><time class="tagcloud-posttime">2019 / 06 / 23</time> <span>来自 swift 的跨界执法（一） —— Vapor</span></a></div></div><div class="tagcloud-postlist"><h2>vuex</h2><div class="tagcloud-post"><a href="/blog/2018/01/22/vuex-dva/"><time class="tagcloud-posttime">2018 / 01 / 22</time> <span>通过dva得到的思考 —— “滥用”VUEX</span></a></div><div class="tagcloud-post"><a href="/blog/2018/01/25/vuex-study-1/"><time class="tagcloud-posttime">2018 / 01 / 25</time> <span>vuex源码理解（一）</span></a></div><div class="tagcloud-post"><a href="/blog/2018/01/30/vuex-study-2/"><time class="tagcloud-posttime">2018 / 01 / 30</time> <span>vuex源码理解（二）</span></a></div></div><div class="tagcloud-postlist"><h2>dva</h2><div class="tagcloud-post"><a href="/blog/2018/01/22/vuex-dva/"><time class="tagcloud-posttime">2018 / 01 / 22</time> <span>通过dva得到的思考 —— “滥用”VUEX</span></a></div></div><div class="tagcloud-postlist"><h2>preact</h2><div class="tagcloud-post"><a href="/blog/2022/12/15/web-optimization/"><time class="tagcloud-posttime">2022 / 12 / 15</time> <span>web 「性能优化」</span></a></div></div><div class="tagcloud-postlist"><h2>性能优化</h2><div class="tagcloud-post"><a href="/blog/2022/12/15/web-optimization/"><time class="tagcloud-posttime">2022 / 12 / 15</time> <span>web 「性能优化」</span></a></div></div><div class="tagcloud-postlist"><h2>设计</h2><div class="tagcloud-post"><a href="/blog/2020/11/11/why-redesign-cv/"><time class="tagcloud-posttime">2020 / 11 / 11</time> <span>再一次重新设计简历</span></a></div></div><div class="tagcloud-postlist"><h2>简历</h2><div class="tagcloud-post"><a href="/blog/2020/11/11/why-redesign-cv/"><time class="tagcloud-posttime">2020 / 11 / 11</time> <span>再一次重新设计简历</span></a></div></div></div></div><div class="toolbar"><div class="switch-toc" id="switch-toc"><i class="ri-list-check"></i></div><div class="backtop syuanpi melt to-top" id="backtop"><i class="ri-arrow-up-s-line ri-xl"></i> <span style="text-align:center;font-family:Georgia"><span style="font-family:Georgia" id="scrollpercent">0</span>%</span></div></div><div class="search" id="search"><div class="input"><input type="text" id="search-input" placeholder="谷歌搜索本地模式" autofocus></div><div id="search-result"></div></div><script src="//cdn.jsdelivr.net/npm/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css"><script src="//cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js" defer="defer"></script><script src="/blog/script/lib/nlvi/banderole.js" defer="defer"></script><script src="/blog/script/bootstrap.js" defer="defer"></script><script src="//cdn.jsdelivr.net/npm/lazysizes@5.1.1/lazysizes.min.js" async></script><script>nlviconfig.theme.toc&&setTimeout(function(){"balance"===nlviconfig.theme.scheme?document.getElementById("header")&&document.getElementById("header").classList.add("show_toc"):"banderole"===nlviconfig.theme.scheme&&(document.getElementById("container-inner")&&document.getElementById("container-inner").classList.add("has_toc"),document.querySelector(".post-toc .title")&&document.querySelector(".post-toc .title").classList.add("show"),document.querySelector(".toc-inner")&&document.querySelector(".toc-inner").classList.add("show"))},1e3)</script></body></html>